{"version":3,"sources":["../../contracts/src/config.js","../../contracts/src/addresses.js","../../contracts/src/index.js","serviceWorker.js","connectors.ts","hooks.ts","components/BlockiesIdenticon.js","components/Profile.tsx","components/Bell.js","config/Globals.js","components/NavigationButton.js","contexts/NavigationContext.js","sections/Header.tsx","config/NavigationList.js","sections/Navigation.tsx","helpers/EPNSCoreHelper.js","components/NotificationToast.js","components/DisplayNotice.js","redux/slices/notificationSlice.js","segments/Feedbox.tsx","api/index.js","singletons/ChannelsDataStore.js","singletons/UsersDataStore.js","redux/slices/contractSlice.js","pages/InboxPage.js","config/index.js","components/AliasVerificationModal.js","components/ViewInfoItem.js","segments/Info.tsx","redux/slices/spamSlice.js","segments/spam.tsx","segments/Spambox.tsx","helpers/UtilityHelper.js","assets/Device.js","redux/slices/channelSlice.js","components/ViewChannelItem.js","components/Faucets.js","segments/ViewChannels.tsx","assets/icons/index.js","components/SendNotifications.tsx","segments/ChannelCreationDashboard.js","redux/slices/adminSlice.js","pages/Home.js","components/AddDelegateModal.js","components/RemoveDelegateModal.js","components/ActivateChannelModal.js","components/ChannelSettingsDropdown.tsx","components/ChannelSettings.jsx","components/ChannelDetails.js","segments/ChannelOwnerDashboard.js","pages/SpamPage.js","pages/ViewChannelsPage.js","pages/ChannelDashboardPage.js","pages/ReceiveNotifsPage.js","components/ViewDelegateeItem.js","pages/GovernancePage.tsx","singletons/YieldFarmingDataStore.js","components/InfoTooltip.js","components/PoolCard.js","pages/YieldFarmingPage.js","helpers/NFTHelper.js","components/ViewNFTItem.js","components/MyNFTs.js","components/AllNFTs.js","components/TransferNFT.js","pages/NFTPage.js","pages/AirdropPage.tsx","pages/ComingSoonPage.tsx","pages/SupportPage.jsx","pages/MasterInterfacePage.tsx","App.tsx","redux/store.js","index.js","helpers/CryptoHelper.js","config/Themization.js","components/SharedStyling.js","components/CreateChannel.js","components/blockies.js","helpers/AirdropHelper.js"],"names":["config","apiUrl","allowedNetworks","coreContractChain","coreRPC","addresses","ceaErc20","epnscore","epnsEthComm","epnsPolyComm","dai","aDai","staking","yieldFarmPUSH","yieldFarmLP","epnsToken","epnsLPToken","rockstar","batchMintNFT","NFTRewards","distributor","uniswapV2Router02","WETHAddress","USDTAddress","abis","erc20","erc20Abi","ownable","ownableAbi","epnscoreAbi","epnsCommAbi","epnsComm","daiAbi","epnsTokenAbi","stakingAbi","yieldFarming","yieldFarmingAbi","rockstarAbi","erc721","ec721Abi","MerkleDistributorAbi","UniswapV2Router02Abi","Boolean","window","location","hostname","match","require","SUPPORTED_CHAIN_IDS","envConfig","CORE_CHAIN_ID","CORE_RPC","RPC_URLS","injected","InjectedConnector","supportedChainIds","walletconnect","WalletConnectConnector","rpc","bridge","qrcode","pollingInterval","ledger","LedgerConnector","chainId","url","portis","TrezorConnector","manifestEmail","manifestAppUrl","PortisConnector","dAppId","networks","BlockiesIdenticon","props","seed","this","opts","color","bgcolor","size","scale","spotcolor","draw","prevProps","blockies","render","canvas","React","createElement","ref","Component","Container","styled","button","Blocky","div","BlockyInner","Wallet","span","Profile","useWeb3React","error","active","account","library","useState","address","setAddress","ens","setENS","ensFetched","setENSFetched","useEffect","lookupAddress","then","name","catch","toLowerCase","type","height","width","substring","length","tadaaa","keyframes","BellImage","img","ringme","css","BellImageAbs","Badge","Bell","badgeCount","bellPressedCB","badge","setBadge","ring","setRing","setResetRinger","setTimeout","onClick","src","className","animationIn","animationOut","durationOut","HEADER_HEIGHT","LEFT_BAR_WIDTH","NAVBAR_SECTIONS","PRIMARY","SECONDARY","FULL","NAVBAR_IDENTIFIERS","CREATE_CHANNEL","LINKS","GRADIENT_PRIMARY","GRADIENT_SECONDARY","GRADIENT_THIRD","TRANSPARENT","WHITE","DARK_WHITE","MID_WHITE","LIGHT_WHITE","SLIGHTER_GRAY","SLIGHT_GRAY","LIGHT_GRAY","MID_GRAY","DARK_GRAY","DARKER_GRAY","LIGHT_BLACK_TRANS","SEMI_MID_BLACK_TRANS","MID_BLACK_TRANS","DARK_BLACK_TRANS","BLACK","CONFIRM_GREEN","CONFIRM","WARNING","SUBLIME_RED","BADGE_RED","LIGHT_MAROON","LIGHTER_MAROON","InheritedSectionGroupIcon","Image","theme","themeDark","InheritedSectionItemIcon","LeftBarPrimarySectionIcon","LeftBarPrimaryItemIcon","LeftBarSecondarySectionIcon","LeftBarSecondaryItemIcon","NavigationButton","SelectedIcon","RouteLogic","item","data","sectionID","useTheme","GLOBALS","isSection","isRoute","RouterLink","Anchor","flex","title","to","href","alt","target","newTab","disabled","hoverBG","leftBarHoverColor","radius","align","padding","margin","weight","spacing","leftBarFontColor","hasItems","opened","NavigationContext","createContext","NavigationContextProvider","navigationSetup","setNavigationSetup","Provider","value","children","Section","headerBg","sectionBorderBg","Logo","RightBarContainer","ItemH","RightBarDesktop","RightBarMobile","NavMenuContainer","Item","navMenuBg","NavMenu","Notice","PrimaryTheme","ThirdTheme","Connection","phase","HeaderTag","DarkMode","Header","isDarkMode","darkModeToggle","context","useContext","deactivate","showLoginControls","setShowLoginControls","showNavBar","setShowNavBar","headerTag","setHeaderTag","useLocation","updateHeaderTag","Object","entries","navigation","forEach","key","pathname","console","log","direction","justify","bg","headerIconsBg","keys","map","position","top","right","overflow","textTransform","dark","light","fg","border-radius","style","marginBottom","checked","onChange","sunColor","NoEthereumProviderError","UnsupportedChainIdError","UserRejectedRequestErrorInjected","getErrorMessage","NavigationList","primary","communicate","iconFactory","hasMenuLogic","drilldown","inbox","themeLight","headerTagFg","headerTagBg","spam","channels","createChannel","uid","receiveNotifs","govern","incentives","yield","rockstars","airdrop","walkthrough","faq","secondary","latest","id","isMenuLogic","support","leftBarBg","headerHeight","Primary","InheritedSection","PrimarySection","InheritedSectionGroup","InheritedSectionItem","SectionInnerGroupContainer","margintop","leftBarButtonBg","SectionInnerItemContainer","PrimarySectionGroup","PrimarySectionItem","Footer","Secondary","SecondarySection","Navigation","channelDetails","useSelector","state","admin","loading","setLoading","refresh","setRefresh","primaryList","returnTransformedList","secondaryList","navList","returnNavList","assign","lists","identity","transformedList","count","identifier","toString","section","parent","hasOwnProperty","drillcount","drilldownModified","drillkey","drillvalue","drillIdentifier","topSection","mutateTransformedList","onlyDrilldown","transformedMenuList","activeParentId","activeDrilldownId","selectedSectionIsActionable","sectionkey","renderMainItems","items","fontSize","secondaryButton","flexBasis","zIndex","renderChildItems","SectionGroup","SectionItem","leftBarLoaderBg","leftBarSocialBg","leftBarSocialIconBg","onMouseOver","onMouseOut","EPNSCoreHelper","getOwnerInfo","contract","a","Promise","resolve","reject","governance","response","err","getVotingPower","delegateeAddress","rawFormat","ethers","utils","isAddress","endsWith","decimals","getCurrentVotes","votes","Number","Math","pow","votingPower","prettyVotingPower","getUserInfo","user","users","mappings","addr","getChannelAddressFromID","channelID","channelById","getChannelInfo","channel","getChannelEvent","startBlock","updateBlock","filter","filters","AddChannel","block","UpdateChannel","queryFilter","filteredResponse","args","toUtf8String","getJsonFileFromIdentity","ids","split","fetch","json","getChannelJsonFromChannelAddress","channelStartBlock","toNumber","channelUpdateBlock","hash","getChannelJsonFromUserAddress","getTotalNumberOfChannels","channelsCount","getChannelsMetaLatestToOldest","atIndex","numChannels","channelsInfo","channelArrays","i","assignedChannelID","push","promises","all","getTotalNumberOfUsers","usersCount","getPublicKey","getSubscribedStatus","isUserSubscribed","getTotalSubscribedChannels","subscribedCount","getFairShareOfUserAtBlock","userActivated","calcAllChannelsRatio","getPoolFunds","poolFunds","formatBigNumberToMetric","bignumber","convertToCurrency","metricFormatter","e","num","digits","si","symbol","toFixed","replace","NotificationWrapper","Toaster","NotificationToast","notification","clearToast","LoaderToast","notificationTitle","notificationBody","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","DisplayNotice","initialState","page","notifications","finishedFetching","toggler","contractSlice","createSlice","reducers","toggleToggler","resetState","addPaginatedNotifications","action","payload","incrementPage","addNewNotification","setFinishedFetching","updateTopNotifications","pp","notifs","slice","pageSize","sn","actions","mainBg","Notifs","Feedbox","dispatch","useDispatch","contracts","epnsCommReadProvider","toggle","themes","bgUpdateLoading","setBgUpdateLoading","currentTab","loadNotifications","api","fetchNotifications","results","parsedResponse","parseApiResponse","fetchLatestNotifications","handlePagination","oneNotification","index","cta","message","app","icon","image","showWayPoint","onEnter","scheme","BASE_URL","postReq","path","obj","axios","post","headers","ChannelEvents","ChannelsDataStore","channelsMeta","channelsJson","subscribers","callbacks","epnsReadProvider","init","resetChannelsListeners","initChannelsListenersAsync","getChannelsCountAsync","removeAllListeners","listenForAddChannelAnyAsync","listenForAddChannelSelfAsync","listenForUpdateChannelAnyAsync","listenForUpdateChannelSelfAsync","listenForSubscribeAnyAsync","listenForSubscribeSelfAsync","listenForUnsubscribeAnyAsync","listenForUnsubscribeSelfAsync","on","ipfs","incrementChannelsCountAsync","callback","Subscribe","Unsubscribe","addCallbacks","callbackType","callbackID","removeCallbacks","incrementCount","getChannelFromApi","startIndex","pageCount","ceil","op","getChannelsMetaAsync","stopIndex","channelIDs","getChannelMetaAsync","channelMetaData","channelAddress","getChannelMetaViaAddressAsync","getChannelSubscribers","cachedSubscribers","subs","getChannelJsonAsync","instance","UsersDataStore","userMeta","ownerMeta","resetUsersListeners","initUsersListenersAsync","getOwnerMetaAsync","getUsersCountAsync","getUserMetaAsync","listenForSubscribedAsync","listenForUnsubscribedAsync","publicKeyRegistered","listenForPublicKeyBroadcastAsync","incrementUsersCountAsync","ZERO_ADDRESS","epnsWriteProvider","epnsCommWriteProvider","pushAdminAddress","setCoreReadProvider","setCoreWriteProvider","setCommunicatorReadProvider","setCommunicatorWriteProvider","setPushAdmin","interfaceTopPadding","InboxPage","ReactGA","pageview","showToast","pushChannelAdmin","dotenv","etherscanToken","process","REACT_APP_INFURA_API_KEY","AliasVerificationModal","onClose","onSuccess","verificationStatus","signer","getSigner","modalRef","useRef","polygonCommsContract","Contract","mainAdress","setMainAddress","useClickAway","Overlay","AliasModal","CustomInput","required","placeholder","border","self","verifyChannelAlias","tx","StyledInput","cursor","Input","ChannelTitleLink","AppLink","AppLinkText","ChannelInfo","ChannelTitle","ViewInfoItem","rel","ContainerInfo","InfoBox","Info","controlAt","CenteredContainerInfo","Items","SpamBox","EPNS_DOMAIN","verifyingContract","fetchSpamNotifications","parsedResponsePromise","elem","onSubscribeToChannel","subscriber","_signTypedData","signature","contractAddress","isSubscribedFn","includes","marginTop","subscribeFn","stopPropagation","isSpam","FullWidth","UtilityHelper","isMainnet","Device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","desktopL","CHANNNEL_DEACTIVATED_STATE","CHANNEL_BLOCKED_STATE","CHANNEL_ACTIVE_STATE","CHANNEL_BLACKLIST","channelsCache","setChannelMeta","cacheChannelInfo","meta","FlexBox","ColumnFlex","viewChannelIconBorder","SkeletonWrapper","atW","atH","borderRadius","marginRight","ChannelLogo","ChannelLogoOuter","ChannelLogoInner","ChannelLogoImg","viewChannelLink","VerifiedBy","VerifierIcon","VerifierName","ChannelDesc","ChannelDescLabel","label","ChannelMeta","ChannelMetaBox","Subscribers","SubscribersCount","viewChannelSecondaryBG","LineBreak","ChannelActions","ChannelActionButton","ActionTitle","hideit","ActionLoader","SkeletonButton","SubscribeButton","UnsubscribeButton","OwnerButton","ToasterMsg","ViewChannelItem","channelObjectProp","useNavigate","canVerify","isOwner","channelObject","setChannelObject","channelJson","setChannelJson","subscribed","setSubscribed","memberCount","setMemberCount","isPushAdmin","setIsPushAdmin","isVerified","setIsVerified","isBlocked","setIsBlocked","vLoading","setvLoading","bLoading","setBLoading","txInProgress","setTxInProgress","canUnverify","setCanUnverify","verifierDetails","setVerifierDetails","copyText","setCopyText","isChannelBlacklisted","verifiedBy","fetchChannelJson","alert","channelState","addressText","channelSubscribers","find","sub","msg","subscribe","subscribeAction","notificationToast","toaster","txToast","res","update","TYPE","SUCCESS","ERROR","unsubscribeAction","unsubscriber","finally","interfaceSkeleton","display","marginLeft","viewChannelVerifiedBadge","info","viewChannelSecondaryIcon","navigator","clipboard","writeText","el","document","body","appendChild","select","execCommand","removeChild","copyToClipboard","onMouseEnter","onMouseLeave","blockChannel","INFO","verifyChannel","unverifyChannel","wait","Faucets","faucetBg","faucetBorder","pos","faucetHeader","faucetIcon","textAlign","ADDRESS_REGEX","SearchBar","input","viewChannelSearchBg","viewChannelSearchBorder","viewChannelSearchText","CenterContainer","ScrollItem","scrollBg","ViewChannels","moreLoading","setMoreLoading","search","setSearch","channelToShow","setChannelToShow","loadingChannel","setLoadingChannel","trialCount","setTrialCount","channelsVisited","fetchInitialsChannelMeta","updateCurrentPage","loadMoreChannelMeta","newPageNumber","startingPoint","moreChannels","searchForChannel","query","t","timeout","clearTimeout","parsedChannel","String","queryString","parse","test","minWidth","bottom","left","viewChannelSearchIcon","CloseIcon","xmlns","viewBox","data-name","transform","x2","fill","stroke","stroke-linecap","stroke-width","y2","NFTypes","LIMITER_KEYS","DropdownStyledParent","MultiRecipientsContainer","ModifiedContent","Content","DropdownHeader","DropdownStyled","Dropdown","DropdownStyledWhite","DropdownStyledParentWhite","CustomDropdownItem","SendNotifications","delegatees","nfProcessing","setNFProcessing","setChannelAddress","nfRecipient","setNFRecipient","multipleRecipients","setMultipleRecipients","tempRecipeint","setTempRecipient","nfType","setNFType","nfSub","setNFSub","nfSubEnabled","setNFSubEnabled","nfMsg","setNFMsg","nfCTA","setNFCTA","nfCTAEnabled","setNFCTAEnabled","nfMedia","setNFMedia","nfMediaEnabled","setNFMediaEnabled","nfInfo","setNFInfo","delegateeOptions","setDelegateeOptions","isChannelDeactivated","cannotDisplayDelegatees","oneDelegatee","bodyValidated","validated","handleSendMessage","preventDefault","nsub","nmsg","asub","amsg","acta","aimg","secret","CryptoHelper","makeid","k","publickey","encryptWithECIES","secretEncrypted","encryptWithAES","storagePointer","isEmpty","jsonPayload","JSON","stringify","at","add","identityBytes","toUtf8Bytes","Data","recipient","deployedContract","field","trim","onSubmit","options","option","d","Switch","z","oneRecipient","recipientAddress","filteredRecipients","rec","join","removeRecipient","onKeyPress","oldRecipients","Array","from","Set","listRecipients","text","borderBottom","rows","autocomplete","ChannelCreationDashboard","setUserChannelDetails","setCanVerify","setDelegatees","ALLOWED_CORE_NETWORK","AddDelegateModal","addDelegate","background","RemoveDelegateModal","removeDelegate","ActivateChannelModal","activateChannel","setChannelStakeFees","channelStakeFees","popupRef","PopupOverlay","PopupSlider","Slider","defaultValue","onChangeCommitted","_","aria-labelledby","valueLabelDisplay","step","marks","min","max","DropdownWrapper","ActiveChannelWrapper","inactive","DeactivateButton","ChannelSettings","onCoreNetwork","showActivateChannelPopup","setShowActivateChannelPopup","poolContrib","setPoolContrib","addDelegateLoading","setAddDelegateLoading","addModalOpen","setAddModalOpen","removeDelegateLoading","setRemoveDelegateLoading","removeModalOpen","setRemoveModalOpen","isChannelBlocked","channelInactive","poolContribution","daiContract","fees","parseUnits","sendTransactionPromise","approve","waitForTransaction","reactivateChannel","deactivateChannel","amountToBeConverted","parseInt","pushValue","quote","PUSH","price","floor","walletAddress","setActive","SettingsWrapper","ChannelSettingsDropdown","Settings","ChannelDetails","verifyingChannel","setVerifyingChannel","creationDate","setCreationDate","channelIsActive","channelIsDeactivated","bn","getBlock","date","moment","timestamp","format","ChannelDetailsWrapper","SectionTop","ImageSection","Details","ChannelName","VerifyImage","ChanneStateText","SectionDes","SectionDate","Verified","VerifyingIcon","VerifyingName","Date","ChannelOwnerDashboard","CreateChannel","Interface","setControlAt","modalOpen","setModalOpen","adminStatusLoaded","setAdminStatusLoaded","aliasEthAccount","setAliasEthAccount","aliasVerified","setAliasVerified","setChannelAdmin","coreProvider","getDefaultProvider","etherscan","aliasAddress","ethAddress","status","coreContractInstance","commAddress","commContractInstance","coreSignerInstance","communicatorSignerInstance","userClickedAt","checkUserForChannelOwnership","event","cb","eventChannelAddress","eventUserAddress","identityHex","userAddress","hex2ascii","concat","toLocaleLowerCase","ipfsId","result","ipfsNotification","toastMessage","notificationObject","listenFornewNotifications","fetchDelegators","controlIndex","delegateAddress","delegators","channelOwners","channelInformationPromise","channelInformation","ownerAccount","getChannelVerfication","Spambox","ChannelDashboardPage","ReceiveNotifsPage","DelegateeItem","DelegateeImageOuter","DelegateeImageInner","DelegateeProfile","DelegateeWallet","Span","NFTTextStyle","ViewDelegateeItem","delegateeObject","pushBalance","isBalance","setIsBalance","delegateAction","delegate","wallet","pic","srcSet","toLocaleString","forum","delegateesJSON","Question","Button","Answer","QnAItem","AMod","A","StatsCard","StatsHeading","h2","NomineeContainer","StatsContent","AbsoluteWrapper","StatsPreview","StatsInnerTitle","ButtonAlt","CurvedSpan","GovernancePage","epnsWriteProvide","darkMode","dashboardLoading","setDashboardLoading","delegateesLoading","setDelegateesLoading","setDelegateesObject","pushDelegatees","setPushDelegatees","pushNominees","setPushNominees","setEpnsToken","tokenBalance","setTokenBalance","prettyTokenBalance","setPrettyTokenBalance","showDelegateePrompt","setShowDelegateePrompt","delegatee","setDelegatee","showAnswers","setShowAnswers","selfVotingPower","setSelfVotingPower","newDelegateeAddress","setNewDelegateeAddress","newDelegateeVotingPower","setNewDelegateeVotingPower","toggleShowAnswer","newShowAnswers","epnsTokenContract","getMyInfo","delegateesList","values","votingPowerSorter","b","allDelegateesPromise","oneDelegate","allDelegatees","delegateesAbove75k","votingPowerSimulate","sortedDelegatees","sort","delegateesBelow75k","sortedNominees","isValidAddress","balanceOf","bal","newBal","delegates","newDelegatee","onePushNominee","hover","ONE_PUSH","BigNumber","mul","tokenToBn","token","tokenBNtoNumber","tokenBn","YieldFarmingDataStore","yieldFarmingPUSH","yieldFarmingLP","rewardForCurrentEpochPush","rewardForCurrentEpochLP","genesisEpochAmountPUSH","deprecationPerEpochPUSH","genesisEpochAmountLP","deprecationPerEpochLP","getPoolStats","getCurrentEpoch","currentEpochPUSH","getAmountsOut","pushPriceAmounts","pushPrice","pushAmountReserve","attach","wethAmountReserve","ethPriceAmounts","ethPrice","totalSupply","uniTotalSupply","lpToPushRatio","uniLpPrice","getPoolSize","pushNextPoolSize","lpNextPoolSize","totalValueLocked","epochDuration","epochStart","start","epochEndTimestamp","TOTAL_DISTRIBUTED_AMOUNT","pushTotalDistributedAmount","lpTotalDistributedAmount","totalDistributedAmount","getPushRewardsDistributed","pushRewardsDistributed","currentEpoch","getPUSHPoolStats","NR_OF_EPOCHS","totalEpochPUSH","genesisEpochAmount","deprecationPerEpoch","rewardForCurrentEpoch","calcTotalAmountPerEpoch","poolBalance","stakingAPR","calcStakingAPR","getLPPoolStats","poolStats","calcLPPoolAPR","getUserData","calculateUserEpochReward","potentialUserReward","getEpochStake","epochStakeNext","totalAccumulatedReward","epochReward","lastEpochIdHarvested","totalAvailableReward","currentEpochLP","pushPoolRewardsDistributed","lpPoolRewardsDistributed","rewardForCurrentEpochPUSH","epochId","calcAnnualEpochReward","currentEpochReward","depreciate","weeks","totalStaked","apr","annualRewards","aprFormatted","epochStake","poolSize","InfoTooltip","Tooltip","number","bnToInt","bnAmount","PoolCard","poolName","poolAddress","tokenAddress","pushPoolStats","userData","depositAmountToken","setDepositAmountToken","showDepositItem","setShowDepositItem","depositApproved","setDepositApprove","txInProgressApprDep","setTxInProgressApprDep","txInProgressDep","setTxInProgressDep","showDepSlip","setShowDepSlip","txInProgressWithdraw","setTxInProgressWithdraw","txInProgressMassHarvest","setTxInProgressMassHarvest","checkApprDeposit","tokenAddr","allowance","gte","fillMax","balance","approveDeposit","uintMax","depositAmountTokenFarmSingleTx","deposit","withdrawAmountTokenFarmAutomatic","withdrawAmount","formatTokens","withdraw","massHarvestTokensAll","massHarvest","tokens","numberWithCommas","x","PoolBoxTitle","PoolBoxMsg","EpochDisplayer","MaxButton","PoolContainer","h5","StatsInnerSub","YieldFarmingPage","setPoolStats","setPushPoolStats","lpPoolStats","setLpPoolStats","userDataPUSH","setUserDataPUSH","userDataLP","setUserDataLP","formattedDuration","setFormattedDuration","setStaking","setYieldFarmingPUSH","setYieldFarmingLP","setUniswapV2Router02","useCallback","getUserDataPUSH","getUserDataLP","duration","day","hour","minutes","seconds","getFormattedDuration","uniswapV2Router02Instance","syncData","yieldBg","pushPriceBg","NFTHelper","getNFTBalance","getTotalSupply","getOwnerOfTokenId","tokenId","ownerOf","getTokenOfOwnerByIndex","tokenOfOwnerByIndex","getTokenByIndex","tokenByIndex","getTokenMetadata","tokenURI","getTokenMetadatasOfOwner","owner","nftContract","rewardsContract","NFTDetails","getClaimable","claimable","metadata","getAllTokenDatas","getTokenData","transferNFT","safeTransferFrom","getClaimRewardStatus","NFTStatus","NFTStatusTitle","NFTClaim","NFTClaimTitle","ViewNFTItem","NFTObject","nftReadProvider","nftWriteProvider","setTokenId","NFTRewardsContract","setNFTRewardsContract","NFTRewardsInstance","handleClaim","claimReward","sendWithTxPromise","controls","playing","loop","MyNFTs","setNftReadProvider","setNftWriteProvider","NFTObjects","setNFTObjects","contractInstance","signerInstance","fetchNFTDetails","prev","transitions","scaleDown","AllNFTs","activeBG","TransferNFT","toAddress","setToAddress","processing","setProcessing","processingInfo","setProcessingInfo","handleTransferNFT","txPromise","maxlength","Controls","NFTPage","greyText","EpicButton","prop","AirdropPage","distributorContract","setDistributorContract","setUser","checkClaim","AirdropHelper","verifyAddress","claim","amount","proof","verified","Heading","family","ComingSoonPage","minHeight","SupportPage","contactFormTopics","contactFormProcessing","setContactFormProcessing","contactFormName","setContactFormName","contactFormEmail","setContactFormEmail","contactFormTopic","setContactFormTopic","contactFormSub","setContactFormSub","contactFormMsg","setContactFormMsg","contactFormError","setContactFormError","requestOptions","method","topic","jsondata","ContactInput","ContactTextArea","columnGap","rowGap","buttonBd","TextField","interfaceBorder","MasterInterfacePage","element","ViewChannelsPage","SpamPage","newestOnTop","rtl","pauseOnFocusLoss","web3Connectors","Injected","logo","WalletConnect","Ledger","Portis","App","connector","activate","activatingConnector","setActivatingConnector","setcurrentTime","now","triedEager","tried","setTried","isAuthorized","useEagerConnect","suppress","ethereum","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","initialize","setDarkMode","localStorage","getItem","setItem","backgroundColor","Olvy","organisation","view","showSearch","compact","showHeader","showUnreadIndicator","unreadIndicatorColor","unreadIndicatorPosition","teardown","HeaderContainer","ParentContainer","LeftBarContainer","leftBarWidth","ContentContainer","ProviderLogo","maxWidth","currentConnector","ProviderButton","ProviderImage","fontColor","header","backgroundBG","rootReducer","combineReducers","contractReducer","channelReducer","adminReducer","notificationReducer","spamReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","immutableCheck","client","ApolloClient","uri","cache","InMemoryCache","ReactDOM","ApolloProvider","getLibrary","provider","gottenProvider","providers","Web3Provider","oldNetwork","reload","getElementById","serviceWorker","ready","registration","unregister","CryptoJS","AES","encrypt","decryptWithAES","decrypt","enc","Utf8","publicKey","compressedKey","EthCrypto","compress","encryptWithPublicKey","encryptedSecret","decryptWithECIES","privateKey","decryptWithPrivateKey","pubKeyUint8Array","Uint8Array","Buffer","convertedKeyAsUint8Array","publicKeyConvert","convertedPublicKeyHex","pubKey","encryptedBuffers","cipher","iv","ephemPublicKey","ciphertext","mac","keyConvert","buf","encrypted","keyConvertBuffer","uncompressedKey","twoStripped","encryptedBuffer","decryptedBuffer","encryptionDecryptionPublicToPrivateTest","startTime","publicKeyByPrivateKey","encryptionTime","getTime","decryptMsg","decryptionTime","outputMsgPayload","subject","calltoaction","imageurl","pkey","asubE","amsgE","actaE","aimgE","toISOString","characters","charactersLength","charAt","random","module","exports","viewChannelOuterBorder","channelBg","buttonColor","createColor","questionBg","gradient","ItemBreak","wrap","filterHover","tabletAlign","tabletTextAlign","H2","arcRGB","h1","H3","h3","P","p","Para","B","UL","ul","LI","li","Link","FormSubmision","opacity","tabletRight","tabletLeft","tabletTop","tabletBottom","tabletTransform","tabletOpacity","form","outline","hand","textarea","ALIAS_CHAINS","Step","Line","Minter","Pool","PoolShare","uploadDone","setUploadDone","stakeFeesChoosen","setStakeFeesChoosen","channelInfoDone","setChannelInfoDone","chainDetails","setChainDetails","channelName","setChannelName","channelAlias","setChannelAlias","channelInfo","setChannelInfo","channelURL","setChannelURL","channelFile","setChannelFile","stepFlow","setStepFlow","handleLogoSizeLimitation","base64","sizeOf","base64Data","pop","dimensions","success","handleCreateChannel","chainDetailsSplit","blockchain","chain_id","anotherSendTxPromise","createChannelWithFees","mintDai","mintTransactionPromise","mint","onChangeStatus","file","files","allFiles","f","reader","FileReader","readAsDataURL","onloadend","onDrop","maxFiles","multiple","accept","classNamePrefix","colors","primary25","selectedOption","paddingLeft","randseed","rand","buildOpts","newOpts","charCodeAt","seedrand","renderIcon","imageData","dataWidth","mirrorWidth","y","row","r","reverse","createImageData","sqrt","cc","getContext","fillStyle","fillRect","col","create","claims","combinedHash","first","second","solidityKeccak256","compare","toNode","pairHex","verifyProof","root","pair","equals","getNextLayer","elements","reduce","layer","idx","arr","getRoot","balances","nodes","layers","merkleRootHex","merkleRoot","isClaimed","BNamount"],"mappings":"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","file":"static/js/main.6a87ea11.chunk.js","sourcesContent":["// environmental configurations for the dapp for different environments\r\nconst config = {\r\n    apiUrl: \"https://backend-kovan.epns.io/apis\", //the right backend URL to be used\r\n    allowedNetworks: [\r\n        42, //for ropsten\r\n        80001 //for mumbai polygon\r\n    ],\r\n    coreContractChain: 42, //the chain id of the network which the core contract relies on\r\n    coreRPC: \"https://kovan.infura.io/v3/4ff53a5254144d988a8318210b56f47a\"\r\n};\r\n\r\nexport default config;","// This address points to a dummy ERC20 contract deployed on Ethereum Mainnet,\r\n// Goerli, Kovan, Rinkeby and Ropsten. Replace it with your smart contracts.\r\nconst addresses = {\r\n  ceaErc20: \"0xc1C0472c0C80bCcDC7F5D01A376Bd97a734B8815\",\r\n  epnscore: \"0x97D7c5f14B8fe94Ef2b4bA589379f5Ec992197dA\",\r\n  epnsEthComm: \"0x87da9Af1899ad477C67FeA31ce89c1d2435c77DC\", // the core contract\r\n  epnsPolyComm: \"0xD2ee1e96e3592d5945dDc1808834d7EE67400823\", // the ploygon comm contract\r\n  dai: \"0xff795577d9ac8bd7d90ee22b6c1703490b6512fd\", //address for dai\r\n  aDai: \"0x58AD4cB396411B691A9AAb6F74545b2C5217FE6a\",\r\n  staking: \"0x8e129EF695F8761922F1AA38588292f8d8817bA5\",\r\n  yieldFarmPUSH: \"0xb41cd6760d3b1d0d216851f63fda9573b04dd46e\",\r\n  yieldFarmLP: \"0x604f629A6b5E85805D57f39493BBC2856cE8A540\",\r\n  epnsToken: \"0x9CE54E83c18f0a797F823905A3ec5CfC2F6d2CA9\",\r\n  epnsLPToken: \"0x1f094Bd8c260D0C3fC79157096015990885af4d2\",\r\n  rockstar: \"0xa5A8F2641A38C8Bb2a01b89F939Da332B46d9429\",\r\n  batchMintNFT: \"0xCf733D547B9f7F87c1B1f63f45c197C007F8eedf\",\r\n  NFTRewards: \"0xdF0Aa8669688a608D6873b34A672e61cf3A5B3a7\",\r\n  distributor: \"0x5B548D33874DeABaC2F683A6E1864795E09932F0\",\r\n  uniswapV2Router02: \"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D\",\r\n  WETHAddress: \"0xd0A1E359811322d97991E03f863a0C30C2cF029C\",\r\n  USDTAddress: \"0x13512979ade267ab5100878e2e0f485b568328a4\", \r\n};\r\nexport default addresses;","import erc20Abi from \"./abis/erc20\";\r\nimport ownableAbi from \"./abis/ownable\";\r\nimport epnscoreAbi from \"./abis/epnscore\";\r\nimport daiAbi from \"./abis/dai\";\r\nimport epnsTokenAbi from \"./abis/EPNS.json\";\r\nimport stakingAbi from \"./abis/Staking.json\";\r\nimport yieldFarmingAbi from \"./abis/YieldFarm.json\";\r\nimport rockstarAbi from \"./abis/Rockstar.json\";\r\nimport ec721Abi from \"./abis/ERC721.json\";\r\nimport NFTRewards from \"./abis/NFTRewards.json\";\r\nimport epnsCommAbi from \"./abis/epnsCommunicator.json\";\r\nimport MerkleDistributorAbi from \"./abis/MerkleDistributor.json\";\r\nimport UniswapV2Router02Abi from \"./abis/UniswapV2Router02.json\";\r\n\r\nexport const abis = {\r\n  erc20: erc20Abi,\r\n  ownable: ownableAbi,\r\n  epnscore: epnscoreAbi,\r\n  epnsPolyComm: epnsCommAbi,\r\n  epnsComm: epnsCommAbi,\r\n  dai: daiAbi,\r\n  epnsToken: epnsTokenAbi,\r\n  staking: stakingAbi,\r\n  yieldFarming: yieldFarmingAbi,\r\n  rockstar: rockstarAbi,\r\n  erc721: ec721Abi,\r\n  NFTRewards: NFTRewards,\r\n  distributor: MerkleDistributorAbi,\r\n  uniswapV2Router02: UniswapV2Router02Abi,\r\n};\r\n\r\nexport { default as envConfig } from \"./config\";\r\nexport { default as addresses } from \"./addresses\";\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\"No internet connection found. App is running in offline mode.\");\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { InjectedConnector } from '@web3-react/injected-connector'\r\nimport { envConfig } from \"@project/contracts\";\r\nimport { PortisConnector } from '@web3-react/portis-connector'\r\n// import { NetworkConnector } from '@web3-react/network-connector'\r\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector'\r\n// import { WalletLinkConnector } from '@web3-react/walletlink-connector'\r\nimport { LedgerConnector } from '@web3-react/ledger-connector'\r\nimport { TrezorConnector } from '@web3-react/trezor-connector'\r\n// import { FrameConnector } from '@web3-react/frame-connector'\r\n// import { AuthereumConnector } from '@web3-react/authereum-connector'\r\n// import { FortmaticConnector } from '@web3-react/fortmatic-connector'\r\n// import { SquarelinkConnector } from '@web3-react/squarelink-connector'\r\n// import { TorusConnector } from '@web3-react/torus-connector'\r\n\r\nrequire('dotenv').config();\r\nconst SUPPORTED_CHAIN_IDS = [...envConfig.allowedNetworks];\r\nconst POLLING_INTERVAL = 12000;\r\nconst CORE_CHAIN_ID = envConfig.coreContractChain;\r\nconst CORE_RPC = envConfig.coreRPC;\r\n\r\nconst RPC_URLS: { [chainId: number]: string } = {\r\n  [CORE_CHAIN_ID]: envConfig.coreRPC\r\n}\r\n\r\nexport const injected = new InjectedConnector({ supportedChainIds: SUPPORTED_CHAIN_IDS })\r\n\r\n\r\nexport const walletconnect = new WalletConnectConnector({\r\n  rpc: { ...RPC_URLS },\r\n  bridge: 'https://bridge.walletconnect.org',\r\n  qrcode: true,\r\n  pollingInterval: POLLING_INTERVAL\r\n})\r\n//\r\n// export const walletlink = new WalletLinkConnector({\r\n//   url: RPC_URLS[1],\r\n//   appName: 'web3-react example'\r\n// })\r\n//\r\nexport const ledger = new LedgerConnector({ chainId: CORE_CHAIN_ID, url: CORE_RPC, pollingInterval: POLLING_INTERVAL })\r\n\r\nexport const trezor = new TrezorConnector({\r\n  chainId: CORE_CHAIN_ID,\r\n  url: CORE_RPC,\r\n  pollingInterval: POLLING_INTERVAL,\r\n  manifestEmail: 'support@epns.io',\r\n  manifestAppUrl: 'https://staging-app.epns.io'\r\n})\r\n\r\n//\r\n// export const frame = new FrameConnector({ supportedChainIds: [1] })\r\n//\r\n// export const authereum = new AuthereumConnector({ chainId: 42 })\r\n//\r\n// export const fortmatic = new FortmaticConnector({ apiKey: process.env.FORTMATIC_API_KEY as string, chainId: 4 })\r\n\r\nexport const portis = new PortisConnector({ dAppId: 'cfefa032-9afd-4833-bfb4-2b0cb7ec3413' as string, networks: [CORE_CHAIN_ID] })\r\n\r\n// export const squarelink = new SquarelinkConnector({\r\n//   clientId: process.env.SQUARELINK_CLIENT_ID as string,\r\n//   networks: [1, 100]\r\n// })\r\n\r\n// export const torus = new TorusConnector({ chainId: 1 })\r\n","import { useState, useEffect } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\n\r\nimport { injected } from './connectors'\r\n\r\nrequire('dotenv').config();\r\n\r\nexport function useEagerConnect() {\r\n  const { activate, active } = useWeb3React()\r\n\r\n  const [tried, setTried] = useState(false)\r\n\r\n  useEffect(() => {\r\n    injected.isAuthorized().then((isAuthorized: boolean) => {\r\n      if (isAuthorized) {\r\n        activate(injected, undefined, true).catch(() => {\r\n          setTried(true)\r\n        })\r\n      } else {\r\n        setTried(true)\r\n      }\r\n    })\r\n  }, []) // intentionally only running on mount (make sure it's only mounted once :))\r\n\r\n  // if the connection worked, wait until we get confirmation of that to flip the flag\r\n  useEffect(() => {\r\n    if (!tried && active) {\r\n      setTried(true)\r\n    }\r\n  }, [tried, active])\r\n\r\n  return tried\r\n}\r\n\r\nexport function useInactiveListener(suppress: boolean = false) {\r\n  const { active, error, activate } = useWeb3React()\r\n\r\n  useEffect((): any => {\r\n    const { ethereum } = window as any\r\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\r\n      const handleConnect = () => {\r\n        console.log(\"Handling 'connect' event\")\r\n        activate(injected)\r\n      }\r\n      const handleChainChanged = (chainId: string | number) => {\r\n        console.log(\"Handling 'chainChanged' event with payload\", chainId)\r\n        activate(injected)\r\n      }\r\n      const handleAccountsChanged = (accounts: string[]) => {\r\n        console.log(\"Handling 'accountsChanged' event with payload\", accounts)\r\n        if (accounts.length > 0) {\r\n          activate(injected)\r\n        }\r\n      }\r\n      const handleNetworkChanged = (networkId: string | number) => {\r\n        console.log(\"Handling 'networkChanged' event with payload\", networkId)\r\n        activate(injected)\r\n      }\r\n\r\n      ethereum.on('connect', handleConnect)\r\n      ethereum.on('chainChanged', handleChainChanged)\r\n      ethereum.on('accountsChanged', handleAccountsChanged)\r\n      ethereum.on('networkChanged', handleNetworkChanged)\r\n\r\n      return () => {\r\n        if (ethereum.removeListener) {\r\n          ethereum.removeListener('connect', handleConnect)\r\n          ethereum.removeListener('chainChanged', handleChainChanged)\r\n          ethereum.removeListener('accountsChanged', handleAccountsChanged)\r\n          ethereum.removeListener('networkChanged', handleNetworkChanged)\r\n        }\r\n      }\r\n    }\r\n  }, [active, error, suppress, activate])\r\n}\r\n","// Usage:\r\n//   create component file (e.g. BlockiesIdenticon.js) using uncommented code below\r\n//   npm install blockies-identicon\r\n//   in the file you want to use the component (e.g. BlockiesIdenticon.js):\r\n//   import Blockies from \"blockies/react-component\";\r\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\r\n\r\nimport React from 'react';\r\nimport blockies from \"./blockies\";\r\n\r\nexport default class BlockiesIdenticon extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  getOpts () {\r\n    return {\r\n      seed: this.props.opts.seed || \"foo\",\r\n      color: this.props.opts.color || \"#dfe\",\r\n      bgcolor: this.props.opts.bgcolor || \"#a71\",\r\n      size: this.props.opts.size || 15,\r\n      scale: this.props.opts.scale || 3,\r\n      spotcolor: this.props.opts.spotcolor || \"#000\"\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.draw();\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    // Check for prop change\r\n    if (this.props.seed !== prevProps.seed) {\r\n      this.draw();\r\n    }\r\n  }\r\n  draw() {\r\n    blockies.render({\r\n      seed: this.props.opts.seed,\r\n      size: this.props.opts.size,\r\n      scale: this.props.opts.scale\r\n    }, this.canvas);\r\n  }\r\n  render() {\r\n    return React.createElement(\"canvas\", {ref: canvas => this.canvas = canvas});\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\r\n\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport Loader from 'react-loader-spinner'\r\nimport Blockies from \"components/BlockiesIdenticon\";\r\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\r\n\r\n// Create Header\r\nfunction Profile() {\r\n  const { active, error, account, library, chainId } = useWeb3React();\r\n\r\n  const [address, setAddress] = React.useState('');\r\n  const [ens, setENS] = React.useState('');\r\n  const [ensFetched, setENSFetched] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (account && account != '') {\r\n      // Check if the address is the same\r\n      if (address !== account) {\r\n        setENS('');\r\n        setENSFetched(false);\r\n\r\n        // get ens\r\n        library\r\n          .lookupAddress(account).then(function(name) {\r\n            setENS(name);\r\n            setENSFetched(true);\r\n            setAddress(account);\r\n          })\r\n          .catch(() => {\r\n            setENSFetched(true);\r\n            setAddress(account);\r\n          })\r\n      }\r\n\r\n    }\r\n  }, [account]);\r\n\r\n  // to create blockies\r\n\r\n  return (\r\n    <>\r\n    {account && account !== '' && !error &&\r\n      <Container>\r\n        <Blocky>\r\n          <BlockyInner>\r\n             <Blockies seed={account.toLowerCase()} opts={{seed: account.toLowerCase(), size: 7, scale: 7}}/>\r\n          </BlockyInner>\r\n        </Blocky>\r\n        <Wallet>\r\n        {!ensFetched &&\r\n          <Loader\r\n      \t     type=\"Oval\"\r\n      \t     color=\"#FFF\"\r\n      \t     height={16}\r\n      \t     width={16}\r\n      \t  />\r\n        }\r\n        {ensFetched && ens &&\r\n          <>{ens}</>\r\n        }\r\n        {ensFetched && !ens &&\r\n          <>{account.substring(0, 6)}.....{account.substring(account.length - 6)}</>\r\n        }\r\n        </Wallet>\r\n      </Container>\r\n    }\r\n    </>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.button`\r\n  margin: 0;\r\n  padding: 0;\r\n  background: none;\r\n  border: 0;\r\n  outline: 0;\r\n  justify-content: flex-start;\r\n  flex: 1,\r\n  flex-direction: row;\r\n  align-items: center;\r\n  display: flex;\r\n`\r\n\r\nconst Blocky = styled.div`\r\n  position: relative;\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 100%;\r\n  overflow: hidden;\r\n  transform: scale(0.85);\r\n  outline-width: 2px;\r\n  outline-color: rgba(225,225,225,1);\r\n`\r\n\r\nconst BlockyInner = styled.div`\r\n`\r\n\r\nconst Wallet = styled.span`\r\n  margin: 0px 10px;\r\n  padding: 8px 15px;\r\n  height: 16px;\r\n  display: flex;\r\n  align-items: baseline;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  border-radius: 15px;\r\n  background: rgb(226,8,128);\r\n  background: linear-gradient(107deg, rgba(226,8,128,1) 30%, rgba(103,76,159,1) 70%, rgba(53,197,243,1) 100%);\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\n\r\n// Export Default\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport styled, { css, keyframes } from 'styled-components';\r\nimport { AnimateOnChange } from 'react-animation';\r\n\r\n// Create Header\r\nfunction Bell({ badgeCount, bellPressedCB, width, height }) {\r\n  const [badge, setBadge] = React.useState(0);\r\n  const [ring, setRing] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    // Set new badge count and ring the bell\r\n    setBadge(badgeCount);\r\n\r\n    if (badge > 0) {\r\n      setResetRinger();\r\n    }\r\n  }, [badgeCount]);\r\n\r\n  const setResetRinger = () => {\r\n    setRing(true);\r\n\r\n    setTimeout(() => {\r\n        setRing(false)\r\n    }, 500);\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      onClick={() => {\r\n        if (bellPressedCB) {bellPressedCB();}\r\n      }}\r\n      width={width}\r\n      height={height}\r\n    >\r\n      <BellImage ring={ring} src=\"./bell.png\" className=\"tadaaa\" ringme={ring} width={width} height={height} />\r\n      <BellImageAbs src=\"./bellball.png\" width={width} height={height} />\r\n      <BellImageAbs src=\"./ring.png\" width={width} height={height} />\r\n      {badge != 0 &&\r\n        <AnimateOnChange\r\n          animationIn=\"fadeIn\"\r\n          animationOut=\"fadeOut\"\r\n          durationOut={200}\r\n        >\r\n          <Badge>{badge}</Badge>\r\n        </AnimateOnChange>\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  background: transparent;\r\n  border: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0 10px;\r\n  position: relative;\r\n  height: ${props => props.height || 40}px;\r\n  width: ${props => props.width || 40}px;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\n\r\nconst tadaaa = keyframes`\r\n  0% {\r\n    -webkit-transform: scale3d(1, 1, 1);\r\n    -ms-transform: scale3d(1, 1, 1);\r\n    transform: scale3d(1, 1, 1);\r\n  }\r\n\r\n  10%, 20% {\r\n    -webkit-transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\r\n    -ms-transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\r\n    transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\r\n  }\r\n\r\n  30%, 50%, 70%, 90% {\r\n    -webkit-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\r\n    -ms-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\r\n    transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\r\n  }\r\n\r\n  40%, 60%, 80% {\r\n    -webkit-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\r\n    -ms-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\r\n    transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\r\n  }\r\n\r\n  100% {\r\n    -webkit-transform: scale3d(1, 1, 1);\r\n    -ms-transform: scale3d(1, 1, 1);\r\n    transform: scale3d(1, 1, 1);\r\n  }\r\n`;\r\n\r\nconst BellImage = styled.img`\r\n  position: absolute;\r\n  height: ${props => props.height || 40}px;\r\n  width: ${props => props.width || 40}px;\r\n\r\n  transition: transform .2s ease-out;\r\n  ${ props => props.ringme && css`\r\n    animation: ${tadaaa} 1s ease-out;\r\n  `};\r\n\r\n\r\n`\r\n\r\nconst BellImageAbs = styled(BellImage)`\r\n  left: 0,\r\n`\r\n\r\nconst Badge = styled.span`\r\n  position: absolute;\r\n  font-size: 10px;\r\n  color: #fff;\r\n  padding: 2px 4px;\r\n  border-radius: 100%;\r\n  background: rgba(208.0, 44.0, 30.0, 1.0);\r\n  top: 0px;\r\n  left: 5px;\r\n  font-weight: bold;\r\n`\r\n\r\n// Export Default\r\nexport default Bell;\r\n","export default {\r\n    LINKS: {\r\n      IOS_APP: 'https://apps.apple.com/app/ethereum-push-service-epns/id1528614910',\r\n      ANDROID_APP: 'https://play.google.com/store/apps/details?id=io.epns.epns&hl=mr&gl=US'\r\n    },\r\n  \r\n    // For Async Storage --> Represents Key and some Constants\r\n    STORAGE: {\r\n  \r\n    },\r\n  \r\n    CONSTANTS: {\r\n      HEADER_HEIGHT: 70,\r\n      LEFT_BAR_WIDTH: 260,\r\n\r\n      NAVBAR_SECTIONS: {\r\n        PRIMARY: 1,\r\n        SECONDARY: 2,\r\n        FULL: 3\r\n      },\r\n\r\n      NAVBAR_IDENTIFIERS: {\r\n        CREATE_CHANNEL: 1,\r\n      }\r\n    },\r\n  \r\n    ADJUSTMENTS: {\r\n    },\r\n  \r\n    COLORS: {\r\n      PRIMARY: 'rgba(27.0, 150.0, 227.0, 1.0)',\r\n  \r\n      LINKS: 'rgba(20.0, 126.0, 251.0, 1.0)',\r\n  \r\n      GRADIENT_PRIMARY: 'rgba(226.0, 8.0, 128.0, 1.0)',\r\n      GRADIENT_SECONDARY: 'rgba(53.0, 197.0, 243.0, 1.0)',\r\n      GRADIENT_THIRD: 'rgba(103.0, 76.0, 159.0, 1.0)',\r\n  \r\n      TRANSPARENT: 'transparent',\r\n  \r\n      WHITE: 'rgba(255.0, 255.0, 255.0, 1.0)',\r\n      DARK_WHITE: 'rgba(255.0, 255.0, 255.0, 0.75)',\r\n      MID_WHITE: 'rgba(255.0, 255.0, 255.0, 0.5)',\r\n      LIGHT_WHITE: 'rgba(255.0, 255.0, 255.0, 0.25)',\r\n  \r\n      SLIGHTER_GRAY: 'rgba(250.0, 250.0, 250.0, 1)',\r\n      SLIGHT_GRAY: 'rgba(231.0, 231.0, 231.0, 1)',\r\n      LIGHT_GRAY: 'rgba(225.0, 225.0, 225.0, 1)',\r\n      MID_GRAY: 'rgba(200.0, 200.0, 200.0, 1)',\r\n      DARK_GRAY: 'rgba(160.0, 160.0, 160.0, 1)',\r\n      DARKER_GRAY: 'rgba(100.0, 100.0, 100.0, 1)',\r\n  \r\n      LIGHT_BLACK_TRANS: 'rgba(0.0, 0.0, 0.0, 0.1)',\r\n      SEMI_MID_BLACK_TRANS: 'rgba(0.0, 0.0, 0.0, 0.25)',\r\n      MID_BLACK_TRANS: 'rgba(0.0, 0.0, 0.0, 0.5)',\r\n      DARK_BLACK_TRANS: 'rgba(0.0, 0.0, 0.0, 0.75)',\r\n      BLACK: 'rgba(0.0, 0.0, 0.0, 1.0)',\r\n  \r\n      CONFIRM_GREEN: 'rgba(50.0, 205.0, 50.0, 1.0)',\r\n  \r\n      CONFIRM: 'rgba(34.0, 139.0, 34.0, 1.0)',\r\n      WARNING: 'rgba(255.0, 153.0, 0.0, 1.0)',\r\n  \r\n      SUBLIME_RED: 'rgba(237.0, 59.0, 72.0, 1.0)',\r\n      BADGE_RED: 'rgba(208.0, 44.0, 30.0, 1.0)',\r\n      LIGHT_MAROON: 'rgba(159.0, 0.0, 0.0, 1.0)',\r\n      LIGHTER_MAROON: 'rgba(129.0, 0.0, 0.0, 1.0)',\r\n    },\r\n  };\r\n  ","import React from \"react\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\n\r\nimport { BiChevronDown, BiChevronUp } from 'react-icons/bi';\r\n\r\nimport styled, { useTheme, css } from \"styled-components\";\r\nimport {Section, Item, ItemH, Span, Anchor, RouterLink, Image} from 'components/SharedStyling';\r\n\r\nimport { themeDark } from \"config/Themization\";\r\nimport GLOBALS from \"config/Globals\";\r\n\r\n// Create Header\r\nfunction NavigationButton({ item, data, sectionID, active }) {\r\n  const theme = useTheme();\r\n\r\n  let SelectedIcon;\r\n  let RouteLogic;\r\n\r\n  switch(sectionID) {\r\n    case GLOBALS.CONSTANTS.NAVBAR_SECTIONS.SECONDARY:\r\n      SelectedIcon = item.isSection ? LeftBarSecondarySectionIcon : LeftBarSecondaryItemIcon;\r\n      break;\r\n    default:\r\n      SelectedIcon = item.isSection ? LeftBarPrimarySectionIcon : LeftBarPrimaryItemIcon;\r\n  }\r\n\r\n  if (data.isRoute) {\r\n    RouteLogic = RouterLink;\r\n  }\r\n  else {\r\n    RouteLogic = Anchor;\r\n  }\r\n\r\n  return (\r\n    <RouteLogic\r\n      flex=\"1\"\r\n      title={`${data.title}`}\r\n      to={`${data.href ? data.href : '#'}`}\r\n      href={`${data.href ? data.href : '#'}`}\r\n      alt={`${data.alt}`}\r\n      target={data.isRoute ? null : data.newTab ? \"_blank\" : \"self\"}\r\n      disabled={data.disabled}\r\n      hoverBG={theme.leftBarHoverColor}\r\n      radius=\"12px\"\r\n      align=\"stretch\"\r\n      padding=\"10px\"\r\n      margin={item.isSection ? \"0px\" : \"5px\"}\r\n      active={active}\r\n    >\r\n      <ItemH\r\n          align=\"center\"\r\n      >\r\n          <SelectedIcon\r\n            src={`./${data.src}`}\r\n            margin=\"0 5px\"\r\n            alt={`${data.alt}`}\r\n            active={active}\r\n          />\r\n          \r\n          <Span \r\n            flex=\"1\" \r\n            weight=\"400\"\r\n            spacing=\"0\"\r\n            margin=\"0 5px\"\r\n            color={theme.leftBarFontColor}\r\n          >\r\n            {data.name}\r\n          </Span>\r\n          \r\n          {item.hasItems && !item.opened &&\r\n            <BiChevronDown\r\n              color={theme.leftBarFontColor}\r\n            />\r\n          }\r\n\r\n          {item.hasItems && item.opened &&\r\n            <BiChevronUp\r\n              color={theme.leftBarFontColor}\r\n            />\r\n          }\r\n      </ItemH>\r\n    </RouteLogic>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst InheritedSectionGroupIcon = styled(Image)`\r\n  height: 32px;\r\n  width: 32px;\r\n  margin: 0 5px;\r\n\r\n  filter: ${(props) => props.active ? \"brightness(1)\" : props.theme === themeDark ? \"brightness(0) invert(1)\" : \"brightness(0)\"};\r\n  opacity: ${(props) => props.active ? \"1\" : props.theme === themeDark ? \"0.5\" : \"0.25\"};\r\n\r\n  transition: transform .1s ease-out;\r\n  ${ props => props.active && css`\r\n    transform: scale(1.1) translate(0px, 0px);\r\n  `};\r\n`\r\n\r\nconst InheritedSectionItemIcon = styled(Image)`\r\n  height: 16px;\r\n  width: 16px;\r\n  margin: 0 5px;\r\n\r\n  filter: ${(props) => props.active ? \"brightness(1)\" : props.theme === themeDark ? \"brightness(0) invert(1)\" : \"brightness(0)\"};\r\n  opacity: ${(props) => props.active ? \"1\" : props.theme === themeDark ? \"0.5\" : \"0.25\"};\r\n\r\n  transition: transform .1s ease-out;\r\n  ${ props => props.active && css`\r\n    transform: scale(1.25) translate(0px, 0px);\r\n  `};\r\n\r\n`\r\n\r\nconst LeftBarPrimarySectionIcon = styled(InheritedSectionGroupIcon)`\r\n\r\n`\r\n\r\nconst LeftBarPrimaryItemIcon = styled(InheritedSectionItemIcon)`\r\n\r\n`\r\n\r\n\r\nconst LeftBarSecondarySectionIcon = styled(InheritedSectionGroupIcon)`\r\n  height: 16px;\r\n  width: 16px;\r\n`\r\n\r\nconst LeftBarSecondaryItemIcon = styled(InheritedSectionItemIcon)`\r\n\r\n`\r\n\r\n// Export Default\r\nexport default NavigationButton;\r\n","import React, { createContext, useState } from 'react'\r\n\r\nexport const NavigationContext = createContext({});\r\n\r\nconst NavigationContextProvider = (props) => {\r\n  const [navigationSetup, setNavigationSetup] = useState(null);\r\n  \r\n  return (\r\n    <NavigationContext.Provider value={{ navigationSetup, setNavigationSetup }}>\r\n      {props.children}\r\n    </NavigationContext.Provider>\r\n  )\r\n}\r\n\r\nexport default NavigationContextProvider;","import React, { useContext } from \"react\";\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\r\nimport {\r\n  NoEthereumProviderError,\r\n  UserRejectedRequestError as UserRejectedRequestErrorInjected\r\n} from '@web3-react/injected-connector'\r\nimport { Web3Provider } from 'ethers/providers'\r\n\r\nimport { DarkModeSwitch } from 'react-toggle-dark-mode';\r\n\r\nimport { AiOutlineMenu, AiOutlineClose } from 'react-icons/ai';\r\n\r\nimport styled, { css, useTheme } from \"styled-components\";\r\nimport {Section, Item, ItemH, Button, Span} from 'components/SharedStyling';\r\n\r\nimport Profile from 'components/Profile';\r\nimport Bell from 'components/Bell';\r\nimport NavigationButton from 'components/NavigationButton';\r\n\r\nimport { NavigationContext } from \"contexts/NavigationContext\";\r\n\r\nimport GLOBALS from \"config/Globals\";\r\n\r\n// Create Header\r\nfunction Header({ isDarkMode, darkModeToggle }) {\r\n  // Get theme\r\n  const theme = useTheme();\r\n\r\n  // Get Web3 Context\r\n  const context = useWeb3React<Web3Provider>()\r\n\r\n  const { navigationSetup } = useContext(NavigationContext)\r\n\r\n  const { active, error } = useWeb3React();\r\n  const { deactivate } = context\r\n\r\n  const [showLoginControls, setShowLoginControls] = React.useState(false);\r\n\r\n  // Handle Nav Bar\r\n  const [showNavBar, setShowNavBar] = React.useState(false);\r\n\r\n  // Handle Header Tag\r\n  const [ headerTag, setHeaderTag ] = React.useState(null);\r\n\r\n  // Get Location\r\n  const location = useLocation();\r\n\r\n  React.useEffect(() => {\r\n    // runs when navigation setup is updated, will run on init\r\n    updateHeaderTag(location)\r\n  }, [navigationSetup])\r\n\r\n  // Change text based on change of location\r\n  React.useEffect(() => {\r\n    // runs on location, i.e. route, change\r\n    updateHeaderTag(location)\r\n  }, [location])\r\n\r\n  // handle header tag update\r\n  const updateHeaderTag = (location) => {\r\n    if (navigationSetup) {\r\n      Object.entries(navigationSetup.navigation).forEach(([key, value]) => {\r\n        const item = navigationSetup.navigation[key];\r\n        if (location.pathname === item.data.href) {\r\n          setHeaderTag(item.data.headerTag);\r\n        }\r\n      })\r\n    }\r\n    console.log(navigationSetup)\r\n  }\r\n\r\n\r\n  // handle error functions\r\n  function getErrorMessage(error: Error) {\r\n    if (error instanceof NoEthereumProviderError) {\r\n      return 'Web3 not enabled, install MetaMask on desktop or visit from a dApp browser on mobile'\r\n    } else if (error instanceof UnsupportedChainIdError) {\r\n      return \"Unsupported Network, please connect to the Ethereum Kovan network\"\r\n    } else if (\r\n      error instanceof UserRejectedRequestErrorInjected\r\n    ) {\r\n      return 'Please authorize this website to access the dApp'\r\n    } else {\r\n      console.error(error)\r\n      return 'An unknown error occurred. Check the console for more details'\r\n    }\r\n  }\r\n\r\n  const bellPressed = () => {\r\n    setShowLoginControls(!showLoginControls);\r\n  }\r\n\r\n  const disconnect = () => {\r\n    setShowLoginControls(false);\r\n    deactivate();\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      direction=\"row\"\r\n      padding=\"0px 15px\"\r\n    >\r\n      \r\n      <ItemH\r\n        justify=\"flex-start\"\r\n        flex=\"0\"\r\n      >\r\n        <RightBarContainer\r\n          justify=\"flex-start\"\r\n          flex=\"0\"\r\n        >\r\n          <RightBarDesktop\r\n            justify=\"flex-start\"\r\n            flex=\"0\"\r\n          >\r\n            {active && !error &&\r\n              <Profile />\r\n            }\r\n            {!active &&\r\n              <Logo src=\"epns.png\" />\r\n            }\r\n          </RightBarDesktop>\r\n          \r\n          {active && !error &&\r\n            <RightBarMobile>\r\n              <Button\r\n                bg=\"transparent\"\r\n                padding=\"5px\"\r\n                radius=\"4px\"\r\n                onClick={() => {setShowNavBar(!showNavBar)}}\r\n              >\r\n                <AiOutlineMenu size={30} color={theme.headerIconsBg}/>\r\n              </Button>\r\n            </RightBarMobile>\r\n          }\r\n        </RightBarContainer>\r\n        \r\n        {navigationSetup && showNavBar && active && !error &&\r\n          <NavMenuContainer\r\n            align=\"flex-start\"\r\n          >\r\n            <NavMenu\r\n            >\r\n              <Profile />\r\n              \r\n              {Object.keys(navigationSetup.navigation).map(function(key) {\r\n                return (\r\n                  <Item\r\n                    onClick={() => {setShowNavBar(!showNavBar)}}\r\n                  >\r\n                    <NavigationButton\r\n                      item={navigationSetup.navigation[key]}\r\n                      data={navigationSetup.navigation[key].data}\r\n                      sectionID={GLOBALS.CONSTANTS.NAVBAR_SECTIONS.SECONDARY}\r\n                      active={navigationSetup.navigation[key].active}\r\n                    />\r\n                  </Item>\r\n                );\r\n              })}\r\n            </NavMenu>\r\n\r\n            <Item\r\n              position=\"absolute\"\r\n              top=\"15px\"\r\n              right=\"5px\"\r\n            >\r\n              <Button\r\n                bg=\"transparent\"\r\n                padding=\"5px\"\r\n                radius=\"4px\"\r\n                onClick={() => {setShowNavBar(!showNavBar)}}\r\n              >\r\n                <AiOutlineClose size={30} color={theme.headerIconsBg}/>\r\n              </Button>\r\n            </Item>\r\n\r\n          </NavMenuContainer>\r\n        }\r\n      </ItemH>\r\n\r\n      <ItemH\r\n        justify=\"flex-end\"\r\n      >\r\n        {headerTag && active && !error &&\r\n          <HeaderTag\r\n            align=\"flex-start\"\r\n            overflow=\"hidden\"\r\n            margin=\"0px 5px\"\r\n          >\r\n            <Span\r\n              textTransform=\"uppercase\"\r\n              spacing=\"0.1em\"\r\n              weight=\"normal\"\r\n              padding=\"8px 15px\"\r\n              bg={!isDarkMode ? headerTag.light.bg : headerTag.dark.bg}\r\n              color={!isDarkMode ? headerTag.light.fg : headerTag.dark.fg}\r\n            >\r\n              {headerTag.title}\r\n            </Span>\r\n          </HeaderTag>\r\n        }\r\n        \r\n        {active && !error &&\r\n          <Bell\r\n            badgeCount={0}\r\n            bellPressedCB={bellPressed}\r\n            width={32}\r\n            height={32}\r\n          />\r\n        }\r\n      \r\n        <DarkMode\r\n          flex=\"initial\"\r\n          justify=\"flex-end\"\r\n          padding=\"16px\"\r\n          margin={active && !error ? \"0px 10px 0px 0px\" : \"0px\"}\r\n          position=\"relative\"\r\n          border-radius=\"100%\"\r\n        >\r\n          <Item\r\n            position=\"absolute\"\r\n            top=\"4px\"\r\n          >\r\n            <DarkModeSwitch\r\n              style={{ marginBottom: '2rem' }}\r\n              checked={isDarkMode}\r\n              onChange={darkModeToggle}\r\n              size={24}\r\n              sunColor=\"#ddd\"\r\n            />\r\n          </Item>\r\n        </DarkMode>\r\n\r\n        {showLoginControls &&\r\n          <Item\r\n            position=\"absolute\"\r\n          >\r\n            <Button\r\n              bg=\"#000\"\r\n              size=\"12px\"\r\n              spacing=\"0.2em\"\r\n              textTransform=\"uppercase\"\r\n              weight=\"600\"\r\n              radius=\"20px\"\r\n              onClick={disconnect}\r\n            >\r\n              Disconnect\r\n            </Button>\r\n          </Item>\r\n        }\r\n\r\n        <ItemH\r\n          justify=\"flex-end\"\r\n          flex=\"initial\"\r\n        >\r\n          {!!error &&\r\n            <PrimaryTheme>{getErrorMessage(error)}</PrimaryTheme>\r\n          }\r\n          {!active && !error &&\r\n            <ThirdTheme>Please connect to a Web3 Network</ThirdTheme>\r\n          }\r\n          <Connection phase={active ? 'active' : error ? 'error' : 'waiting'} />\r\n        </ItemH>\r\n      </ItemH>\r\n    </Container>\r\n  );\r\n}\r\n\r\n// CSS Styles\r\nconst Container = styled(Section)`\r\n  background: ${props => props.theme.headerBg};\r\n  border-bottom: 1px solid ${props => props.theme.sectionBorderBg};\r\n  height: ${GLOBALS.CONSTANTS.HEADER_HEIGHT}px;\r\n`\r\n\r\nconst Logo = styled.img`\r\n  height: 40px;\r\n`\r\n\r\nconst RightBarContainer = styled(ItemH)`\r\n\r\n`\r\n\r\nconst RightBarDesktop = styled(ItemH)`\r\n  @media (max-width: 992px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst RightBarMobile = styled(ItemH)`\r\n  margin: 5px 5px 5px -5px;\r\n  \r\n  @media (min-width: 993px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst NavMenuContainer = styled(Item)`\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: flex-start;\r\n  z-index: 1;\r\n  align-items: flex-start;\r\n\r\n  background: ${props => props.theme.navMenuBg};\r\n  backdrop-filter: blur(30px);\r\n  z-index: 11;\r\n`\r\n\r\nconst NavMenu = styled(Item)`\r\n  align-items: stretch;\r\n  justify-content: flex-start;\r\n  padding: 10px 10px;\r\n`\r\n\r\nconst Notice = styled.span`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n`\r\n\r\nconst PrimaryTheme = styled(Notice)`\r\n  background: #e20880;\r\n`\r\n\r\nconst ThirdTheme = styled(Notice)`\r\n  background: #674c9f;\r\n`\r\n\r\nconst Connection = styled.span`\r\n  height: 10px;\r\n  width: 10px;\r\n  border-radius: 100%;\r\n  flex-shrink: 0;\r\n\r\n  ${props => props.phase === 'active' && css`\r\n    background: #77DD77;\r\n  `};\r\n\r\n  ${props => props.phase === 'waiting' && css`\r\n    background: #FFAE42;\r\n  `};\r\n\r\n  ${props => props.phase === 'error' && css`\r\n    background: #DC143C;\r\n  `};\r\n`\r\n\r\nconst HeaderTag = styled(Item)`\r\n  flex: 1;\r\n  margin=\"5px 15px 5px 15px\"\r\n\r\n  @media (min-width: 993px) {\r\n    margin: \"5px 10px\";\r\n  }\r\n`\r\n\r\nconst DarkMode = styled(Item)`\r\n  @media (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\n// Export Default\r\nexport default Header;\r\n","import { themeLight, themeDark } from \"config/Themization\";\r\nimport GLOBALS from \"config/Globals\";\r\n\r\nconst NavigationList = {\r\n    primary: {\r\n      communicate: {\r\n        src: \"svg/communicate.svg\",\r\n        iconFactory: null,\r\n        name: 'Communicate',\r\n        title: 'Communicate Tab',\r\n        alt: 'Communicate Tab Icon',\r\n        href: null,\r\n        newTab: false,\r\n        isRoute: true,\r\n        hasMenuLogic: true,\r\n        opened: true,\r\n  \r\n        drilldown: {\r\n          inbox: {\r\n            src: \"svg/feedbox.svg\",\r\n            iconFactory: null,\r\n            name: 'Inbox',\r\n            title: 'Inbox',\r\n            alt: 'Open Inbox',\r\n            href: '/inbox',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: 'Inbox',\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_PRIMARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },\r\n          spam: {\r\n            src: \"svg/spam.svg\",\r\n            iconFactory: null,\r\n            name: 'Spam',\r\n            title: 'Spam',\r\n            alt: 'Open Spam',\r\n            href: '/spam',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: 'Spam',\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_PRIMARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },  \r\n          channels: {\r\n            src: \"svg/channel.svg\",\r\n            iconFactory: null,\r\n            name: 'Channels',\r\n            title: 'Browse Channels',\r\n            alt: 'Open Channels',\r\n            href: '/channels',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: 'View Channels',\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_SECONDARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },\r\n          createChannel: {\r\n            uid: GLOBALS.CONSTANTS.NAVBAR_IDENTIFIERS.CREATE_CHANNEL,\r\n            src: \"svg/channeladmin.svg\",\r\n            iconFactory: null,\r\n            name: 'Create Channel',\r\n            title: 'Create Channel',\r\n            alt: 'Create Channels / Dashboard',\r\n            href: '/dashboard',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: 'Channel Dashboard',\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_SECONDARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },\r\n          receiveNotifs: {\r\n            src: \"svg/share.svg\",\r\n            iconFactory: null,\r\n            name: 'Receive Notifs',\r\n            title: 'Receive Notifs',\r\n            alt: 'Receive Notifs',\r\n            href: '/receive',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: 'Receive Notifications',\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_THIRD,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },\r\n        }\r\n      },\r\n      govern: {\r\n        src: \"svg/govern.svg\",\r\n        iconFactory: null,\r\n        name: 'Govern',\r\n        title: 'Governance Tab',\r\n        alt: 'Governance Tab Icon', \r\n        href: '/govern',\r\n        newTab: false,\r\n        opened: false,\r\n        isRoute: true,\r\n        hasMenuLogic: true,\r\n        headerTag: {\r\n          title: \"Let's Govern\",\r\n          light: {\r\n            bg: GLOBALS.COLORS.GRADIENT_SECONDARY,\r\n            fg: themeLight.headerTagFg,\r\n          },\r\n          dark: {\r\n            bg: themeDark.headerTagBg,\r\n            fg: themeDark.headerTagFg,\r\n          }\r\n        }\r\n      },\r\n      incentives: {\r\n        src: \"svg/incentive.svg\",\r\n        iconFactory: null,\r\n        name: 'Incentives',\r\n        title: 'Check Incentives Tab',\r\n        alt: 'Incentives Tab Icon',\r\n        href: null,\r\n        newTab: false,\r\n        opened: false,\r\n        isRoute: true,\r\n        hasMenuLogic: true,\r\n  \r\n        drilldown: {\r\n          yield: {\r\n            src: \"svg/yield.svg\",\r\n            iconFactory: null,\r\n            name: 'Yield Farming',\r\n            title: 'Yield Farming',\r\n            alt: 'Open Yield Farming',\r\n            href: '/yield',\r\n            newTab: false,\r\n            isRoute: true,  \r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: \"Yield Farming\",\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_PRIMARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },\r\n          rockstars: {\r\n            src: \"svg/rockstars.svg\",\r\n            iconFactory: null,\r\n            name: 'Rockstars of EPNS',\r\n            title: 'Check Rockstars of EPNS',\r\n            alt: 'Open Inbox',\r\n            href: '/rockstar',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: \"Rockstars NFTs\",\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_SECONDARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },\r\n          airdrop: {\r\n            src: \"svg/gratitude.svg\",\r\n            iconFactory: null,\r\n            name: 'Gratitude Drop',\r\n            title: 'Check Gratitude Drop',\r\n            alt: 'Open Gratitude Drop',\r\n            href: '/gratitude',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: \"Gratitude Drop\",\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_THIRD,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          },      \r\n        }\r\n      },\r\n      walkthrough: {\r\n        src: \"svg/walkthrough.svg\",\r\n        iconFactory: null,\r\n        name: 'Walkthrough',\r\n        title: 'Check Walkthrough Tab',\r\n        alt: 'Walkthrough Tab Icon',\r\n        href: null,\r\n        newTab: false,\r\n        opened: false,\r\n        isRoute: true,\r\n        hasMenuLogic: true,\r\n  \r\n        drilldown: {\r\n          // tutorial: {\r\n          //   src: \"svg/tutorial.svg\",\r\n          //   iconFactory: null,\r\n          //   name: 'Tutorial',\r\n          //   title: 'Tutorial',\r\n          //   alt: 'Open Tutorial',\r\n          //   href: '/tutorial',\r\n          //   newTab: false,\r\n          //   isRoute: true,  \r\n          //   hasMenuLogic: true,\r\n          // },\r\n          faq: {\r\n            src: \"svg/qna.svg\",\r\n            iconFactory: null,\r\n            name: 'FAQs',\r\n            title: 'Checkout Frequently Asked Questions',\r\n            alt: 'Open FAQs',\r\n            href: '/comingsoon',\r\n            newTab: false,\r\n            isRoute: true,\r\n            hasMenuLogic: true,\r\n            headerTag: {\r\n              title: \"FAQ\",\r\n              light: {\r\n                bg: GLOBALS.COLORS.GRADIENT_PRIMARY,\r\n                fg: themeLight.headerTagFg,\r\n              },\r\n              dark: {\r\n                bg: themeDark.headerTagBg,\r\n                fg: themeDark.headerTagFg,\r\n              }\r\n            }\r\n          }, \r\n          \r\n        }\r\n        \r\n      }\r\n    },\r\n    secondary: {\r\n      latest: {\r\n        src: \"svg/news.svg\",\r\n        iconFactory: null,\r\n        name: 'Latest',\r\n        title: 'Checkout latest news',\r\n        alt: \"Open What's Latest\",\r\n        // href: 'https://staging-dapp.epns.io',\r\n        id:\"olvy-target\",\r\n        newTab: false,\r\n        opened: false,\r\n        isRoute: true,\r\n        isMenuLogic: false,\r\n      },\r\n      support: {\r\n        src: \"svg/support.svg\",\r\n        iconFactory: null,\r\n        name: 'Support',\r\n        title: 'Open a support ticket',\r\n        alt: 'Open Support Ticket',\r\n        href: '/support',\r\n        newTab: false,\r\n        opened: false,\r\n        isRoute: true,\r\n        isMenuLogic: false,\r\n      },\r\n    },\r\n  }\r\n  \r\n  export default NavigationList;\r\n  ","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\n\r\nimport Loader from 'react-loader-spinner';\r\nimport { FaGithub, FaTelegramPlane, FaMedium, FaDiscord, FaTwitter } from 'react-icons/fa';\r\n\r\nimport styled, { useTheme, css } from \"styled-components\";\r\nimport {Section, Item, ItemH, Span, Anchor, RouterLink, Image} from 'components/SharedStyling';\r\n\r\nimport NavigationButton from 'components/NavigationButton';\r\nimport NavigationList from \"config/NavigationList\";\r\n\r\nimport { NavigationContext } from \"contexts/NavigationContext\";\r\n\r\nimport GLOBALS from \"config/Globals\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\n// Create Header\r\nfunction Navigation() {\r\n    const { channelDetails } = useSelector((state: any) => state.admin);\r\n    console.log(channelDetails);\r\n    const [loading, setLoading] = useState(false);\r\n    const [ refresh, setRefresh ] = useState(false);\r\n\r\n    const { navigationSetup, setNavigationSetup } = useContext(NavigationContext)\r\n    if(navigationSetup !== null && channelDetails!==null){\r\n      navigationSetup.primary[0].data.drilldown[3].data.name = channelDetails.name;\r\n    }\r\n    const theme = useTheme();\r\n    const location = useLocation();\r\n\r\n    // Similar to componentDidMount and componentDidUpdate:\r\n\r\n  \r\n    useEffect(() => {\r\n      if (!loading) {\r\n          setLoading(true);\r\n\r\n          // Set Primary List\r\n          const primaryList = returnTransformedList(NavigationList.primary, GLOBALS.CONSTANTS.NAVBAR_SECTIONS.PRIMARY);\r\n  \r\n          // Set Secondary List\r\n          const secondaryList = returnTransformedList(NavigationList.secondary, GLOBALS.CONSTANTS.NAVBAR_SECTIONS.SECONDARY);\r\n\r\n          // Set Nav List\r\n          let count = -1;\r\n          let navList = returnNavList(NavigationList.primary, count);\r\n          navList = Object.assign(navList, returnNavList(NavigationList.secondary, Object.keys(navList).length));\r\n          \r\n          const finalList = {\r\n            primary: primaryList,\r\n            secondary: secondaryList,\r\n            navigation: navList\r\n          };\r\n          \r\n          setNavigationSetup(finalList);\r\n      }\r\n        \r\n    }, []);\r\n    \r\n    const returnTransformedList = (lists, identity) => {\r\n      let transformedList = [];\r\n      let count = -1;\r\n      Object.entries(lists).forEach(([key, value]) => {\r\n        count++;\r\n        let identifier = count.toString();\r\n\r\n        const section = lists[key];\r\n\r\n        transformedList[identifier] = {};\r\n        transformedList[identifier].active = false;\r\n        transformedList[identifier].isSection = true;\r\n        transformedList[identifier].hasMenuLogic = value.hasMenuLogic;\r\n\r\n        transformedList[identifier].id = identity + \"_\" + key;\r\n        transformedList[identifier].parent = null;\r\n        transformedList[identifier].hasItems = false;\r\n        transformedList[identifier].opened = false;\r\n\r\n        if (location.pathname === section.href) {\r\n            transformedList[identifier].active = true;\r\n        }\r\n        transformedList[identifier].data = value;\r\n\r\n        if (section.hasOwnProperty('drilldown')) {\r\n          let drillcount = -1;\r\n          let drilldownModified = {};\r\n\r\n          Object.entries(section.drilldown).forEach(([drillkey, drillvalue]) => {\r\n            drillcount++;\r\n            let drillIdentifier = drillcount.toString();\r\n            const item = section.drilldown[drillkey];\r\n\r\n            drilldownModified[drillIdentifier] = {};\r\n            drilldownModified[drillIdentifier].active = false;\r\n            drilldownModified[drillIdentifier].isSection = false;\r\n            drilldownModified[drillIdentifier].hasMenuLogic = drillvalue.hasMenuLogic;\r\n\r\n            drilldownModified[drillIdentifier].id = drillkey;\r\n            drilldownModified[drillIdentifier].parent = transformedList[identifier].id;\r\n            transformedList[identifier].hasItems = true;\r\n\r\n            // Check and expand it if the pathname matches\r\n            if (location.pathname === item.href) {\r\n                transformedList[identifier].active = true;\r\n                transformedList[identifier].opened = true;\r\n\r\n                drilldownModified[drillIdentifier].active = true;\r\n            }\r\n\r\n            drilldownModified[drillIdentifier].data = drillvalue;\r\n          })\r\n\r\n          transformedList[identifier].data.drilldown = drilldownModified;\r\n        }\r\n      });\r\n\r\n      return transformedList;\r\n    }\r\n\r\n    // Location has changed, reflect it accordingly\r\n    React.useEffect(() => {\r\n      if (navigationSetup) {\r\n        // loop and find the item in question\r\n        Object.entries(navigationSetup).forEach(([key, value]) => {\r\n          if (key === \"primary\" || key === \"secondary\") {\r\n            const topSection = navigationSetup[key];\r\n\r\n            Object.entries(topSection).forEach(([key, value]) => {\r\n              const section = topSection[key];\r\n\r\n              if (section.data.hasOwnProperty('drilldown')) {\r\n                Object.entries(section.data.drilldown).forEach(([drillkey, drillvalue]) => {\r\n                  const item = section.data.drilldown[drillkey];\r\n\r\n                  if (location.pathname === item.data.href) {\r\n                    const transformedList = mutateTransformedList(item);\r\n                    setNavigationSetup(transformedList);\r\n                    setRefresh(!refresh);\r\n                    return;\r\n                  }\r\n                });\r\n              }\r\n              else {\r\n                if (location.pathname === section.data.href) {\r\n                  const transformedList = mutateTransformedList(section);\r\n                  setNavigationSetup(transformedList);\r\n                  setRefresh(!refresh);\r\n                  return;\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }, [location, navigationSetup])\r\n\r\n    const mutateTransformedList = (item, onlyDrilldown) => {\r\n      // Finally transform the json menulist\r\n      let transformedMenuList = navigationSetup; \r\n\r\n      let activeParentId = null;\r\n      let activeDrilldownId = null; \r\n\r\n      // check if this requires menu Logic\r\n      if (item.hasMenuLogic) {\r\n        // check if it's a section\r\n        if (item.isSection) {\r\n          activeParentId = item.id;\r\n        }\r\n        else {\r\n          // item is drilldown, mark both id \r\n          activeDrilldownId = item.id;\r\n          activeParentId = item.parent;\r\n        }\r\n      }\r\n\r\n      if (activeParentId == null && activeDrilldownId == null) {\r\n        // nothing to do, return back\r\n        return transformedMenuList;\r\n      }\r\n\r\n      // Check and take action on Drop down getting toggled or section doesn't have dropdown menu\r\n      let selectedSectionIsActionable = false;\r\n\r\n      if (activeDrilldownId == null) {\r\n        Object.keys(transformedMenuList).forEach(key => {\r\n          if (key === 'primary' || key === 'secondary') {\r\n            Object.keys(transformedMenuList[key]).forEach(sectionkey => {\r\n              const section = transformedMenuList[key][sectionkey];\r\n              \r\n              if (section.id === activeParentId) {\r\n                transformedMenuList[key][sectionkey].opened = !transformedMenuList[key][sectionkey].opened;\r\n\r\n                if (section.hasItems) {\r\n                  selectedSectionIsActionable = true;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n\r\n      if (selectedSectionIsActionable || onlyDrilldown) {\r\n        // section had items but activeDrilldownId not set means dropdown toggle\r\n        return transformedMenuList;\r\n      }\r\n      else {\r\n        // menu item is getting selected\r\n        Object.keys(transformedMenuList).forEach(key => {\r\n          if (key === 'primary' || key === 'secondary') {\r\n            Object.keys(transformedMenuList[key]).forEach(sectionkey => {\r\n              const section = transformedMenuList[key][sectionkey];\r\n\r\n              if (section.id !== activeParentId) {\r\n                if (section.active) {\r\n                  transformedMenuList[key][sectionkey].active = false;\r\n                  \r\n                  if (section.hasItems) {\r\n                    // loop and make all false\r\n                    Object.keys(transformedMenuList[key][sectionkey].data.drilldown).forEach(drillkey => {\r\n                      transformedMenuList[key][sectionkey].data.drilldown[drillkey].active = false;\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              else {\r\n                transformedMenuList[key][sectionkey].active = true;\r\n                \r\n                if (section.hasItems) {\r\n                  // loop and make all false\r\n                  Object.keys(transformedMenuList[key][sectionkey].data.drilldown).forEach(drillkey => {\r\n                    const item = transformedMenuList[key][sectionkey].data.drilldown[drillkey];\r\n\r\n                    if (item.id === activeDrilldownId) {\r\n                      transformedMenuList[key][sectionkey].data.drilldown[drillkey].active = true;\r\n                    }\r\n                    else {\r\n                      transformedMenuList[key][sectionkey].data.drilldown[drillkey].active = false;\r\n                    }\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n\r\n      return transformedMenuList;\r\n    }\r\n\r\n    const returnNavList = (lists, count) => {\r\n      let transformedList = [];\r\n      \r\n      Object.entries(lists).forEach(([key, value]) => {\r\n        const section = lists[key];\r\n\r\n        // omit parent if drilldown\r\n        if (section.hasOwnProperty('drilldown')) {\r\n          Object.entries(section.drilldown).forEach(([drillkey, drillvalue]) => {\r\n            count++;\r\n            let identifier = count.toString();\r\n\r\n            const item = section.drilldown[drillkey];\r\n\r\n            transformedList[identifier] = {};\r\n            transformedList[identifier].active = false;\r\n            transformedList[identifier].isSection = false;\r\n            transformedList[identifier].id = `${key}_${drillkey}`;\r\n\r\n            // Check and expand it if the pathname matches\r\n            if (location.pathname === item.href) {\r\n              transformedList[identifier].active = true;\r\n            }\r\n            transformedList[identifier].data = drillvalue.data;\r\n          })\r\n        }\r\n        else {\r\n          count++;\r\n          let identifier = count.toString();\r\n\r\n          transformedList[identifier] = {};\r\n          transformedList[identifier].active = false;\r\n          transformedList[identifier].isSection = true;\r\n          transformedList[identifier].hasItems = false;\r\n          transformedList[identifier].id = key;\r\n\r\n          if (location.pathname === section.href) {\r\n              transformedList[identifier].active = true;\r\n          }\r\n          transformedList[identifier].data = value;\r\n        }\r\n      });\r\n\r\n      return transformedList;\r\n    }\r\n\r\n    // Render main items\r\n    const renderMainItems = (items, sectionID) => {\r\n      let Section;\r\n      let fontSize;\r\n      let secondaryButton=0;\r\n      switch(sectionID) {\r\n        case GLOBALS.CONSTANTS.NAVBAR_SECTIONS.SECONDARY:\r\n          Section = SecondarySection;\r\n          fontSize = \"small\";\r\n          secondaryButton=1;\r\n          break;\r\n        default:\r\n          Section = PrimarySection;\r\n          fontSize = \"normal\";\r\n      }\r\n\r\n      let rendered = (\r\n        Object.keys(items).map(function(key) {\r\n          const section = items[key];\r\n          const data = section.data;\r\n          let innerRendered = (\r\n            <Section \r\n                key={key}\r\n                flex=\"1\"\r\n                align=\"stretch\"\r\n                size={fontSize}\r\n            >\r\n\r\n              {\r\n                (secondaryButton)?\r\n                  (\r\n                    <Item\r\n                    padding=\"10px\"\r\n                    flexBasis=\"100%\"\r\n                    align=\"stretch\"\r\n                    direction=\"row\"\r\n                    overflow=\"hidden\"\r\n                  >\r\n                    <SectionInnerGroupContainer\r\n                      flex=\"1\"\r\n                      align=\"stretch\"\r\n                      bg={theme.leftBarButtonBg}\r\n                      zIndex={2}\r\n                      refresh={refresh}\r\n                      margintop=\"15px\"\r\n                      onClick={() => {\r\n                        mutateTransformedList(section, true)\r\n                      }}      \r\n                      id={data.id}          \r\n                    >\r\n                      <NavigationButton\r\n                        item={section}\r\n                        data={data}\r\n                        sectionID={sectionID}\r\n                        active={section.active}\r\n                      />\r\n                    </SectionInnerGroupContainer>\r\n                    \r\n                    { \r\n                    section.hasItems \r\n                      ? renderChildItems(\r\n                          data.drilldown, \r\n                          section.opened,\r\n                          GLOBALS.CONSTANTS.NAVBAR_SECTIONS.PRIMARY\r\n                        )\r\n                      : null\r\n                    }\r\n                  </Item>\r\n                  ):\r\n                  (\r\n                    <Item\r\n                      padding=\"10px\"\r\n                      flexBasis=\"100%\"\r\n                      align=\"stretch\"\r\n                      direction=\"row\"\r\n                      overflow=\"hidden\"\r\n                    >\r\n                        <SectionInnerGroupContainer\r\n                          flex=\"1\"\r\n                          align=\"stretch\"\r\n                          bg={theme.leftBarButtonBg}\r\n                          margintop=\"-10px\"\r\n                          zIndex={2}\r\n                          refresh={refresh}\r\n                          onClick={() => {\r\n                            mutateTransformedList(section, true)\r\n                          }}                  \r\n                        >\r\n                        <NavigationButton\r\n                          item={section}\r\n                          data={data}\r\n                          sectionID={sectionID}\r\n                          active={section.active}\r\n                        />\r\n                      </SectionInnerGroupContainer>\r\n                    \r\n                      { \r\n                      section.hasItems \r\n                        ? renderChildItems(\r\n                            data.drilldown, \r\n                            section.opened,\r\n                            GLOBALS.CONSTANTS.NAVBAR_SECTIONS.PRIMARY\r\n                          )\r\n                        : null\r\n                      }\r\n                    </Item>\r\n                  )\r\n                \r\n              }\r\n             \r\n                \r\n\r\n            </Section>\r\n          )\r\n\r\n          return innerRendered;\r\n        })\r\n      )\r\n\r\n      return rendered;\r\n    }\r\n\r\n    // Render Child Items\r\n    const renderChildItems = (drilldown, opened, sectionID) => {\r\n      let SectionGroup;\r\n      let SectionItem;\r\n\r\n      switch(sectionID) {\r\n        case GLOBALS.CONSTANTS.NAVBAR_SECTIONS.SECONDARY:\r\n          SectionGroup = PrimarySectionGroup;\r\n          SectionItem = PrimarySectionItem;\r\n          break;\r\n        default:\r\n          SectionGroup = PrimarySectionGroup;\r\n          SectionItem = PrimarySectionItem;\r\n      }\r\n\r\n      let rendered = (\r\n        <SectionGroup\r\n          align=\"stretch\"\r\n          opened={opened}\r\n          refresh={refresh}\r\n        >\r\n          {Object.keys(drilldown).map(function(key) {\r\n            const item = drilldown[key];\r\n            const data = item.data;\r\n            \r\n            return (\r\n              <SectionItem\r\n                  key={key}\r\n                  flex=\"1\"\r\n                  align=\"stretch\"\r\n                  size=\"small\" \r\n              >\r\n                <SectionInnerItemContainer\r\n                  flex=\"1\"\r\n                  align=\"stretch\"\r\n                  bg={theme.leftBarButtonBg}\r\n                  zIndex={1}\r\n                  refresh={refresh}\r\n                  onClick={() => {\r\n                    // mutateTransformedList(item)\r\n                  }}\r\n                >\r\n                  <NavigationButton\r\n                    item={item}\r\n                    data={data}\r\n                    sectionID={sectionID}\r\n                    active={item.active}\r\n                  />\r\n                </SectionInnerItemContainer>\r\n              </SectionItem>\r\n            )\r\n          })}\r\n        </SectionGroup>\r\n      );\r\n\r\n      return rendered;\r\n    }\r\n    \r\n    return (\r\n      <Container direction=\"column\" headerHeight={GLOBALS.CONSTANTS.HEADER_HEIGHT}>\r\n        {!navigationSetup &&\r\n          <Item padding=\"20px\" justify=\"flex-start\">\r\n            <Loader type=\"Oval\" color={theme.leftBarLoaderBg} height={20} width={20} />\r\n          </Item>\r\n        }\r\n        {navigationSetup && Object.keys(navigationSetup).length > 0 &&\r\n          <>\r\n            <Primary>\r\n              {\r\n                renderMainItems(\r\n                  navigationSetup.primary,\r\n                  GLOBALS.CONSTANTS.NAVBAR_SECTIONS.PRIMARY\r\n                )\r\n              }\r\n            </Primary>\r\n            <Footer\r\n              justify=\"flex-end\"\r\n              align=\"strecth\"\r\n            >\r\n              <Secondary\r\n                align=\"stretch\"\r\n                justify=\"flex-end\"\r\n                margin=\"10px 0px 10px 0px\"\r\n              >\r\n                {\r\n                  renderMainItems(\r\n                    navigationSetup.secondary,\r\n                    GLOBALS.CONSTANTS.NAVBAR_SECTIONS.SECONDARY\r\n                  )\r\n                }\r\n              </Secondary>\r\n\r\n              {/* Put social */}\r\n              <ItemH\r\n                flex=\"initial\"\r\n                padding=\"10px\"\r\n                radius=\"0px 12px 0px 0px\"\r\n                bg={theme.leftBarSocialBg}\r\n              >\r\n                <Anchor\r\n                title=\"Open Twitter\"\r\n                href=\"https://twitter.com/epnsproject\"\r\n                target=\"_blank\"\r\n                bg={theme.leftBarSocialIconBg}\r\n                radius=\"4px\"\r\n                padding=\"10px\"\r\n                margin=\"5px\"\r\n                onMouseOver={({ target }) => target.style.color = theme.color}\r\n                onMouseOut={({target})=>target.style.color = \"fff\"}\r\n                >\r\n                  <FaTwitter size={15} color=\"fff\" />\r\n                </Anchor>\r\n                <Anchor\r\n                  title=\"Open Telegram\"\r\n                  href=\"https://t.me/epnsproject\"\r\n                  target=\"_blank\"\r\n                  bg={theme.leftBarSocialIconBg}\r\n                  radius=\"4px\"\r\n                  padding=\"10px\"\r\n                  margin=\"5px\"\r\n                  onMouseOver={({ target }) => target.style.color = theme.color}\r\n                  onMouseOut={({target})=>target.style.color = \"fff\"}\r\n                >\r\n                  <FaTelegramPlane size={15} color=\"#fff\"/>\r\n                </Anchor>\r\n                <Anchor\r\n                  title=\"Open Medium\"\r\n                  href=\"https://medium.com/ethereum-push-notification-service\"\r\n                  target=\"_blank\"\r\n                  bg={theme.leftBarSocialIconBg}\r\n                  radius=\"4px\"\r\n                  padding=\"10px\"\r\n                  margin=\"5px\"\r\n                  onMouseOver={({ target }) => target.style.color = theme.color}\r\n                  onMouseOut={({target})=>target.style.color = \"fff\"}\r\n                >\r\n                  <FaMedium size={15} color=\"#fff\"/>\r\n                </Anchor>\r\n                <Anchor\r\n                  title=\"Open Discord\"\r\n                  href=\"https://discord.gg/YVPB99F9W5\"\r\n                  target=\"_blank\"\r\n                  bg={theme.leftBarSocialIconBg}\r\n                  radius=\"4px\"\r\n                  padding=\"10px\"\r\n                  margin=\"5px\"\r\n                  onMouseOver={({ target }) => target.style.color = theme.color}\r\n                  onMouseOut={({target})=>target.style.color = \"fff\"}\r\n                >\r\n                  <FaDiscord size={15} color=\"#fff\"/>\r\n                </Anchor>\r\n                <Anchor\r\n                  title=\"Open Github\"\r\n                  href=\"https://github.com/ethereum-push-notification-service\"\r\n                  target=\"_blank\"\r\n                  bg={theme.leftBarSocialIconBg}\r\n                  radius=\"4px\"\r\n                  padding=\"10px\"\r\n                  margin=\"5px\"\r\n                  onMouseOver={({ target }) => target.style.color = theme.color}\r\n                  onMouseOut={({target})=>target.style.color = \"fff\"}\r\n                >\r\n                  <FaGithub size={15} color={\"#fff\"}/>\r\n                </Anchor>\r\n              </ItemH>\r\n            </Footer>\r\n          </>\r\n        }\r\n      </Container>\r\n    );\r\n}\r\n\r\n// CSS Styles\r\nconst Container = styled(Section)`\r\n  background: ${props => props.theme.leftBarBg};\r\n  flex: 1;\r\n  height: calc(100% - ${props => props.headerHeight}px);\r\n  margin: ${props => props.headerHeight}px 0px 0px 0px;\r\n  border-right: 1px solid ${props => props.theme.sectionBorderBg};\r\n`\r\n\r\nconst Primary = styled(Item)`\r\n  flex-direction: column;\r\n  flex-wrap: nowrap;\r\n  align-items: stretch;\r\n  justify-content: flex-start;\r\n  background: '#fff';\r\n  overflow-y: scroll;\r\n  padding: 0px 0px 20px 0px;\r\n`\r\n\r\nconst InheritedSection = styled(Item)`\r\n  flex: initial;\r\n  align-items: 'center';\r\n`\r\n\r\nconst PrimarySection = styled(InheritedSection)`\r\n  border-bottom: 1px solid ${props => props.theme.sectionBorderBg};\r\n  border-top: 1px solid ${props => props.theme.sectionBorderBg};\r\n  margin-top: -1px;\r\n`\r\n\r\nconst InheritedSectionGroup = styled(Item)`\r\n  align-items: 'stretch';\r\n`\r\n\r\nconst InheritedSectionItem = styled(Item)`\r\n  align-items: 'stretch';\r\n  padding: 0px 0px 0px 20px;\r\n`\r\n\r\nconst SectionInnerGroupContainer = styled(Item)`\r\n    &:after {\r\n    content: '';\r\n    position: absolute;\r\n    top: ${props=>props.margintop};\r\n    right: 0;\r\n    left: 0;\r\n    background: ${props => props.theme.leftBarButtonBg};\r\n    height: 10px;\r\n  } \r\n`\r\n\r\nconst SectionInnerItemContainer = styled(Item)`\r\n\r\n`\r\n\r\nconst PrimarySectionGroup = styled(InheritedSectionGroup)`\r\n  transition: margin .1s ease-out;\r\n  ${ props => !props.opened && css`\r\n    margin-top: -100%;\r\n  `};\r\n`\r\n\r\nconst PrimarySectionItem = styled(InheritedSectionItem)`\r\n  \r\n`\r\n\r\nconst Footer = styled(Item)`\r\n  z-index: 3;\r\n`\r\n\r\nconst Secondary = styled(Item)`\r\n  flex: auto;\r\n`\r\n\r\nconst SecondarySection = styled(InheritedSection)`\r\n\r\n`\r\n\r\nconst Social = styled(Item)`\r\n\r\n`\r\n\r\n// Export Default\r\nexport default Navigation;\r\n","import React from \"react\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { ethers } from \"ethers\";\r\n//import { parseEther, bigNumber } from 'ethers/utils'\r\n\r\nconst COINDESK_CHANNEL_ADDR = \"0xe56f1D3EDFFF1f25855aEF744caFE7991c224FFF\";\r\nconst COINDESK_HASH = \"1+bafkreif643vf3cteadznccivnsk5uj26e3ls7onbshnldb3aej3omrxsau\"\r\nconst ENS_CHANNEL_ADDR = \"0x983110309620D911731Ac0932219af06091b6744\";\r\nconst ENS_HASH = \"1+bafkreiekigkyezwrspignt7l7vsrjefjmogwmigy4eqtts277cu2p23ilm\";\r\n// FeedDB Helper Function\r\nconst EPNSCoreHelper = {\r\n  // To get owner info\r\n  getOwnerInfo: async (contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.governance()\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getOwnerInfo() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getOwnerInfo() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  getVotingPower : async (delegateeAddress, contract, rawFormat = false) => {\r\n    let isAddress = await ethers.utils.isAddress(delegateeAddress)\r\n    if(isAddress || delegateeAddress.endsWith('.eth')){\r\n      try{\r\n        let decimals =  await contract.decimals()\r\n        let votes = await contract.getCurrentVotes(delegateeAddress)\r\n        let votingPower = await Number(votes/Math.pow(10, decimals))\r\n        let prettyVotingPower = votingPower.toString();\r\n        return rawFormat ? votingPower : prettyVotingPower;\r\n      }\r\n      catch(err){\r\n      console.log(\" ~ file: ViewDelegateeItem.js ~ line 47 ~ getVotingPower ~ err\", err)\r\n      }\r\n    }\r\n    return \"0.000\"\r\n  },\r\n  // To get user info\r\n  getUserInfo: async (user, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.users(user)\r\n        .then(response => {\r\n          const mappings = { ...response };\r\n          mappings.addr = user;\r\n\r\n          if (enableLogs) console.log(\"getUserInfo() --> %o\", mappings);\r\n          resolve(mappings);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getUserInfo() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // To retrieve a channel address from it's id\r\n  getChannelAddressFromID: async (channelID, contract) => {\r\n    return new Promise ((resolve, reject) => {\r\n      // To get channel info from a channel address\r\n      contract.channelById(channelID)\r\n        .then(response => {\r\n          // console.log(\"getChannelAddressFromID() --> %o\", response.toString());\r\n          resolve(response.toString());\r\n        })\r\n        .catch(err => { console.log(\"!!!Error, getChannelAddressFromID() --> %o\", err); reject(err); });\r\n    })\r\n  },\r\n  // To retrieve a channel's Info from channel address\r\n  getChannelInfo: async (channel, contract) => {\r\n    const enableLogs = 0;\r\n    return new Promise ((resolve, reject) => {\r\n      // To get channel info from a channel address\r\n      contract.channels(channel)\r\n        .then(response => {\r\n          // Add an extra field for future info\r\n          const mappings = { ...response };\r\n          mappings.addr = channel;\r\n\r\n          if (enableLogs) console.log(\"getChannelInfo() --> %o\", mappings);\r\n          resolve(mappings);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getChannelInfo() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // To retrieve a channel's AddChannel event\r\n  getChannelEvent: async (channel, startBlock, updateBlock, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n\r\n      // To get channel ipfs hash from channel info\r\n      let filter = contract.filters.AddChannel(channel);\r\n      let block = startBlock;\r\n      if (startBlock != updateBlock) {\r\n        filter = contract.filters.UpdateChannel(channel);\r\n        block = updateBlock;\r\n      }\r\n\r\n      contract.queryFilter(filter, block, block)\r\n        .then(response => {\r\n          let filteredResponse;\r\n\r\n          if (enableLogs) console.log(\"getChannelEvent() --> Finding: %s in | %o |\", channel, response );\r\n\r\n          response.forEach(function (item) {\r\n            if (item.args.channel.toString() == channel.toString()) {\r\n              if (enableLogs) console.log(\"getChannelEvent() --> Selected Channel %o: \", item);\r\n              filteredResponse = ethers.utils.toUtf8String(item.args.identity);\r\n            }\r\n          });\r\n\r\n          if (enableLogs) console.log(\"getChannelEvent() --> Filtered Channel: %o\", filteredResponse);\r\n          resolve(filteredResponse);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getChannelEvent() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // Retrive IPFS File from ipfshash\r\n  getJsonFileFromIdentity: async(identity, channel) => {\r\n    const enableLogs = 0;\r\n\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // Split Channel Identity, delimeter of identity is \"+\"\r\n      if(!identity){\r\n        reject(\"There is no identity file for channel:\",channel);\r\n      }\r\n      const ids = identity?.split(\"+\") || []; // First segment is storage type, second is the pointer to it\r\n\r\n      if (ids[0] == 1) {\r\n        // IPFS HASH\r\n        // Form Gateway URL\r\n        const url = \"https://ipfs.io/ipfs/\" + ids[1];\r\n        fetch(url)\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            if (enableLogs) console.log(\"getJsonFileFromIdentity() --> %o\", response);\r\n            resolve(response);\r\n          })\r\n          .catch(err => {\r\n            console.log(\"!!!Error, getJsonFileFromIdentity() --> %o\", err);\r\n            reject(err);\r\n          });\r\n      }\r\n\r\n    });\r\n  },\r\n  // Helper to get Channel from Channel's address\r\n  getChannelJsonFromChannelAddress: async (channel, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // To get channel info from a channel address\r\n      EPNSCoreHelper.getChannelInfo(channel, contract)\r\n        .then(response => EPNSCoreHelper.getChannelEvent(channel, response.channelStartBlock.toNumber(), response.channelUpdateBlock.toNumber(), contract))\r\n        .then(response => {\r\n          // add little hack for now to change coindesk's descriptioon\r\n          const hash = channel === COINDESK_CHANNEL_ADDR ? COINDESK_HASH  : (channel === ENS_CHANNEL_ADDR ? ENS_HASH : response);\r\n          return EPNSCoreHelper.getJsonFileFromIdentity(hash, channel)\r\n          // return EPNSCoreHelper.getJsonFileFromIdentity(response, channel)\r\n        })\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getChannelJsonFromChannelAddress() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getChannelJsonFromChannelAddress() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    });\r\n  },\r\n  // Helper to get Channel from User's address\r\n  getChannelJsonFromUserAddress: async (user, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // To get channel info from a channel address\r\n      // EPNSCoreHelper.getUserInfo(user, contract)\r\n      //   .then(response => EPNSCoreHelper.getChannelJsonFromChannelAddress(user, contract))\r\n        EPNSCoreHelper.getChannelJsonFromChannelAddress(user, contract)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getChannelJsonFromUserAddress() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getChannelJsonFromUserAddress() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    });\r\n  },\r\n  // Get Total Number of Channels\r\n  getTotalNumberOfChannels: async (contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.channelsCount()\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getTotalNumberOfChannels() --> %o\", response.toNumber());\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getTotalNumberOfChannels() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // Get channels address given number of channels, , atIndex: -1 is start from latest, numChannels: -1 is return all\r\n  getChannelsMetaLatestToOldest: async (atIndex, numChannels, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      EPNSCoreHelper.getTotalNumberOfChannels(contract)\r\n        .then(async (response) => {\r\n          let channelsInfo = [];\r\n          const channelsCount = response;\r\n\r\n          if (atIndex > channelsCount || atIndex == -1) {\r\n            atIndex = channelsCount - 1;\r\n          }\r\n\r\n          if (numChannels == -1) {\r\n            numChannels = channelsCount;\r\n          }\r\n\r\n          // Get channels\r\n          let channelArrays = [];\r\n\r\n          // prefil and then refil\r\n          let count = 0;\r\n          for (let i = numChannels - 1; i >= 0; i--) {\r\n            const assignedChannelID = atIndex - i;\r\n            channelArrays.push(assignedChannelID);\r\n          }\r\n\r\n          const promises = channelArrays.map(async (channelID) => {\r\n            await EPNSCoreHelper.getChannelAddressFromID(channelID, contract)\r\n              .then(response => EPNSCoreHelper.getChannelInfo(response, contract))\r\n              .then(response => {\r\n                if (enableLogs) console.log(\"getChannelsMetaLatestToOldest(%d, %d) --> %o\", channelID, numChannels, channelsInfo);\r\n                channelsInfo = [response, ...channelsInfo];\r\n              })\r\n              .catch(err => console.log(\"Error in channel: %d | skipping...\", channelID))\r\n          });\r\n\r\n          // wait until all promises are resolved\r\n          await Promise.all(promises);\r\n\r\n          if (enableLogs) console.log(\"getChannelsMetaLatestToOldest(Index: %d, Number: %d) --> %o\", atIndex, numChannels, channelsInfo);\r\n          resolve(channelsInfo);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getChannelsMetaLatestToOldest() --> %o\", err);\r\n          reject(err);\r\n        })\r\n    });\r\n  },\r\n  // Get Total Number of Users\r\n  getTotalNumberOfUsers: async (contract) => {\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.usersCount()\r\n        .then(response => {\r\n          console.log(\"getTotalNumberOfUsers() --> %o\", response.toNumber());\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => { console.log(\"!!!Error, getTotalNumberOfUsers() --> %o\", err); reject(err); });\r\n    })\r\n  },\r\n  // To retrieve public key of a user\r\n  getPublicKey: async (address, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // To get channel ipfs hash from channel info\r\n      let filteredResponse;\r\n      contract.queryFilter('PublicKeyRegistered')\r\n        .then(response => {\r\n\r\n          response.forEach(function (item) {\r\n            if (item.args[0] == address) {\r\n              filteredResponse = item;\r\n            }\r\n          });\r\n\r\n          if (enableLogs) console.log(\"Public Key Registry Response: \" + response);\r\n          if (enableLogs) console.log(\"Public Key Registry Filtered: \" + filteredResponse);\r\n\r\n          if (!filteredResponse || filteredResponse.length == 0) {\r\n            resolve(null)\r\n          }\r\n          else {\r\n            resolve(filteredResponse.args[1]);\r\n          }\r\n\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // Get Total Subsbribed Channels\r\n  getSubscribedStatus: async (user, channel, contract) => {\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.isUserSubscribed(channel, user)\r\n        .then(response => {\r\n          // console.log(\"getSubscribedStatus() --> %o\", {response, user, channel});\r\n          resolve(response);\r\n        })\r\n        .catch(err => { console.log(\"!!!Error, getSubscribedStatus() --> %o\", err); reject(err); });\r\n    })\r\n  },\r\n  // Get Total Subsbribed Channels\r\n  getTotalSubscribedChannels: async (user, contract) => {\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.users[user].subscribedCount()\r\n        .then(response => {\r\n          console.log(\"getTotalSubscribedChannels() --> %o\", response.toNumber());\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => { console.log(\"!!!Error, getTotalSubscribedChannels() --> %o\", err); reject(err); });\r\n    })\r\n  },\r\n  // Get Fair Share\r\n  getFairShareOfUserAtBlock: async(user, block, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      // Get User Info from EPNS Core\r\n      contract.users(user)\r\n        .then((response) => {\r\n          if (response.userActivated) {\r\n            contract.calcAllChannelsRatio(user, block)\r\n              .then(response => {\r\n                if (enableLogs) console.log(\"calcAllChannelsRatio() --> %o\", response);\r\n                resolve(response);\r\n              })\r\n              .catch(err => {\r\n                console.log(\"!!!Error, calcAllChannelsRatio() --> %o\", err);\r\n                reject(err);\r\n              });\r\n          }\r\n          else {\r\n            if (enableLogs) console.log(\"!!!Warning, calcAllChannelsRatio() --> User not activated\");\r\n            reject(\"User not activated\");\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, calcAllChannelsRatio() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // Get Pool Funds\r\n  getPoolFunds: async(contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.poolFunds()\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getPoolFunds() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getPoolFunds() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n  // Helper Functions\r\n  // To format Big Number\r\n  formatBigNumberToMetric: (bignumber, convertToCurrency) => {\r\n    try {\r\n      if (convertToCurrency) {\r\n        bignumber = bignumber.div(100000000000000);\r\n        bignumber = bignumber.div(10000);\r\n      }\r\n      bignumber = bignumber.toNumber();\r\n      return EPNSCoreHelper.metricFormatter(bignumber, 2);\r\n    }\r\n    catch (e) {\r\n      console.log(e);\r\n      return \"---\";\r\n    }\r\n  },\r\n  // Metric Formatter, thanks: https://stackoverflow.com/questions/9461621/format-a-number-as-2-5k-if-a-thousand-or-more-otherwise-900\r\n  metricFormatter: (num, digits) => {\r\n    var si = [\r\n      { value: 1, symbol: \"\" },\r\n      { value: 1E3, symbol: \"k\" },\r\n      { value: 1E6, symbol: \"M\" },\r\n      { value: 1E9, symbol: \"G\" },\r\n      { value: 1E12, symbol: \"T\" },\r\n      { value: 1E15, symbol: \"P\" },\r\n      { value: 1E18, symbol: \"E\" }\r\n    ];\r\n    var rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\r\n    var i;\r\n    for (i = si.length - 1; i > 0; i--) {\r\n      if (num >= si[i].value) {\r\n        break;\r\n      }\r\n    }\r\n    return (num / si[i].value).toFixed(digits).replace(rx, \"$1\") + si[i].symbol;\r\n  },\r\n\r\n}\r\n\r\nexport default EPNSCoreHelper;\r\n","import React from \"react\";\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\r\nimport { ethers } from \"ethers\";\r\nimport { toast } from 'react-toastify';\r\nimport moment from 'moment';\r\n\r\nfunction NotificationToast({ notification, clearToast }) {\r\n\r\n  // toast customize\r\n  const LoaderToast = ({color }) => (\r\n      <Toaster>\r\n      <div>{notification.notificationTitle}</div>\r\n      <div>{notification.notificationBody}</div>\r\n      </Toaster>\r\n  )\r\n \r\n  // Render\r\n  return (\r\n    <NotificationWrapper>{\r\n    toast.dark(<LoaderToast onClick={clearToast} color=\"#35c5f3\"/>, {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        })\r\n    }\r\n    </NotificationWrapper>\r\n  );\r\n}\r\n\r\nconst NotificationWrapper = styled.div`\r\n  display: none;\r\n`;\r\n\r\nconst Toaster = styled.div`\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  background: #fafafa;\r\n`\r\n\r\n\r\n\r\n// Export Default\r\nexport default NotificationToast;\r\n","import React from \"react\";\r\nimport styled, { css } from 'styled-components';\r\nimport { AnimateOnChange } from 'react-animation';\r\n\r\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\r\n\r\n// Create Header\r\nfunction DisplayNotice({ title, theme }) {\r\n  React.useEffect(() => {\r\n\r\n  }, [title, theme]);\r\n\r\n  // to create blockies\r\n\r\n  return (\r\n    <Container>\r\n      <AnimateOnChange\r\n        animationIn=\"fadeIn\"\r\n        animationOut=\"fadeOut\"\r\n        durationOut={200}\r\n      >\r\n        <Notice theme={theme}>{title}</Notice>\r\n      </AnimateOnChange>\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n\r\n`\r\n\r\nconst Notice = styled.span`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n\r\n  ${props => props.theme === 'primary' && css`\r\n    background: #e20880;\r\n  `};\r\n\r\n  ${props => props.theme === 'secondary' && css`\r\n    background: #35c5f3;\r\n  `};\r\n\r\n  ${props => props.theme === 'third' && css`\r\n    background: #674c9f;\r\n  `};\r\n`\r\n\r\n// Export Default\r\nexport default DisplayNotice;\r\n","/**\r\n * This file helps us maintain the notifications fetched in state, so when tabs are switched we can retain the notification information\r\n */\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n    page: 1, //the current page\r\n    notifications: [],// the actual notifications\r\n    finishedFetching: false,\r\n    toggler: false\r\n}\r\n\r\nexport const contractSlice = createSlice({\r\n    name: \"notifications\",\r\n    initialState,\r\n    reducers: {\r\n        toggleToggler: (state) => {\r\n            state.toggler = !state.toggler;\r\n        },\r\n        resetState: (state) => {\r\n            state.page = initialState.page;\r\n            state.notifications = initialState.notifications;\r\n            state.finishedFetching = initialState.finishedFetching;\r\n        },\r\n        addPaginatedNotifications: (state, action) => {\r\n            state.notifications = [ ...state.notifications, ...action.payload ];\r\n            state.page += 1;\r\n        },\r\n        incrementPage: (state) => {\r\n            state.page += 1;\r\n        },\r\n        addNewNotification: (state, action) => {\r\n            state.notifications = [{...action.payload}, ...state.notifications]\r\n        },\r\n        setFinishedFetching: (state) => {\r\n            state.finishedFetching = true;\r\n        },\r\n        updateTopNotifications: (state, action) => {\r\n            console.log({pp: action.payload});\r\n            state.notifications = [...action.payload.notifs, ...state.notifications.slice(action.payload.pageSize)];\r\n            console.log({sn: state.notifications});\r\n        }\r\n    }\r\n});\r\n\r\nexport const {\r\n    toggleToggler,\r\n    addPaginatedNotifications,\r\n    incrementPage,\r\n    addNewNotification,\r\n    setFinishedFetching,\r\n    resetState,\r\n    updateTopNotifications\r\n} = contractSlice.actions;\r\n\r\nexport default contractSlice.reducer;\r\n","import React, {useState} from \"react\";\r\nimport styled, {useTheme} from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { envConfig } from \"@project/contracts\";\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\nimport {\r\n  api,\r\n  utils,\r\n  NotificationItem,\r\n} from \"@epnsproject/frontend-sdk-staging\";\r\nimport {\r\n  addPaginatedNotifications,\r\n  incrementPage,\r\n  setFinishedFetching,\r\n  updateTopNotifications,\r\n} from \"redux/slices/notificationSlice\";\r\n\r\nimport {Section, Item, ItemH, Span, Anchor, RouterLink, Image} from 'components/SharedStyling';\r\n\r\nconst NOTIFICATIONS_PER_PAGE = 10;\r\n// Create Header\r\nfunction Feedbox() {\r\n  const dispatch = useDispatch();\r\n  const { account } = useWeb3React();\r\n  const { epnsCommReadProvider } = useSelector((state: any) => state.contracts);\r\n  const { notifications, page, finishedFetching, toggle } = useSelector(\r\n    (state: any) => state.notifications\r\n  );\r\n\r\n  const themes = useTheme();\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const [bgUpdateLoading, setBgUpdateLoading] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [currentTab, setCurrentTab] = React.useState(\"inbox\");\r\n\r\n  const loadNotifications = async () => {\r\n    if (loading || finishedFetching) return;\r\n    setLoading(true);\r\n    try {\r\n      const { count, results } = await api.fetchNotifications(\r\n        account,\r\n        NOTIFICATIONS_PER_PAGE,\r\n        page,\r\n        envConfig.apiUrl\r\n      );\r\n      const parsedResponse = utils.parseApiResponse(results);\r\n      dispatch(addPaginatedNotifications(parsedResponse));\r\n      if (count === 0) {\r\n        dispatch(setFinishedFetching());\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const fetchLatestNotifications = async () => {\r\n    if (loading || bgUpdateLoading) return;\r\n    setBgUpdateLoading(true);\r\n    setLoading(true);\r\n    try {\r\n      const { count, results } = await api.fetchNotifications(\r\n        account,\r\n        NOTIFICATIONS_PER_PAGE,\r\n        1,\r\n        envConfig.apiUrl\r\n      );\r\n      if (!notifications.length) {\r\n        dispatch(incrementPage());\r\n      }\r\n      const parsedResponse = utils.parseApiResponse(results);\r\n      // replace the first 20 notifications with these\r\n      dispatch(\r\n        updateTopNotifications({\r\n          notifs: parsedResponse,\r\n          pageSize: NOTIFICATIONS_PER_PAGE,\r\n        })\r\n      );\r\n      if (count === 0) {\r\n        dispatch(setFinishedFetching());\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setBgUpdateLoading(false);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  React.useEffect(() => {\r\n    if (account && currentTab === \"inbox\") {\r\n      fetchLatestNotifications();\r\n    }\r\n  }, [account, currentTab]);\r\n\r\n  React.useEffect(() => {\r\n    fetchLatestNotifications();\r\n  }, [toggle]);\r\n\r\n  //function to query more notifications\r\n  const handlePagination = async () => {\r\n    loadNotifications();\r\n    dispatch(incrementPage());\r\n  };\r\n\r\n  const showWayPoint = (index: any) => {\r\n    return (\r\n      Number(index) === notifications.length - 1 &&\r\n      !finishedFetching &&\r\n      !bgUpdateLoading\r\n    );\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n    <Container>\r\n      {notifications && (\r\n        <Notifs id=\"scrollstyle-secondary\">\r\n\r\n          {bgUpdateLoading && (\r\n            <Item\r\n              padding=\"10px 20px\"\r\n            >\r\n              <Loader type=\"Oval\" color=\"#35c5f3\" height={40} width={40} />\r\n            </Item>\r\n          )}\r\n\r\n          {notifications.map((oneNotification, index) => {\r\n            const {\r\n              cta,\r\n              title,\r\n              message,\r\n              app,\r\n              icon,\r\n              image,\r\n            } = oneNotification;\r\n\r\n            // render the notification item\r\n            return (\r\n              <div key={`${message}+${title}`}>\r\n                {showWayPoint(index) && (\r\n                  <Waypoint onEnter={() => handlePagination()} />\r\n                )}\r\n                <NotificationItem\r\n                  notificationTitle={title}\r\n                  notificationBody={message}\r\n                  cta={cta}\r\n                  app={app}\r\n                  icon={icon}\r\n                  image={image}\r\n                  theme={themes.scheme}\r\n                />\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {loading && !bgUpdateLoading && (\r\n            <Item\r\n              padding=\"10px 20px\"\r\n            >\r\n              <Loader type=\"Oval\" color=\"#35c5f3\" height={40} width={40} />\r\n            </Item>\r\n          )}\r\n        </Notifs>\r\n      )}\r\n      {!notifications.length && !loading && (\r\n        <Item>\r\n          <DisplayNotice\r\n            title=\"You currently have no notifications, try subscribing to some channels.\"\r\n            theme=\"third\"\r\n          />\r\n        </Item>\r\n      )}\r\n    </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  background: ${props => props.theme.mainBg};\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: stretch;\r\n  justify-content: center;\r\n  height: inherit;\r\n`;\r\n\r\nconst Notifs = styled.div`\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  \r\n  flex: 1;\r\n\r\n  \"-webkit-scrollbar-track\": {\r\n    background-color: #EEE;\r\n    border-radius: 10px;\r\n  }\r\n`;\r\n\r\n// Export Default\r\nexport default Feedbox;\r\n","import axios from \"axios\";\r\nimport { envConfig } from \"@project/contracts\";\r\n\r\n\r\n// const BASE_URL = \"https://backend-staging.epns.io/apis\";\r\nconst BASE_URL = envConfig.apiUrl// \"https://backend-kovan.epns.io/apis\";\r\n// const BASE_URL = \"http://localhost:4000/apis\"; //for local push node\r\n\r\n/**\r\n * A function used to make get requests throughout the entire application\r\n * @param {String} path e.g /feeds/get_feeds, this represents the route of the enpoint to call\r\n * @returns {Promise}\r\n */\r\nexport const getReq = async (path) => {\r\n    try {\r\n      const response = await axios.get(BASE_URL + path);\r\n      return response;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n/**\r\n * A function used to make post requests to the backend\r\n * @param {String} path e.g /feeds/get_feeds, this represents the route of the enpoint to call\r\n * @param {Object} obj\r\n * @returns {Promise}\r\n */\r\nexport const postReq = async (path, obj) => {\r\n  try {\r\n    const response = await axios.post(BASE_URL + path, obj, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n","import EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport { ethers } from \"ethers\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { postReq } from \"api\";\r\n\r\n// STATIC SINGLETON\r\nexport const ChannelEvents = {\r\n  ADD_CHANNEL_ANY: \"AddChannelAny\",\r\n  ADD_CHANNEL_SELF: \"AddChannelSelf\",\r\n  UPDATE_CHANNEL_ANY: \"UpdateChannelAny\",\r\n  UPDATE_CHANNEL_SELF: \"UpdateChannelSelf\",\r\n  SUBSCRIBER_ANY_CHANNEL: \"SubscriberAnyChannel\",\r\n  SUBSCRIBER_SELF_CHANNEL: \"SubscriberSelfChannel\",\r\n  UNSUBSCRIBER_ANY_CHANNEL: \"UnsubscriberAnyChannel\",\r\n  UNSUBSCRIBER_SELF_CHANNEL: \"UnsubscriberSelfChannel\",\r\n};\r\n\r\nexport default class ChannelsDataStore {\r\n  static instance = ChannelsDataStore.instance || new ChannelsDataStore();\r\n\r\n  state = {\r\n    channelsCount: -1,\r\n    channelsMeta: {},\r\n    channelsJson: {},\r\n    subscribers: {},\r\n\r\n    callbacks: [],\r\n\r\n    account: null,\r\n    epnsReadProvider: null,\r\n    epnsCommReadProvider: null,\r\n  };\r\n\r\n  // init\r\n  init = (account, epnsReadProvider, epnsCommReadProvider) => {\r\n    // set account\r\n    this.state.account = account;\r\n\r\n    // First attach listeners then overwrite the old one if any\r\n    this.resetChannelsListeners();\r\n    this.state.epnsReadProvider = epnsReadProvider;\r\n    this.state.epnsCommReadProvider = epnsCommReadProvider;\r\n    this.initChannelsListenersAsync();\r\n\r\n    // next get store channels count\r\n    this.getChannelsCountAsync();\r\n  };\r\n\r\n  // RESET LISTENERS\r\n  resetChannelsListeners = () => {\r\n    // only proceed if a read provider is attached\r\n    if (this.state.epnsReadProvider) {\r\n      this.state.epnsReadProvider.removeAllListeners(\"AddChannel\");\r\n      this.state.epnsReadProvider.removeAllListeners(\"UpdateChannel\");\r\n      this.state.epnsCommReadProvider.removeAllListeners(\"Subscribe\");\r\n      this.state.epnsCommReadProvider.removeAllListeners(\"Unsubscribe\");\r\n    }\r\n  };\r\n\r\n  // init LISTENERS\r\n  initChannelsListenersAsync = async () => {\r\n    // Add Listeners\r\n    await this.listenForAddChannelAnyAsync();\r\n    await this.listenForAddChannelSelfAsync();\r\n\r\n    await this.listenForUpdateChannelAnyAsync();\r\n    await this.listenForUpdateChannelSelfAsync();\r\n\r\n    // use the communicator contract for the below\r\n    await this.listenForSubscribeAnyAsync();\r\n    await this.listenForSubscribeSelfAsync();\r\n    await this.listenForUnsubscribeAnyAsync();\r\n    await this.listenForUnsubscribeSelfAsync();\r\n  };\r\n\r\n  // 1. Add Any Channel Listeners\r\n  listenForAddChannelAnyAsync = async () => {\r\n    const contract = this.state.epnsReadProvider;\r\n    let filter = contract.filters.AddChannel(null, null);\r\n\r\n    contract.on(filter, async (channel, ipfs) => {\r\n      // Do own stuff\r\n      await this.incrementChannelsCountAsync(1);\r\n\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.ADD_CHANNEL_ANY]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.ADD_CHANNEL_ANY]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, ipfs);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 2. Add Self Channel Listener\r\n  listenForAddChannelSelfAsync = async () => {\r\n    const contract = this.state.epnsReadProvider;\r\n    let filter = contract.filters.AddChannel(this.state.account, null);\r\n\r\n    contract.on(filter, async (channel, ipfs) => {\r\n      // Do own stuff\r\n      // Nothing to do, just do callback\r\n\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.ADD_CHANNEL_SELF]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.ADD_CHANNEL_SELF]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, ipfs);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 3. Update Any Channel Listener\r\n  listenForUpdateChannelAnyAsync = async () => {\r\n    const contract = this.state.epnsReadProvider;\r\n    let filter = contract.filters.UpdateChannel(null, null);\r\n\r\n    contract.on(filter, async (channel, ipfs) => {\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_ANY]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_ANY]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, ipfs);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 4. Update Self Channel Listener\r\n  listenForUpdateChannelSelfAsync = async () => {\r\n    const contract = this.state.epnsReadProvider;\r\n    let filter = contract.filters.UpdateChannel(this.state.account, null);\r\n\r\n    contract.on(filter, async (channel, ipfs) => {\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_SELF]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_SELF]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, ipfs);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 5. Subscriber Any\r\n  listenForSubscribeAnyAsync = async () => {\r\n    const contract = this.state.epnsCommReadProvider;\r\n    let filter = contract.filters.Subscribe(null, null);\r\n\r\n    contract.on(filter, async (channel, user) => {\r\n      //   // Do own stuff\r\n      //   if (this.state.channelsMeta[channel]) {\r\n      //     const channelID = this.state.channelsMeta[channel];\r\n      //     let count = this.state.channelsMeta[channelID].memberCount.toNumber();\r\n      //     count = count + 1;\r\n      //     this.state.channelsMeta[channelID].memberCount = bigNumberify(count);\r\n      //   }\r\n\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.SUBSCRIBER_ANY_CHANNEL]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.SUBSCRIBER_ANY_CHANNEL]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, user);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 6. Subscriber Self\r\n  listenForSubscribeSelfAsync = async () => {\r\n    const contract = this.state.epnsCommReadProvider;\r\n    let filter = contract.filters.Subscribe(this.state.account, null);\r\n\r\n    contract.on(filter, async (channel, user) => {\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.SUBSCRIBER_SELF_CHANNEL]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.SUBSCRIBER_SELF_CHANNEL]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, user);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 7. Unsubscribe Any\r\n  listenForUnsubscribeAnyAsync = async () => {\r\n    const contract = this.state.epnsCommReadProvider;\r\n    let filter = contract.filters.Unsubscribe(null, null);\r\n\r\n    contract.on(filter, async (channel, user) => {\r\n      // Do own stuff\r\n      // if (this.state.channelsMeta[channel]) {\r\n      //   const channelID = this.state.channelsMeta[channel];\r\n      //   let count = this.state.channelsMeta[channelID].memberCount.toNumber();\r\n      //   count = count - 1;\r\n      //   this.state.channelsMeta[channelID].memberCount = bigNumberify(count);\r\n      // }\r\n\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, user);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // 8. Unsubscribe Self\r\n  listenForUnsubscribeSelfAsync = async () => {\r\n    const contract = this.state.epnsCommReadProvider;\r\n    let filter = contract.filters.Unsubscribe(this.state.account, null);\r\n\r\n    contract.on(filter, async (channel, user) => {\r\n      // then perform callbacks\r\n      if (this.state.callbacks[ChannelEvents.UNSUBSCRIBER_SELF_CHANNEL]) {\r\n        for (let [callbackID, callback] of Object.entries(\r\n          this.state.callbacks[ChannelEvents.UNSUBSCRIBER_SELF_CHANNEL]\r\n        )) {\r\n          if (callback) {\r\n            callback(channel, user);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // FOR CALLBACKS\r\n  addCallbacks = (callbackType, callbackID, callback) => {\r\n    // first check if callback already exists\r\n    if (!this.state.callbacks[callbackType]) {\r\n      this.state.callbacks[callbackType] = {};\r\n    }\r\n\r\n    if (!this.state.callbacks[callbackType][callbackID]) {\r\n      this.state.callbacks[callbackType][callbackID] = callback;\r\n    }\r\n  };\r\n\r\n  removeCallbacks = (callbackType, callbackID) => {\r\n    // first check if callback already exists\r\n    if (this.state.callbacks[callbackType][callbackID]) {\r\n      this.state.callbacks[callbackType][callbackID] = null;\r\n    }\r\n  };\r\n\r\n  // CHANNELS COUNT\r\n  getChannelsCountAsync = async () => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n      if (this.state.channelsCount == -1) {\r\n        // Count not set, get and set it first\r\n        const count = EPNSCoreHelper.getTotalNumberOfChannels(\r\n          this.state.epnsReadProvider\r\n        )\r\n          .then((response) => {\r\n            this.state.channelsCount = response;\r\n\r\n            if (enableLogs)\r\n              console.log(\"getChannelsCountAsync() --> %o\", response);\r\n            resolve(this.state.channelsCount);\r\n          })\r\n          .catch((err) => {\r\n            console.log(\"!!!Error, getChannelsCountAsync() --> %o\", err);\r\n            reject(err);\r\n          });\r\n      } else {\r\n        resolve(this.state.channelsCount);\r\n      }\r\n    });\r\n  };\r\n\r\n  incrementChannelsCountAsync = async (incrementCount) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.getChannelsCountAsync()\r\n        .then((response) => {\r\n          this.state.channelsCount = response + incrementCount;\r\n          console.log(\r\n            \"incrementChannelsCountAsync() --> %d\",\r\n            this.state.channelsCount\r\n          );\r\n          resolve(this.state.channelsCount);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"!!!Error, incrementChannelsCountAsync() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    });\r\n  };\r\n  /**\r\n   * Get paginated channel information\r\n   * @param {Number} startIndex the number of channels viewed so far e.g 50\r\n   * @param {Number} pageCount the number of items per page we want\r\n   * @returns\r\n   */\r\n  getChannelFromApi = async (startIndex, pageCount) => {\r\n    return postReq(\"/channels/fetch_channels\", {\r\n      page: Math.ceil(startIndex / pageCount) || 1,\r\n      pageSize: pageCount,\r\n      op: \"write\",\r\n    }).then((response) => {\r\n      const output = response.data.results.map(({channel}) => ({addr: channel}));\r\n      return output;\r\n    });\r\n  };\r\n  // CHANNELS META FUNCTIONS\r\n  // To get channels meta\r\n  // get channels meta in a paginated format\r\n  // by passing in the starting index and the number of items per page\r\n  getChannelsMetaAsync = async (startIndex, pageCount) => {\r\n    this.getChannelFromApi(startIndex, pageCount)\r\n    return new Promise(async (resolve, reject) => {\r\n      // get total number of channels\r\n      const channelsCount = await this.getChannelsCountAsync();\r\n      let stopIndex = startIndex + pageCount;\r\n\r\n      // if the stop index is -1 then get all channels\r\n      if (stopIndex == -1 || stopIndex > channelsCount) {\r\n        stopIndex = channelsCount;\r\n      }\r\n\r\n      // initialise an array with the values from 0 to the length of the number of channels\r\n      let channelIDs = [];\r\n\r\n      for (let i = startIndex; i < stopIndex; i++) {\r\n        channelIDs.push(i);\r\n      }\r\n      console.log({ channelIDs });\r\n\r\n      const promises = channelIDs.map(async (channelID) => {\r\n        // Match the cache\r\n        return this.getChannelMetaAsync(channelID)\r\n          .then((response) => response)\r\n          .catch((err) =>\r\n            console.log(\r\n              \"!!!Error (but skipping), getChannelMetaAsync() --> %o\",\r\n              err\r\n            )\r\n          );\r\n      });\r\n\r\n      // wait until all promises are resolved\r\n      const channelMetaData = await Promise.all(promises);\r\n\r\n      // return channels meta\r\n      // console.log(\"getChannelsMetaAsync(From %d to %d) --> %o\", startIndex, stopIndex, channelMetaData);\r\n      resolve(channelMetaData);\r\n    });\r\n  };\r\n\r\n  // To get a single channel meta via id\r\n  getChannelMetaAsync = async (channelID) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (this.state.channelsMeta[channelID]) {\r\n        console.log(\r\n          \"getChannelMetaAsync() [CACHED] --> %o\",\r\n          this.state.channelsMeta[channelID]\r\n        );\r\n        resolve(this.state.channelsMeta[channelID]);\r\n      } else {\r\n        let channelAddress;\r\n\r\n        await EPNSCoreHelper.getChannelAddressFromID(\r\n          channelID,\r\n          this.state.epnsReadProvider\r\n        )\r\n          .then(async (response) => {\r\n            channelAddress = response;\r\n            await this.getChannelMetaViaAddressAsync(channelAddress).then(\r\n              (response) => {\r\n                // update the channel cache before resolving\r\n                this.state.channelsMeta[channelID] = response;\r\n                this.state.channelsMeta[channelAddress] = channelID;\r\n\r\n                // resolve\r\n                // console.log(\"getChannelMetaAsync() [Address: %s] --> %o\", channelAddress, response);\r\n                resolve(response);\r\n              }\r\n            );\r\n          })\r\n          .catch((err) => {\r\n            console.log(\"!!!Error, getChannelMetaAsync() --> %o\", err);\r\n            reject(err);\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  // To get a single channel meta via address\r\n  getChannelMetaViaAddressAsync = async (channelAddress) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (this.state.channelsMeta[channelAddress]) {\r\n        const channelID = this.state.channelsMeta[channelAddress];\r\n\r\n        console.log(\r\n          \"getChannelMetaViaAddressAsync() [CACHED] --> %o\",\r\n          this.state.channelsMeta[channelID]\r\n        );\r\n        resolve(this.state.channelsMeta[channelID]);\r\n      } else {\r\n        // Can't cache this :(, no way to know channel id\r\n        await EPNSCoreHelper.getChannelInfo(\r\n          channelAddress,\r\n          this.state.epnsReadProvider\r\n        )\r\n          .then((response) => {\r\n            // resolve\r\n            // console.log(\"getChannelMetaViaAddressAsync() [Address: %s] --> %o\", channelAddress, response);\r\n            resolve(response);\r\n          })\r\n          .catch((err) => {\r\n            console.log(\r\n              \"!!!Error, getChannelMetaViaAddressAsync() --> %o\",\r\n              err\r\n            );\r\n            reject(err);\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  getChannelSubscribers = async (channelAddress) => {\r\n    const cachedSubscribers = this.state.subscribers[channelAddress];\r\n    if (cachedSubscribers) {\r\n      return cachedSubscribers;\r\n    }\r\n    return postReq(\"/channels/get_subscribers\", {\r\n      channel: channelAddress,\r\n      op: \"read\",\r\n    })\r\n      .then(({ data }) => {\r\n        const subs = data.subscribers;\r\n        this.state.subscribers[channelAddress] = subs;\r\n        return subs;\r\n      })\r\n      .catch((err) => {\r\n        console.log(`getChannelSubscribers => ${err.message}`);\r\n        return [];\r\n      });\r\n  };\r\n\r\n  // CHANNELS INFO FUNCTIONS\r\n  // To get a single channel meta via id\r\n  getChannelJsonAsync = async (channelAddress) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (this.state.channelsJson[channelAddress]) {\r\n        // console.log(\"getChannelJsonAsync() [CACHED] --> %o\", this.state.channelsJson[channelAddress]);\r\n        resolve(this.state.channelsJson[channelAddress]);\r\n      } else {\r\n        await EPNSCoreHelper.getChannelJsonFromChannelAddress(\r\n          channelAddress,\r\n          this.state.epnsReadProvider\r\n        )\r\n          .then((response) => {\r\n            // First set the cache\r\n            this.state.channelsJson[channelAddress] = response;\r\n\r\n            // resolve\r\n            // console.log(\"getChannelJsonAsync() [Address: %s] --> %o\", channelAddress, response);\r\n            resolve(response);\r\n          })\r\n          .catch((err) => {\r\n            console.log(\"!!!Error, getChannelJsonAsync() --> %o\", err);\r\n            reject(err);\r\n          });\r\n      }\r\n    });\r\n  };\r\n}\r\n","import EPNSCoreHelper from 'helpers/EPNSCoreHelper';\r\nimport { ethers } from \"ethers\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\n\r\n// STATIC SINGLETON\r\nexport const UserEvents = {\r\n    SUBSCRIBED: \"Subscribed\",\r\n    UNSUBSCRIBED: \"Unsubscribed\",\r\n    PUBLIC_KEY_BROADCASTED: \"PublicKeyBroadcasted\",\r\n    CREATED_CHANNEL: \"CreatedChannel\",\r\n    DEACTIVATE_CHANNEL: \"DeactivateChannel\",\r\n}\r\n\r\nexport default class UsersDataStore {\r\n    static instance = UsersDataStore.instance || new UsersDataStore();\r\n\r\n    state = {\r\n      usersCount: -1,\r\n      userMeta: null,\r\n      ownerMeta: null,\r\n\r\n      callbacks: [],\r\n\r\n      account: null,\r\n      epnsReadProvider: null,\r\n      epnsCommReadProvider: null\r\n    }\r\n\r\n    // init\r\n    init = (account, epnsReadProvider, epnsCommReadProvider) => {\r\n      // set account\r\n      this.state.account = account;\r\n\r\n      // First attach listeners then overwrite the old one if any\r\n      this.resetUsersListeners();\r\n      this.state.epnsReadProvider = epnsReadProvider;\r\n      this.state.epnsCommReadProvider = epnsCommReadProvider;\r\n      this.initUsersListenersAsync();\r\n\r\n      // next get store user count & user meta\r\n      this.getOwnerMetaAsync();\r\n      this.getUsersCountAsync();\r\n      this.getUserMetaAsync();\r\n    }\r\n\r\n    // RESET LISTENERS\r\n    resetUsersListeners = () => {\r\n      // only proceed if a read provider is attached\r\n      if (this.state.epnsReadProvider) {\r\n        this.state.epnsCommReadProvider.removeAllListeners(\"Subscribe\");\r\n        this.state.epnsCommReadProvider.removeAllListeners(\"Unsubscribe\");\r\n        this.state.epnsCommReadProvider.removeAllListeners(\"PublicKeyRegistered\");\r\n        this.state.epnsReadProvider.removeAllListeners(\"AddChannel\");\r\n        this.state.epnsReadProvider.removeAllListeners(\"DeactivateChannel\");\r\n      }\r\n\r\n      // reset user meta as well\r\n      this.state.userMeta = null;\r\n    }\r\n\r\n    // init LISTENERS\r\n    initUsersListenersAsync = async () => {\r\n      // Add Listeners\r\n      await this.listenForSubscribedAsync();\r\n      await this.listenForUnsubscribedAsync();\r\n\r\n      if (!this.state.userMeta || (this.state.userMeta && !this.state.userMeta.publicKeyRegistered)) {\r\n        await this.listenForPublicKeyBroadcastAsync();\r\n      }\r\n    }\r\n\r\n    // 1. Listen for Subscribe Async\r\n    listenForSubscribedAsync = async () => {\r\n      // TODO use the right contract comms\r\n      // const contract = this.state.epnsReadProvider;\r\n      // let filter = contract.filters.Subscribe(null, this.state.account);\r\n\r\n      // if (this.state.userMeta) {\r\n      //   this.state.userMeta.subscribedCount = this.state.userMeta.subscribedCount.add(1);\r\n      // }\r\n\r\n      // contract.on(filter, async (channel, user) => {\r\n      //   // then perform callbacks\r\n      //   if (this.state.callbacks[UserEvents.SUBSCRIBED]) {\r\n      //     for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.SUBSCRIBED])) {\r\n      //       if (callback) { callback(channel, user); }\r\n      //     }\r\n      //   }\r\n      // });\r\n    }\r\n\r\n    // 2. Listen for Unsubscribe Async\r\n    listenForUnsubscribedAsync = async () => {\r\n      // TODO Use the COMMUNICATOR CONTRACT\r\n      // const contract = this.state.epnsReadProvider;\r\n      // let filter = contract.filters.Unsubscribe(null, this.state.account);\r\n\r\n      // if (this.state.userMeta) {\r\n      //   this.state.userMeta.subscribedCount = this.state.userMeta.subscribedCount.sub(1);\r\n      // }\r\n\r\n      // contract.on(filter, async (channel, user) => {\r\n      //   // then perform callbacks\r\n      //   if (this.state.callbacks[UserEvents.UNSUBSCRIBED]) {\r\n      //     for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.UNSUBSCRIBED])) {\r\n      //       if (callback) { callback(channel, user); }\r\n      //     }\r\n      //   }\r\n      // });\r\n    }\r\n\r\n    // 3. Listen For Public Key Broadcast\r\n    listenForPublicKeyBroadcastAsync = async () => {\r\n        // TODO Use the COMMUNICATOR CONTRACT\r\n      // const contract = this.state.epnsReadProvider;\r\n      // let filter = contract.filters.PublicKeyRegistered(this.state.account, null);\r\n\r\n      // if (this.state.userMeta) {\r\n      //   this.state.userMeta.publicKeyRegistered = true;\r\n      // }\r\n\r\n      // contract.once(filter, async (channel, user) => {\r\n      //   // then perform callbacks\r\n      //   if (this.state.callbacks[UserEvents.UNSUBSCRIBED]) {\r\n      //     for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.UNSUBSCRIBED])) {\r\n      //       if (callback) { callback(channel, user); }\r\n      //     }\r\n      //   }\r\n      // });\r\n    }\r\n\r\n    // FOR CALLBACKS\r\n    addCallbacks = (callbackType, callbackID, callback) => {\r\n      // first check if callback already exists\r\n      if (!this.state.callbacks[callbackType]) {\r\n        this.state.callbacks[callbackType] = {};\r\n      }\r\n\r\n      if (!this.state.callbacks[callbackType][callbackID]) {\r\n        this.state.callbacks[callbackType][callbackID] = callback;\r\n      }\r\n    }\r\n\r\n    removeCallbacks = (callbackType, callbackID) => {\r\n      // first check if callback already exists\r\n      if (this.state.callbacks[callbackType][callbackID]) {\r\n        this.state.callbacks[callbackType][callbackID] = null;\r\n      }\r\n    }\r\n\r\n    // GET OWNER META\r\n    getOwnerMetaAsync = async () => {\r\n      const enableLogs = 0;\r\n\r\n      return new Promise ((resolve, reject) => {\r\n        if (this.state.ownerMeta) {\r\n          if (enableLogs) console.log(\"getOwnerMetaAsync() [CACHED] --> %o\", this.state.ownerMeta);\r\n          resolve(this.state.ownerMeta);\r\n        }\r\n        else {\r\n          EPNSCoreHelper.getOwnerInfo(this.state.epnsReadProvider)\r\n            .then(response => {\r\n              this.state.ownerMeta = response;\r\n\r\n              if (enableLogs) console.log(\"getOwnerMetaAsync() --> %o\", response);\r\n              resolve(this.state.ownerMeta);\r\n            })\r\n            .catch(err => {\r\n              console.log(\"!!!Error, getOwnerMetaAsync() --> %o\", err);\r\n              reject(err);\r\n            });\r\n        }\r\n      });\r\n    }\r\n\r\n    // USERS COUNT\r\n    getUsersCountAsync = async () => {\r\n      return new Promise (async (resolve, reject) => {\r\n        if (this.state.channelsCount == -1) {\r\n          // Count not set, get and set it first\r\n          const count = EPNSCoreHelper.getTotalNumberOfUsers(this.state.epnsReadProvider)\r\n            .then(response => {\r\n              this.state.usersCount = response;\r\n              console.log(\"getUsersCountAsync() --> %o\", response);\r\n              resolve(this.state.usersCount)\r\n            })\r\n            .catch(err => { console.log(\"!!!Error, getUsersCountAsync() --> %o\", err); reject(err); });\r\n        }\r\n        else {\r\n          resolve(this.state.usersCount);\r\n        }\r\n      });\r\n    }\r\n\r\n    incrementUsersCountAsync = async (incrementCount) => {\r\n      return new Promise ((resolve, reject) => {\r\n        this.getUsersCountAsync()\r\n          .then(response => {\r\n            this.state.usersCount = response + incrementCount;\r\n            console.log(\"incrementChannelsCountAsync() --> %d\", this.state.usersCount);\r\n            resolve(this.state.usersCount);\r\n          })\r\n          .catch(err => { console.log(\"!!!Error, getUsersCountAsync() --> %o\", err); reject(err); });\r\n      });\r\n    }\r\n\r\n    // GET USER META\r\n    getUserMetaAsync = async () => {\r\n      const enableLogs = 0;\r\n\r\n      return new Promise ((resolve, reject) => {\r\n        if (this.state.userMeta) {\r\n          if (enableLogs) console.log(\"getUserMetaAsync() [CACHED] --> %o\", this.state.userMeta);\r\n          resolve(this.state.userMeta);\r\n        }\r\n        else {\r\n          EPNSCoreHelper.getUserInfo(this.state.account, this.state.epnsCommReadProvider)\r\n            .then(response => {\r\n              this.state.userMeta = response;\r\n\r\n              if (enableLogs) console.log(\"getUserMetaAsync() --> %o\", this.state.userMeta);\r\n              resolve(this.state.userMeta);\r\n            })\r\n            .catch(err => {\r\n              console.log(\"!!!Error, getUserMetaAsync() --> %o\", err);\r\n              reject(err);\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n}\r\n","/**\r\n * This file helps us maintain a global state of all contracts to be used across the application\r\n * This is used to prevent duplication of logic and instantiating contracts multiple times\r\n * This is also used to prevent passing props everywhere and making the code ugly\r\n */\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  ZERO_ADDRESS: \"0x0000000000000000000000000000000000000000\",\r\n  epnsReadProvider: null, // the core contract reader\r\n  epnsWriteProvider: null, // the core contract with signer\r\n  epnsCommReadProvider: null, // the communicator contract reader\r\n  epnsCommWriteProvider: null, // the communicator write contract with signer\r\n  pushAdminAddress: null, // the address of the push admin\r\n};\r\n\r\nexport const contractSlice = createSlice({\r\n  name: \"contracts\",\r\n  initialState,\r\n  reducers: {\r\n    setCoreReadProvider: (state, action) => {\r\n      state.epnsReadProvider = action.payload;\r\n    },\r\n    setCoreWriteProvider: (state, action) => {\r\n      state.epnsWriteProvider = action.payload;\r\n    },\r\n    setCommunicatorReadProvider: (state, action) => {\r\n      state.epnsCommReadProvider = action.payload;\r\n    },\r\n    setCommunicatorWriteProvider: (state, action) => {\r\n      state.epnsCommWriteProvider = action.payload;\r\n    },\r\n    setPushAdmin: (state, action) => {\r\n      state.pushAdminAddress = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const {\r\n  setCoreReadProvider,\r\n  setCoreWriteProvider,\r\n  setCommunicatorReadProvider,\r\n  setCommunicatorWriteProvider,\r\n  setPushAdmin\r\n} = contractSlice.actions;\r\n\r\nexport default contractSlice.reducer;\r\n","import React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\n\r\nimport styled, { css } from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport NotificationToast from \"components/NotificationToast\";\r\n\r\nimport Feedbox from \"segments/Feedbox\";\r\n\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport UsersDataStore from \"singletons/UsersDataStore\";\r\n\r\nimport {\r\n  setPushAdmin,\r\n} from \"redux/slices/contractSlice\";\r\n\r\nimport GLOBALS from \"config/Globals\";\r\n\r\n// Create Header\r\nfunction InboxPage() {\r\n  ReactGA.pageview(\"/inbox\");\r\n\r\n  const dispatch = useDispatch();\r\n  const { account } = useWeb3React();\r\n  const {\r\n    epnsReadProvider,\r\n    epnsCommReadProvider,\r\n  } = useSelector((state) => state.contracts);\r\n\r\n  // toast related section\r\n  const [toast, showToast] = React.useState(null);\r\n  const clearToast = () => showToast(null);\r\n  \r\n  //clear toast variable after it is shown\r\n  React.useEffect(() => {\r\n    if (toast) {\r\n      clearToast();\r\n    }\r\n  }, [toast]);\r\n  // toast related section\r\n\r\n  /**\r\n   * When we instantiate the contract instances, fetch basic information about the user\r\n   * Corresponding channel owned.\r\n   */\r\n  React.useEffect(() => {\r\n    if (!epnsReadProvider || !epnsCommReadProvider) return;\r\n    \r\n    // save push admin to global state\r\n    epnsReadProvider.pushChannelAdmin()\r\n    .then((response) => {\r\n      dispatch(setPushAdmin(response));\r\n    })\r\n    .catch(err =>{\r\n      console.log({err})\r\n    });\r\n\r\n    // EPNS Read Provider Set\r\n    if (epnsReadProvider != null && epnsCommReadProvider != null) {\r\n      // Instantiate Data Stores\r\n      UsersDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      ChannelsDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n    }\r\n  }, [epnsReadProvider, epnsCommReadProvider]);\r\n\r\n  // Render\r\n  return (\r\n    <Container>\r\n      <Feedbox />\r\n      {toast && (\r\n        <NotificationToast notification={toast} clearToast={clearToast} />\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  flex-direction: column;\r\n  background: ${props => props.theme.mainBg};\r\n  height: calc(100vh - ${GLOBALS.CONSTANTS.HEADER_HEIGHT}px - 52px - ${props => props.theme.interfaceTopPadding});\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n`;\r\n\r\n// Export Default\r\nexport default InboxPage;\r\n","import dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\nexport default  {\r\n    etherscanToken: process.env.REACT_APP_INFURA_API_KEY || \"\"\r\n}\r\n","import React, {useRef, useState} from 'react';\r\nimport { useClick, useClickAway } from 'react-use';\r\nimport styled from 'styled-components';\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport {Item, H2, H3, Span, Button, Input} from 'components/SharedStyling';\r\n\r\nconst ethers = require('ethers');\r\n\r\n\r\nexport default function AliasVerificationModal({\r\n    onClose,onSuccess, verificationStatus\r\n}) {\r\n    const { active, error, account, library, chainId } = useWeb3React();\r\n    const signer = library.getSigner(account);\r\n\r\n    const modalRef = useRef(null);\r\n    const polygonCommsContract = new ethers.Contract(addresses.epnsPolyComm, abis.epnsComm, signer);\r\n    const [mainAdress, setMainAddress] = useState('');\r\n    const [loading, setLoading] = useState('');\r\n\r\n    // Form signer and contract connection\r\n    useClickAway(modalRef, onClose);\r\n\r\n    const submitAlias = () => {\r\n        setLoading('loading')\r\n        const anotherSendTxPromise = polygonCommsContract.verifyChannelAlias(mainAdress);\r\n        anotherSendTxPromise\r\n        .then(async (tx) => {\r\n            console.log(tx);\r\n            setLoading(\"Transaction Sent!\");\r\n\r\n            setTimeout(() => {\r\n                onSuccess();\r\n                onClose();\r\n            }, 2000);\r\n\r\n            // await tx.wait(1);\r\n            // setLoading(\"Transaction Mined!\");\r\n        })\r\n        .catch(() => {\r\n            setLoading('There was an error');\r\n            setTimeout(() => {\r\n                setLoading('')\r\n            }, 2000)\r\n        })\r\n    };\r\n    \r\n\r\n    return (\r\n        <Overlay>\r\n            <AliasModal ref={modalRef}>\r\n                <Item align=\"flex-start\">\r\n                    <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n                    <Span weight=\"200\">Verify </Span><Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Alias</Span>\r\n                    </H2>\r\n                    {\r\n                        verificationStatus === null ?\r\n                        (\r\n                            <H3>There has been an error in the verification of your alias, Please contact the admin</H3>\r\n                        ) : (\r\n                            <H3>Before you can use this channel on this chain, you first need to verify your Alias.</H3>\r\n                        )\r\n                    }\r\n                </Item>\r\n                {\r\n                    verificationStatus !== null && (\r\n                        <>\r\n                            <Item align=\"flex-start\">\r\n                                <CustomInput\r\n                                    required\r\n                                    placeholder=\"Enter ethereum wallet address of this channel\"\r\n                                    radius=\"4px\"\r\n                                    padding=\"12px\"\r\n                                    border=\"1px solid #674c9f\"\r\n                                    bg=\"#fff\"\r\n                                    value={mainAdress}\r\n                                    onChange={(e) => {setMainAddress(e.target.value)}}\r\n                                />\r\n                            </Item>\r\n                            <Item margin=\"15px 0px 0px 0px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\r\n                                <Button\r\n                                    bg='#e20880'\r\n                                    color='#fff'\r\n                                    flex=\"1\"\r\n                                    radius=\"0px\"\r\n                                    padding=\"20px 10px\"\r\n                                    disabled={mainAdress.length !== 42}\r\n                                    onClick={submitAlias}\r\n                                >\r\n                                    { loading && <Loader\r\n                                        type=\"Oval\"\r\n                                        color=\"#FFF\"\r\n                                        height={16}\r\n                                        width={16}\r\n                                        />\r\n                                    }\r\n                                    <StyledInput\r\n                                        cursor=\"hand\"\r\n                                        textTransform=\"uppercase\"\r\n                                        color=\"#fff\" weight=\"400\"\r\n                                        size=\"0.8em\" spacing=\"0.2em\"\r\n                                        value={loading ? loading : \"Verify Alias\"}\r\n                                    />\r\n                                </Button>\r\n                            </Item>\r\n                        </>\r\n                    )\r\n                }\r\n            </AliasModal>\r\n        </Overlay>\r\n    )\r\n}\r\n\r\nconst StyledInput = styled(Input)`\r\n    width: 100%;\r\n    text-align: center;\r\n    caret-color: transparent;\r\n`\r\n\r\nconst CustomInput = styled(Input)`\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin: 20px 0px;\r\n`;\r\n\r\nconst Overlay = styled.div`\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0,0,0,0.85);\r\n    height: 100%;\r\n    width: 100%;\r\n    z-index: 1000;\r\n    position: fixed;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow-y: scroll;\r\n`;\r\n\r\nconst AliasModal = styled.div`\r\n    padding: 20px 30px;\r\n    background: white;\r\n`;","import React from \"react\";\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport { useWeb3React } from '@web3-react/core';\r\n\r\n\r\n// Other Information URLs\r\nfunction ViewInfoItem() {\r\n  // render\r\n  return (\r\n    <>\r\n    <Container >\r\n      <ChannelInfo>\r\n        <ChannelTitle>\r\n          <>\r\n          <AppLinkText>\r\n            <AppLink href={`${process.env.REACT_APP_BROWSER_EXTENSION_URL}`} target=\"_blank\" rel=\"nofollow\">\r\n              Download EPNS Browser Extension\r\n            </AppLink>\r\n          </AppLinkText>\r\n          \r\n          </>\r\n        </ChannelTitle>\r\n      </ChannelInfo>\r\n    </Container>\r\n    <Container >\r\n      <ChannelInfo>\r\n        <ChannelTitle>\r\n          <>\r\n          <AppLinkText>\r\n            <AppLink href={`${process.env.REACT_APP_IOS_STAGING_DAPP_URL}`} target=\"_blank\" rel=\"nofollow\">\r\n              Download EPNS App (iOS)\r\n            </AppLink>\r\n          </AppLinkText>\r\n           For iOS Users\r\n          </>\r\n        </ChannelTitle>\r\n      </ChannelInfo>\r\n    </Container>\r\n    <Container >\r\n      <ChannelInfo>\r\n        <ChannelTitle>\r\n          <>\r\n          <AppLinkText>\r\n            <AppLink href={`${process.env.REACT_APP_ANDROID_STAGING_DAPP_URL}`} target=\"_blank\" rel=\"nofollow\">\r\n              Download EPNS App (Android)\r\n            </AppLink>\r\n          </AppLinkText>\r\n           For Android Users\r\n          </>\r\n        </ChannelTitle>\r\n      </ChannelInfo>\r\n    </Container>\r\n    <Container >\r\n      <ChannelInfo>\r\n        <ChannelTitle>\r\n          <ChannelTitleLink href={process.env.REACT_APP_HOW_TO_GUIDE} target=\"_blank\" rel=\"nofollow\">\r\n            Click here for our How to Guides\r\n          </ChannelTitleLink>\r\n        </ChannelTitle>\r\n      </ChannelInfo>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  // display: flex;\r\n  // flex-wrap: wrap;\r\n\r\n  background: ${props => props.theme.mainBg};\r\n\r\n  color:${props => props.theme.color};\r\n  border-radius: 10px;\r\n  border: 1px solid rgb(237, 237, 237);\r\n\r\n  margin: 15px 0px;\r\n  justify-content: center;\r\n  padding: 10px;\r\n`\r\n\r\nconst ChannelTitleLink = styled.a`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n  &:hover {\r\n    text-decoration: underline;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\nconst AppLink = styled.a`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n  &:hover {\r\n    text-decoration: underline;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\nconst AppLinkText = styled.div`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n`\r\nconst ChannelInfo = styled.div`\r\n  flex: 1;\r\n  margin: 5px 10px;\r\n  min-width: 120px;\r\n  flex-grow: 4;\r\n  flex-direction: column;\r\n  display: flex;\r\n`\r\n\r\nconst ChannelTitle = styled.div`\r\n  margin-bottom: 5px;\r\n`\r\n\r\n// Export Default\r\nexport default ViewInfoItem;\r\n","import React from \"react\";\r\nimport styled, { css } from 'styled-components';\r\nimport Loader from 'react-loader-spinner'\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\n\r\nimport ViewInfoItem from \"components/ViewInfoItem\";\r\n\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\n// Other Information section\r\nfunction  Info() {\r\n  const { account, library } = useWeb3React();\r\n\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  return (\r\n    <Container>\r\n      {loading &&\r\n        <ContainerInfo>\r\n          <Loader\r\n           type=\"Oval\"\r\n           color=\"#35c5f3\"\r\n           height={40}\r\n           width={40}\r\n          />\r\n        </ContainerInfo>\r\n      }\r\n\r\n      {!loading && controlAt == 0 &&\r\n      <>\r\n        <InfoBox>\r\n          <ViewInfoItem/>\r\n        </InfoBox>\r\n      </>\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 80vh;\r\n`\r\n\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`\r\nconst InfoBox = styled.div`\r\n  padding: 10px 20px;\r\n  display: block;\r\n  align-self: stretch;\r\n  background: ${props => props.theme.mainBg};\r\n`\r\n\r\n\r\n// Export Default\r\nexport default  Info;\r\n","/**\r\n * This file helps us maintain the spamnotifications fetched in state, so when tabs are switched we can retain the notification information\r\n */\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n    page: 1, //the current page\r\n    notifications: [],// the actual notifications\r\n    finishedFetching: false,\r\n    toggler: false\r\n}\r\n\r\nexport const contractSlice = createSlice({\r\n    name: \"spam\",\r\n    initialState,\r\n    reducers: {\r\n        toggleToggler: (state) => {\r\n            state.toggler = !state.toggler;\r\n        },\r\n        resetState: (state) => {\r\n            state.page = initialState.page;\r\n            state.notifications = initialState.notifications;\r\n            state.finishedFetching = initialState.finishedFetching;\r\n        },\r\n        addPaginatedNotifications: (state, action) => {\r\n            state.notifications = [ ...state.notifications, ...action.payload ];\r\n            state.page += 1;\r\n        },\r\n        incrementPage: (state) => {\r\n            state.page += 1;\r\n        },\r\n        addNewNotification: (state, action) => {\r\n            state.notifications = [{...action.payload}, ...state.notifications]\r\n        },\r\n        setFinishedFetching: (state) => {\r\n            state.finishedFetching = true;\r\n        },\r\n        updateTopNotifications: (state, action) => {\r\n            state.notifications = [...action.payload.notifs, ...state.notifications.slice(action.payload.pageSize)];\r\n            console.log({sn: state.notifications});\r\n        }\r\n    }\r\n});\r\n\r\nexport const {\r\n    toggleToggler,\r\n    addPaginatedNotifications,\r\n    incrementPage,\r\n    addNewNotification,\r\n    setFinishedFetching,\r\n    resetState,\r\n    updateTopNotifications\r\n} = contractSlice.actions;\r\n\r\nexport default contractSlice.reducer;","import React, {useState} from \"react\";\r\nimport styled, { useTheme } from 'styled-components';\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { envConfig } from \"@project/contracts\";\r\nimport {\r\n  api,\r\n  utils,\r\n  NotificationItem,\r\n} from \"@epnsproject/frontend-sdk-staging\";\r\nimport {\r\n  addPaginatedNotifications,\r\n  incrementPage,\r\n  setFinishedFetching,\r\n} from \"redux/slices/spamSlice\";\r\nimport { postReq } from \"api\";\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport { updateTopNotifications } from \"redux/slices/notificationSlice\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\nconst NOTIFICATIONS_PER_PAGE = 10;\r\n// Create Header\r\nfunction SpamBox({ currentTab }) {\r\n  const dispatch = useDispatch();\r\n  const { account, chainId, library } = useWeb3React();\r\n  const { epnsCommReadProvider } = useSelector(\r\n    (state: any) => state.contracts\r\n  );\r\n\r\n  const themes = useTheme();\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const { notifications, page, finishedFetching } = useSelector((state: any) => state.spam);\r\n  const { toggle } = useSelector(\r\n    (state: any) => state.notifications\r\n  );\r\n  const EPNS_DOMAIN = {\r\n    name: \"EPNS COMM V1\",\r\n    chainId: chainId,\r\n    verifyingContract: epnsCommReadProvider?.address,\r\n  };\r\n\r\n  const [bgUpdateLoading, setBgUpdateLoading] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  const loadNotifications = async () => {\r\n    if (loading || finishedFetching) return;\r\n    setLoading(true);\r\n    try {\r\n      const { count, results } = await api.fetchSpamNotifications(\r\n        account,\r\n        NOTIFICATIONS_PER_PAGE,\r\n        page,\r\n        envConfig.apiUrl\r\n      );\r\n      const parsedResponsePromise = utils\r\n        .parseApiResponse(results)\r\n        .map(async (elem: any, i: any) => {\r\n          elem.channel = results[i].channel;\r\n          const {\r\n            data: { subscribers },\r\n          } = await postReq(\"/channels/get_subscribers\", {\r\n            channel: results[i].channel,\r\n            op: \"read\",\r\n          });\r\n          elem.subscribers = subscribers;\r\n          return { ...elem };\r\n        });\r\n      const parsedResponse = await Promise.all(parsedResponsePromise);\r\n      // get all the subsc\r\n      dispatch(addPaginatedNotifications(parsedResponse));\r\n      if (count === 0) {\r\n        dispatch(setFinishedFetching());\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchLatestNotifications = async () => {\r\n    if (loading || bgUpdateLoading) return;\r\n    setBgUpdateLoading(true);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { count, results } = await api.fetchSpamNotifications(\r\n        account,\r\n        NOTIFICATIONS_PER_PAGE,\r\n        1,\r\n        envConfig.apiUrl\r\n      );\r\n      if (!notifications.length) {\r\n        dispatch(incrementPage());\r\n      }\r\n      const parsedResponsePromise = utils\r\n        .parseApiResponse(results)\r\n        .map(async (elem: any, i: any) => {\r\n          elem.channel = results[i].channel;\r\n          const {\r\n            data: { subscribers },\r\n          } = await postReq(\"/channels/get_subscribers\", {\r\n            channel: results[i].channel,\r\n            op: \"read\",\r\n          });\r\n          elem.subscribers = subscribers;\r\n          return { ...elem };\r\n        });\r\n      const parsedResponse = await Promise.all(parsedResponsePromise);\r\n      dispatch(\r\n        updateTopNotifications({\r\n          notifs: parsedResponse,\r\n          pageSize: NOTIFICATIONS_PER_PAGE,\r\n        })\r\n      );\r\n      if (count === 0) {\r\n        dispatch(setFinishedFetching());\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setBgUpdateLoading(false);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (account && currentTab === \"spambox\") {\r\n      fetchLatestNotifications();\r\n    }\r\n  }, [account, currentTab]);\r\n\r\n  React.useEffect(() => {\r\n    if (epnsCommReadProvider) {\r\n      loadNotifications();\r\n    }\r\n  }, [epnsCommReadProvider, account]);\r\n\r\n  //function to query more notifications\r\n  const handlePagination = async () => {\r\n    loadNotifications();\r\n    dispatch(incrementPage());\r\n  };\r\n\r\n  const showWayPoint = (index: any) => {\r\n    return (\r\n      Number(index) === notifications.length - 1 &&\r\n      !finishedFetching &&\r\n      !bgUpdateLoading\r\n    );\r\n  };\r\n\r\n  const onSubscribeToChannel = async (channelAddress) => {\r\n    let txToast;\r\n    const type = {\r\n      Subscribe: [\r\n        { name: \"channel\", type: \"address\" },\r\n        { name: \"subscriber\", type: \"address\" },\r\n        { name: \"action\", type: \"string\" },\r\n      ],\r\n    };\r\n    const message = {\r\n      channel: channelAddress,\r\n      subscriber: account,\r\n      action: \"Subscribe\",\r\n    };\r\n\r\n    const signature = await library\r\n      .getSigner(account)\r\n      ._signTypedData(EPNS_DOMAIN, type, message);\r\n\r\n    return postReq(\"/channels/subscribe_offchain\", {\r\n      signature,\r\n      message,\r\n      op: \"write\",\r\n      chainId,\r\n      contractAddress: epnsCommReadProvider.address,\r\n    });\r\n  };\r\n\r\n  const isSubscribedFn = async (subscribers: any) => {\r\n    return subscribers\r\n      .map((a) => a.toLowerCase())\r\n      .includes(account.toLowerCase());\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n      <Container>\r\n        {bgUpdateLoading && (\r\n          <div style={{ marginTop: \"10px\" }}>\r\n            <Loader type=\"Oval\" color=\"#35c5f3\" height={40} width={40} />\r\n          </div>\r\n        )}\r\n        {notifications && (\r\n          <Items id=\"scrollstyle-secondary\">\r\n            {notifications.map((oneNotification, index) => {\r\n              const {\r\n                cta,\r\n                title,\r\n                message,\r\n                app,\r\n                icon,\r\n                image,\r\n                channel,\r\n                subscribers,\r\n              } = oneNotification;\r\n              // render the notification item\r\n              return (\r\n                <div key={`${message}+${title}`}>\r\n                  {showWayPoint(index) && !loading && (\r\n                    <Waypoint onEnter={handlePagination} />\r\n                  )}\r\n                  <NotificationItem\r\n                    notificationTitle={title}\r\n                    notificationBody={message}\r\n                    cta={cta}\r\n                    app={app}\r\n                    icon={icon}\r\n                    image={image}\r\n                    theme={themes.scheme}\r\n                    subscribeFn={(e) => {\r\n                      e?.stopPropagation();\r\n                      onSubscribeToChannel(channel);\r\n                    }}\r\n                    isSpam\r\n                    isSubscribedFn={async () => isSubscribedFn(subscribers)}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </Items>\r\n        )}\r\n        {loading && !bgUpdateLoading && (\r\n          <Loader type=\"Oval\" color=\"#35c5f3\" height={40} width={40} />\r\n        )}\r\n        {!loading && !notifications.length && (\r\n          <CenteredContainerInfo>\r\n            <DisplayNotice\r\n              title=\"You currently have no spam notifications.\"\r\n              theme=\"third\"\r\n            />\r\n          </CenteredContainerInfo>\r\n        )}\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nconst CenteredContainerInfo = styled.div`\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n`;\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n  max-height: 100vh;\r\n\r\n  // padding: 20px;\r\n  // font-size: 16px;\r\n  // display: flex;\r\n  // font-weight: 200;\r\n  // align-content: center;\r\n  // align-items: center;\r\n  // justify-content: center;\r\n  // width: 100%;\r\n  // min-height: 40vh;\r\n`;\r\n\r\n// Export Default\r\nexport default SpamBox;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { envConfig } from \"@project/contracts\";\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport SpamBox from \"segments/spam\";\r\nimport {\r\n  api,\r\n  utils,\r\n  NotificationItem,\r\n} from \"@epnsproject/frontend-sdk-staging\";\r\nimport {\r\n  addPaginatedNotifications,\r\n  incrementPage,\r\n  setFinishedFetching,\r\n  resetState,\r\n  updateTopNotifications,\r\n} from \"redux/slices/notificationSlice\";\r\n\r\nconst NOTIFICATIONS_PER_PAGE = 10;\r\n// Create Header\r\nfunction Feedbox() {\r\n  const dispatch = useDispatch();\r\n  const { account } = useWeb3React();\r\n  const { epnsCommReadProvider } = useSelector((state: any) => state.contracts);\r\n  const { notifications, page, finishedFetching, toggle } = useSelector(\r\n    (state: any) => state.notifications\r\n  );\r\n\r\n  const [bgUpdateLoading, setBgUpdateLoading] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [currentTab, setCurrentTab] = React.useState(\"inbox\");\r\n\r\n  const loadNotifications = async () => {\r\n    if (loading || finishedFetching) return;\r\n    setLoading(true);\r\n    try {\r\n      const { count, results } = await api.fetchNotifications(\r\n        account,\r\n        NOTIFICATIONS_PER_PAGE,\r\n        page,\r\n        envConfig.apiUrl\r\n      );\r\n      const parsedResponse = utils.parseApiResponse(results);\r\n      dispatch(addPaginatedNotifications(parsedResponse));\r\n      if (count === 0) {\r\n        dispatch(setFinishedFetching());\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const fetchLatestNotifications = async () => {\r\n    if (loading || bgUpdateLoading) return;\r\n    setBgUpdateLoading(true);\r\n    setLoading(true);\r\n    try {\r\n      const { count, results } = await api.fetchNotifications(\r\n        account,\r\n        NOTIFICATIONS_PER_PAGE,\r\n        1,\r\n        envConfig.apiUrl\r\n      );\r\n      if (!notifications.length) {\r\n        dispatch(incrementPage());\r\n      }\r\n      const parsedResponse = utils.parseApiResponse(results);\r\n      // replace the first 20 notifications with these\r\n      dispatch(\r\n        updateTopNotifications({\r\n          notifs: parsedResponse,\r\n          pageSize: NOTIFICATIONS_PER_PAGE,\r\n        })\r\n      );\r\n      if (count === 0) {\r\n        dispatch(setFinishedFetching());\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setBgUpdateLoading(false);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (account && currentTab === \"inbox\") {\r\n      fetchLatestNotifications();\r\n    }\r\n  }, [account, currentTab]);\r\n\r\n  React.useEffect(() => {\r\n    fetchLatestNotifications();\r\n  }, [toggle]);\r\n\r\n  //function to query more notifications\r\n  const handlePagination = async () => {\r\n    loadNotifications();\r\n    dispatch(incrementPage());\r\n  };\r\n\r\n  const showWayPoint = (index: any) => {\r\n    return (\r\n      Number(index) === notifications.length - 1 &&\r\n      !finishedFetching &&\r\n      !bgUpdateLoading\r\n    );\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <FullWidth>\r\n      <SpamBox currentTab={currentTab} />\r\n    </FullWidth>\r\n  );\r\n}\r\n\r\nconst FullWidth = styled.div`\r\n  width: 100%;\r\n`;\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Button = styled.div`\r\n  border: 0;\r\n  outline: 0;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-box-pack: center;\r\n  -webkit-justify-content: center;\r\n  -ms-flex-pack: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  background: ${(props: any) => (props.spam ? \"#e20880\" : \"#674C9F\")};\r\n  min-width: 100px;\r\n  width: 45%;\r\n  cursor: ${(props: any) => (props.active ? \"not-allowed\" : \"pointer\")};\r\n  opacity: ${(props: any) => (props.active ? 0.5 : 1)};\r\n\r\n  &:hover {\r\n    opacity: ${(props: any) => (props.active ? 0.5 : 0.8)};\r\n  }\r\n`;\r\n\r\nconst EmptyWrapper = styled.div`\r\n  padding-top: 50px;\r\n  padding-bottom: 50px;\r\n`;\r\nconst CenteredContainerInfo = styled.div`\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  background: #fafafa;\r\n`;\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n  max-height: 100vh;\r\n\r\n  // padding: 20px;\r\n  // font-size: 16px;\r\n  // display: flex;\r\n  // font-weight: 200;\r\n  // align-content: center;\r\n  // align-items: center;\r\n  // justify-content: center;\r\n  // width: 100%;\r\n  // min-height: 40vh;\r\n`;\r\n\r\n// Export Default\r\nexport default Feedbox;\r\n","// Utility Helper Functions\r\nconst UtilityHelper = {\r\n  isMainnet : (chainId) => {\r\n    if (chainId === 1) {\r\n      return true;\r\n    }\r\n  },\r\n}\r\n\r\nexport default UtilityHelper;\r\n","const size = {\r\n  mobileS: '320px',\r\n  mobileM: '375px',\r\n  mobileL: '425px',\r\n  tablet: '768px',\r\n  laptop: '1024px',\r\n  laptopL: '1440px',\r\n  desktop: '2560px'\r\n}\r\n\r\nexport const Device = {\r\n  mobileS: `(max-width: ${size.mobileS})`,\r\n  mobileM: `(max-width: ${size.mobileM})`,\r\n  mobileL: `(max-width: ${size.mobileL})`,\r\n  tablet: `(max-width: ${size.tablet})`,\r\n  laptop: `(max-width: ${size.laptop})`,\r\n  laptopL: `(max-width: ${size.laptopL})`,\r\n  desktop: `(max-width: ${size.desktop})`,\r\n  desktopL: `(max-width: ${size.desktop})`\r\n};\r\n","/**\r\n * This file helps us maintain the channels fetched in state, such that when we leave the tab, the channels can be fetched from memory\r\n */\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  CHANNNEL_DEACTIVATED_STATE: 2,\r\n  CHANNEL_BLOCKED_STATE: 3,\r\n  CHANNEL_ACTIVE_STATE: 1,\r\n  CHANNEL_BLACKLIST: [], //a list of channels\r\n  page: 0,\r\n  channels: [], // the channels meta-data\r\n  channelsCache: {}, // a mapping of channel address to channel details\r\n};\r\n\r\nexport const contractSlice = createSlice({\r\n  name: \"channels\",\r\n  initialState,\r\n  reducers: {\r\n    setChannelMeta: (state, action) => {\r\n      state.channels = action.payload;\r\n    },\r\n    incrementPage: (state) => {\r\n      state.page += 1;\r\n    },\r\n    cacheChannelInfo: (state, action) => {\r\n      const { address, meta } = action.payload;\r\n      state.channelsCache[address] = meta;\r\n    },\r\n  },\r\n});\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const {\r\n  setChannelMeta,\r\n  incrementPage,\r\n  cacheChannelInfo,\r\n} = contractSlice.actions;\r\n\r\nexport default contractSlice.reducer;\r\n","import React, { useState } from \"react\";\r\nimport styled, { css, useTheme } from \"styled-components\";\r\nimport { Device } from \"assets/Device\";\r\n\r\nimport { toast as toaster } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.min.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport Skeleton from \"@yisheng90/react-loading\";\r\nimport { IoMdPeople } from \"react-icons/io\";\r\nimport { GoVerified } from \"react-icons/go\";\r\nimport { FaRegAddressCard } from \"react-icons/fa\";\r\nimport { AiOutlineShareAlt } from \"react-icons/ai\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\nimport { postReq } from \"api\";\r\nimport NotificationToast from \"components/NotificationToast\";\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport { cacheChannelInfo } from \"redux/slices/channelSlice\";\r\n\r\n// Create Header\r\nfunction ViewChannelItem({ channelObjectProp }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const themes = useTheme();\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n  const {\r\n    epnsReadProvider,\r\n    epnsWriteProvider,\r\n    epnsCommReadProvider,\r\n    pushAdminAddress,\r\n    ZERO_ADDRESS,\r\n  } = useSelector((state) => state.contracts);\r\n  const { canVerify } = useSelector((state) => state.admin);\r\n  const { channelsCache, CHANNEL_BLACKLIST } = useSelector(\r\n    (state) => state.channels\r\n  );\r\n  const { account, library, chainId } = useWeb3React();\r\n  const isOwner = channelObjectProp.addr === account;\r\n\r\n  const [channelObject, setChannelObject] = React.useState({});\r\n  const [channelJson, setChannelJson] = React.useState({});\r\n  const [subscribed, setSubscribed] = React.useState(true);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [memberCount, setMemberCount] = React.useState(0);\r\n  const [isPushAdmin, setIsPushAdmin] = React.useState(false);\r\n  const [isVerified, setIsVerified] = React.useState(false);\r\n  const [isBlocked, setIsBlocked] = React.useState(false);\r\n  const [vLoading, setvLoading] = React.useState(false);\r\n  const [bLoading, setBLoading] = React.useState(false);\r\n  const [txInProgress, setTxInProgress] = React.useState(false);\r\n  const [canUnverify, setCanUnverify] = React.useState(false);\r\n  const [verifierDetails, setVerifierDetails] = React.useState(null);\r\n  const [copyText, setCopyText] = React.useState(null);\r\n\r\n  // ------ toast related section\r\n  const isChannelBlacklisted = CHANNEL_BLACKLIST.includes(channelObject.addr);\r\n  const [toast, showToast] = React.useState(null);\r\n  const clearToast = () => showToast(null);\r\n\r\n  //clear toast variable after it is shown\r\n  React.useEffect(() => {\r\n    if (toast) {\r\n      clearToast();\r\n    }\r\n  }, [toast]);\r\n  // ------ toast related section\r\n\r\n  React.useEffect(() => {\r\n    if (!channelObject.addr) return;\r\n    if (channelObject.verifiedBy) {\r\n      // procced as usual\r\n      fetchChannelJson().catch((err) => alert(err.message));\r\n      setIsBlocked(\r\n        channelObject.channelState === 3 || channelObject.channelState === 2 //dont display channel if blocked //dont display channel if deactivated\r\n      );\r\n    } else {\r\n      // if this key (verifiedBy) is not present it means we are searching and should fetch the channel object from chain again\r\n      epnsReadProvider.channels(channelObject.addr).then((response) => {\r\n        setChannelObject({ ...response, addr: channelObject.addr });\r\n        fetchChannelJson();\r\n      });\r\n    }\r\n  }, [account, channelObject, chainId]);\r\n\r\n  React.useEffect(() => {\r\n    if (!channelObjectProp) return;\r\n    setChannelObject(channelObjectProp);\r\n  }, [channelObjectProp]);\r\n\r\n  React.useEffect(() => {\r\n    if (!isVerified || channelObject?.verifiedBy === ZERO_ADDRESS) return;\r\n    ChannelsDataStore.instance\r\n      .getChannelJsonAsync(channelObject.verifiedBy)\r\n      .then((verifierDetails) => {\r\n        setVerifierDetails(verifierDetails);\r\n      })\r\n      .catch((err) => {\r\n        console.log(channelObject.verifiedBy, err);\r\n      });\r\n  }, [isVerified, channelObject]);\r\n\r\n  const EPNS_DOMAIN = {\r\n    name: \"EPNS COMM V1\",\r\n    chainId: chainId,\r\n    verifyingContract: epnsCommReadProvider.address,\r\n  };\r\n  // to fetch channels\r\n  const fetchChannelJson = async () => {\r\n    try {\r\n      let channelJson = {};\r\n      setCopyText(channelObject.addr);\r\n      if (channelsCache[channelObject.addr]) {\r\n        channelJson = channelsCache[channelObject.addr];\r\n      } else {\r\n        channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(\r\n          channelObject.addr\r\n        );\r\n        dispatch(\r\n          cacheChannelInfo({\r\n            address: channelObject.addr,\r\n            meta: channelJson,\r\n          })\r\n        );\r\n      }\r\n      const channelSubscribers = await postReq(\"/channels/get_subscribers\", {\r\n        channel: channelObject.addr,\r\n        op: \"read\",\r\n      })\r\n        .then(({ data }) => {\r\n          const subs = data.subscribers;\r\n\r\n          return subs;\r\n        })\r\n        .catch((err) => {\r\n          console.log(`getChannelSubscribers => ${err.message}`);\r\n          return [];\r\n        });\r\n      const subscribed = channelSubscribers.find((sub) => {\r\n        return sub.toLowerCase() === account.toLowerCase();\r\n      });\r\n\r\n      setIsPushAdmin(pushAdminAddress === account);\r\n      setMemberCount(channelSubscribers.length);\r\n      setSubscribed(subscribed);\r\n      setIsVerified(\r\n        Boolean(\r\n          channelObject && channelObject.verifiedBy &&\r\n            (channelObject.verifiedBy !== ZERO_ADDRESS ||\r\n              channelObject.addr === pushAdminAddress)\r\n        )\r\n      );\r\n      setCanUnverify(channelObject.verifiedBy == account);\r\n      setChannelJson({ ...channelJson, addr: channelObject.addr });\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setIsBlocked(true);\r\n    }\r\n  };\r\n\r\n  // toast customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n    <Toaster>\r\n      <Loader type=\"Oval\" color={color} height={30} width={30} />\r\n      <ToasterMsg>{msg}</ToasterMsg>\r\n    </Toaster>\r\n  );\r\n\r\n  // to subscribe\r\n  const subscribe = async () => {\r\n    subscribeAction(false);\r\n  };\r\n  const formatAddress = (addressText) => {\r\n    return addressText.length > 40\r\n      ? `${addressText.slice(0, 4)}....${addressText.slice(36)}`\r\n      : addressText;\r\n  };\r\n\r\n  // Toastify\r\n  let notificationToast = () =>\r\n    toaster.dark(<LoaderToast msg=\"Preparing Notification\" color=\"#fff\" />, {\r\n      position: \"bottom-right\",\r\n      autoClose: false,\r\n      hideProgressBar: true,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n\r\n  const verifyChannel = () => {\r\n    setvLoading(true);\r\n    // post op\r\n    epnsWriteProvider\r\n      .verifyChannel(channelObject.addr)\r\n      .then(async (tx) => {\r\n        console.log(tx);\r\n        console.log(\"Transaction Sent!\");\r\n\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transaction sent\",\r\n          type: toaster.TYPE.INFO,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        // await tx.wait(1);\r\n        // console.log (\"Transaction Mined!\");\r\n        setIsVerified(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"!!!Error verifyChannel() --> %o\", err);\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transacion Failed: \" + err.error?.message || \"Unknown Error\",\r\n          type: toaster.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n      })\r\n      .finally(() => {\r\n        setvLoading(false);\r\n      });\r\n  };\r\n\r\n  const unverifyChannel = () => {\r\n    setvLoading(true);\r\n    epnsWriteProvider\r\n      .unverifyChannel(channelObject.addr)\r\n      .then(async (tx) => {\r\n        console.log(tx);\r\n        console.log(\"Transaction Sent!\");\r\n\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transaction sent\",\r\n          type: toaster.TYPE.INFO,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        await tx.wait(1);\r\n        console.log(\"Transaction Mined!\");\r\n        setIsVerified(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"!!!Error handleSendMessage() --> %o\", err);\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transacion Failed: \" + err.error?.message || \"Unknown Error\",\r\n          type: toaster.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n      });\r\n    setvLoading(false);\r\n  };\r\n  const blockChannel = () => {\r\n    setBLoading(true);\r\n    epnsWriteProvider\r\n      .blockChannel(channelObject.addr)\r\n      .then(async (tx) => {\r\n        console.log(tx);\r\n        console.log(\"Transaction Sent!\");\r\n\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transaction Sent\",\r\n          type: toaster.TYPE.INFO,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        // await tx.wait(1);\r\n        // console.log (\"Transaction Mined!\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"!!!Error handleSendMessage() --> %o\", err);\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transacion Failed: \" + err.error.message,\r\n          type: toaster.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n      })\r\n      .finally(() => {\r\n        // post op\r\n        setBLoading(false);\r\n        setIsBlocked(true);\r\n      });\r\n  };\r\n\r\n  const subscribeAction = async () => {\r\n    setTxInProgress(true);\r\n    let txToast;\r\n    try {\r\n      const type = {\r\n        Subscribe: [\r\n          { name: \"channel\", type: \"address\" },\r\n          { name: \"subscriber\", type: \"address\" },\r\n          { name: \"action\", type: \"string\" },\r\n        ],\r\n      };\r\n      const message = {\r\n        channel: channelObject.addr,\r\n        subscriber: account,\r\n        action: \"Subscribe\",\r\n      };\r\n\r\n      const signature = await library\r\n        .getSigner(account)\r\n        ._signTypedData(EPNS_DOMAIN, type, message);\r\n      txToast = toaster.dark(\r\n        <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n        {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        }\r\n      );\r\n\r\n      postReq(\"/channels/subscribe_offchain\", {\r\n        signature,\r\n        message,\r\n        op: \"write\",\r\n        chainId,\r\n        contractAddress: epnsCommReadProvider.address,\r\n      }).then((res) => {\r\n        setSubscribed(true);\r\n        setMemberCount(memberCount + 1);\r\n        toaster.update(txToast, {\r\n          render: \"Sucesfully opted into channel !\",\r\n          type: toaster.TYPE.SUCCESS,\r\n          autoClose: 5000,\r\n        });\r\n        console.log(res);\r\n        setTxInProgress(false);\r\n      });\r\n    } catch (err) {\r\n      toaster.update(txToast, {\r\n        render: \"There was an error opting into channel (\" + err.message + \")\",\r\n        type: toaster.TYPE.ERROR,\r\n        autoClose: 5000,\r\n      });\r\n      console.log(err);\r\n    } finally {\r\n      setTxInProgress(false);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = (address) => {\r\n    let hostname = window.location.hostname;\r\n    // if we are on localhost, attach the port\r\n    if (hostname === \"localhost\") {\r\n      hostname = hostname + \":3000\";\r\n    }\r\n    const url = `${hostname}/channels?channel=${address}`;\r\n    // fallback for non navigator browser support\r\n    if (navigator && navigator.clipboard) {\r\n      navigator.clipboard.writeText(url);\r\n    } else {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = url;\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n\r\n\r\n  };\r\n\r\n\r\n  const unsubscribeAction = async () => {\r\n    let txToast;\r\n    try {\r\n      const type = {\r\n        Unsubscribe: [\r\n          { name: \"channel\", type: \"address\" },\r\n          { name: \"unsubscriber\", type: \"address\" },\r\n          { name: \"action\", type: \"string\" },\r\n        ],\r\n      };\r\n      const message = {\r\n        channel: channelObject.addr,\r\n        unsubscriber: account,\r\n        action: \"Unsubscribe\",\r\n      };\r\n      const signature = await library\r\n        .getSigner(account)\r\n        ._signTypedData(EPNS_DOMAIN, type, message);\r\n\r\n      txToast = toaster.dark(\r\n        <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n        {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        }\r\n      );\r\n\r\n      postReq(\"/channels/unsubscribe_offchain\", {\r\n        signature,\r\n        message,\r\n        op: \"write\",\r\n        chainId,\r\n        contractAddress: epnsCommReadProvider.address,\r\n      })\r\n        .then((res) => {\r\n          setSubscribed(false);\r\n          setMemberCount(memberCount + 1);\r\n          toaster.update(txToast, {\r\n            render: \"Sucesfully opted out of channel !\",\r\n            type: toaster.TYPE.SUCCESS,\r\n            autoClose: 5000,\r\n          });\r\n          console.log(res);\r\n        })\r\n        .catch((err) => {\r\n          toaster.update(txToast, {\r\n            render:\r\n              \"There was an error opting into channel (\" + err.message + \")\",\r\n            type: toaster.TYPE.ERROR,\r\n            autoClose: 5000,\r\n          });\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          setTxInProgress(false);\r\n        });\r\n    } finally {\r\n      setTxInProgress(false);\r\n    }\r\n  };\r\n\r\n  if (isBlocked) return <></>;\r\n  if (isChannelBlacklisted) return <></>;\r\n\r\n  // render\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n    <Container key={channelObject.addr}>\r\n      <ChannelLogo>\r\n        <ChannelLogoOuter>\r\n          <ChannelLogoInner>\r\n            {loading ? (\r\n              <Skeleton color={themes.interfaceSkeleton}  height=\"100%\" />\r\n            ) : (\r\n              <ChannelLogoImg src={`${channelJson.icon}`} />\r\n            )}\r\n          </ChannelLogoInner>\r\n        </ChannelLogoOuter>\r\n      </ChannelLogo>\r\n\r\n      <ChannelInfo>\r\n        <ChannelTitle>\r\n          {loading ? (\r\n            <Skeleton color={themes.interfaceSkeleton} width=\"50%\" height={24} />\r\n          ) : (\r\n            <ChannelTitleLink\r\n              href={channelJson.url}\r\n              target=\"_blank\"\r\n              rel=\"nofollow\"\r\n              \r\n            >\r\n              {channelJson.name}\r\n              {isVerified && (\r\n                <Subscribers style={{ display: \"inline\", marginLeft: \"8px\" }}>\r\n                  <GoVerified size={18} color={themes.viewChannelVerifiedBadge} />\r\n                </Subscribers>\r\n              )}\r\n            </ChannelTitleLink>\r\n          )}\r\n        </ChannelTitle>\r\n\r\n        <ChannelDesc>\r\n          {loading ? (\r\n            <>\r\n              <SkeletonWrapper atH={5} atW={100}>\r\n                <Skeleton color={themes.interfaceSkeleton} width=\"100%\" height={5} />\r\n              </SkeletonWrapper>\r\n\r\n              <SkeletonWrapper atH={5} atW={100}>\r\n                <Skeleton color={themes.interfaceSkeleton} width=\"100%\" height={5} />\r\n              </SkeletonWrapper>\r\n\r\n              <SkeletonWrapper atH={5} atW={100}>\r\n                <Skeleton color={themes.interfaceSkeleton} width=\"40%\" height={5} />\r\n              </SkeletonWrapper>\r\n            </>\r\n          ) : (\r\n            <ChannelDescLabel>{channelJson.info}</ChannelDescLabel>\r\n          )}\r\n        </ChannelDesc>\r\n\r\n        <ChannelMeta>\r\n          {loading ? (\r\n            <>\r\n              <SkeletonWrapper atH={10} atW={30} marginBottom=\"0\">\r\n                <Skeleton color={themes.interfaceSkeleton} />\r\n              </SkeletonWrapper>\r\n            </>\r\n          ) : (\r\n            <ColumnFlex>\r\n              <FlexBox style={{ marginBottom: \"5px\" }}>\r\n                <Subscribers>\r\n                  <IoMdPeople size={20} color={themes.viewChannelSecondaryIcon} />\r\n                  <SubscribersCount>{memberCount}</SubscribersCount>\r\n                </Subscribers>\r\n\r\n                <Subscribers style={{ marginLeft: \"10px\" }}>\r\n                  <FaRegAddressCard size={20} color={themes.viewChannelSecondaryIcon} />\r\n                  <SubscribersCount\r\n                    onClick={() => {\r\n                      copyToClipboard(channelJson.addr);\r\n                      setCopyText(\"copied\");\r\n                    }}\r\n                    onMouseEnter={() => {\r\n                      setCopyText(\"click to copy\");\r\n                    }}\r\n                    onMouseLeave={() => {\r\n                      setCopyText(channelJson.addr);\r\n                    }}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  >\r\n                    <AiOutlineShareAlt />\r\n                    {formatAddress(copyText)}\r\n                  </SubscribersCount>\r\n                </Subscribers>\r\n              </FlexBox>\r\n              {verifierDetails && (\r\n                <Subscribers>\r\n                  <VerifiedBy>Verified by:</VerifiedBy>\r\n                  <VerifierIcon src={verifierDetails.icon} />\r\n                  <VerifierName>{verifierDetails.name}</VerifierName>\r\n                </Subscribers>\r\n              )}\r\n            </ColumnFlex>\r\n          )}\r\n        </ChannelMeta>\r\n      </ChannelInfo>\r\n      {!!account && !!library && (\r\n        <>\r\n          <LineBreak />\r\n          <ChannelActions>\r\n            {loading && (\r\n              <SkeletonButton>\r\n                <Skeleton color={themes.interfaceSkeleton} />\r\n              </SkeletonButton>\r\n            )}\r\n            {!loading && isPushAdmin && (\r\n              <SubscribeButton onClick={blockChannel} disabled={bLoading}>\r\n                {bLoading && (\r\n                  <ActionLoader>\r\n                    <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n                  </ActionLoader>\r\n                )}\r\n                <ActionTitle hideit={bLoading}>Block channel</ActionTitle>\r\n              </SubscribeButton>\r\n            )}\r\n            {!loading && (isPushAdmin || canVerify) && !isVerified && (\r\n              <SubscribeButton onClick={verifyChannel} disabled={vLoading}>\r\n                {vLoading && (\r\n                  <ActionLoader>\r\n                    <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n                  </ActionLoader>\r\n                )}\r\n                <ActionTitle hideit={vLoading}>Verify Channel</ActionTitle>\r\n              </SubscribeButton>\r\n            )}\r\n            {!loading && (isPushAdmin || canUnverify) && isVerified && (\r\n              <UnsubscribeButton onClick={unverifyChannel} disabled={vLoading}>\r\n                {vLoading && (\r\n                  <ActionLoader>\r\n                    <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n                  </ActionLoader>\r\n                )}\r\n                <ActionTitle hideit={vLoading}>Unverify Channel</ActionTitle>\r\n              </UnsubscribeButton>\r\n            )}\r\n            {!loading && !subscribed && (\r\n              <SubscribeButton onClick={subscribe} disabled={txInProgress}>\r\n                {txInProgress && (\r\n                  <ActionLoader>\r\n                    <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n                  </ActionLoader>\r\n                )}\r\n                <ActionTitle hideit={txInProgress}>Opt-In</ActionTitle>\r\n              </SubscribeButton>\r\n            )}\r\n            {!loading && subscribed && (\r\n              <>\r\n                {isOwner && <OwnerButton disabled>Owner</OwnerButton>}\r\n                {!isOwner && (\r\n                  <UnsubscribeButton\r\n                    onClick={unsubscribeAction}\r\n                    disabled={txInProgress}\r\n                  >\r\n                    {txInProgress && (\r\n                      <ActionLoader>\r\n                        <Loader\r\n                          type=\"Oval\"\r\n                          color=\"#FFF\"\r\n                          height={16}\r\n                          width={16}\r\n                        />\r\n                      </ActionLoader>\r\n                    )}\r\n                    <ActionTitle hideit={txInProgress}>Opt-Out</ActionTitle>\r\n                  </UnsubscribeButton>\r\n                )}\r\n              </>\r\n            )}\r\n          </ChannelActions>\r\n        </>\r\n      )}\r\n      {toast && (\r\n        <NotificationToast notification={toast} clearToast={clearToast} />\r\n      )}\r\n    </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nconst FlexBox = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst ColumnFlex = styled(FlexBox)`\r\n  flex-direction: column;\r\n`;\r\n// css styles\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n  background: ${props => props.theme.mainBg};\r\n  border-radius: 10px;\r\n  border: 1px solid ${props => props.theme.viewChannelIconBorder};\r\n\r\n  margin: 15px 0px;\r\n  justify-content: center;\r\n  padding: 10px;\r\n`;\r\n\r\nconst SkeletonWrapper = styled.div`\r\n  overflow: hidden;\r\n  width: ${(props) => props.atW + \"%\" || \"100%\"};\r\n  height: ${(props) => props.atH}px;\r\n  border-radius: ${(props) => props.borderRadius || 10}px;\r\n  margin-bottom: ${(props) => props.marginBottom || 5}px;\r\n  margin-right: ${(props) => props.marginRight || 0}px;\r\n`;\r\n\r\nconst ChannelLogo = styled.div`\r\n  max-width: 100px;\r\n  min-width: 32px;\r\n  flex: 1;\r\n  margin: 5px;\r\n  padding: 10px;\r\n  border: 2px solid ${props => props.theme.viewChannelIconBorder};\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-self: flex-start;\r\n\r\n`;\r\n\r\nconst ChannelLogoOuter = styled.div`\r\n  padding-top: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst ChannelLogoInner = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst ChannelLogoImg = styled.img`\r\n  object-fit: contain;\r\n  width: 100%;\r\n  border-radius: 20px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst ChannelInfo = styled.div`\r\n  flex: 1;\r\n  margin: 5px 10px;\r\n  min-width: 120px;\r\n  flex-grow: 4;\r\n  flex-direction: column;\r\n  display: flex;\r\n\r\n`;\r\n\r\nconst ChannelTitle = styled.div`\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst ChannelTitleLink = styled.a`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: ${props => props.theme.viewChannelLink};\r\n  font-size: 20px;\r\n  &:hover {\r\n    text-decoration: underline;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`;\r\n\r\nconst VerifiedBy = styled.span`\r\n  color: #ec008c;\r\n  font-size: 16px;\r\n  line-height: 20px;\r\n  letter-spacing: 0.05em;\r\n  font-weight: 600;\r\n  display: inline-block;\r\n`;\r\n\r\nconst VerifierIcon = styled.img`\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  margin-left: 6px;\r\n  margin-right: 4px;\r\n`;\r\n\r\nconst VerifierName = styled.span`\r\n  font-weight: 400;\r\n  color: black;\r\n  font-size: 16px;\r\n  letter-spacing: 0em;\r\n`;\r\n\r\nconst ChannelDesc = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  font-size: 14px;\r\n  color: rgba(0, 0, 0, 0.75);\r\n  font-weight: 400;\r\n  flex-direction: column;\r\n  color: ${props => props.theme.color};\r\n\r\n`;\r\n\r\nconst ChannelDescLabel = styled.label`\r\n  flex: 1;\r\n`;\r\n\r\nconst ChannelMeta = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n  font-size: 13px;\r\n`;\r\n\r\nconst ChannelMetaBox = styled.label`\r\n  margin: 0px 5px;\r\n  color: #fff; \r\n  font-weight: 600;\r\n  padding: 5px 10px;\r\n  display: flex;\r\n  border-radius: 10px;\r\n  font-size: 11px;\r\n  gap: 3px;\r\n`;\r\n\r\nconst Subscribers = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst SubscribersCount = styled(ChannelMetaBox)`\r\n  background: ${props => props.theme.viewChannelSecondaryBG};\r\n  transition: 300ms;\r\n`;\r\n\r\nconst Pool = styled.div`\r\n  margin: 0px 10px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst PoolShare = styled(ChannelMetaBox)`\r\n  background: #674c9f;\r\n`;\r\n\r\nconst LineBreak = styled.div`\r\n  display: none;\r\n  flex-basis: 100%;\r\n  height: 0;\r\n\r\n  @media ${Device.tablet} {\r\n    display: block;\r\n  }\r\n`;\r\n\r\nconst ChannelActions = styled.div`\r\n  margin: 5px;\r\n  flex-grow: 1;\r\n  // max-width: 250px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  // justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst ChannelActionButton = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${(props) =>\r\n    props.disabled &&\r\n    css`\r\n      &:hover {\r\n        opacity: 1;\r\n        cursor: default;\r\n        pointer: default;\r\n      }\r\n      &:active {\r\n        opacity: 1;\r\n        cursor: default;\r\n        pointer: default;\r\n      }\r\n    `}\r\n`;\r\n\r\nconst ActionTitle = styled.span`\r\n  ${(props) =>\r\n    props.hideit &&\r\n    css`\r\n      visibility: hidden;\r\n    `};\r\n`;\r\n\r\nconst ActionLoader = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst SkeletonButton = styled.div`\r\n  border: 0;\r\n  outline: 0;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 10px;\r\n  border-radius: 5px;\r\n  flex: 1;\r\n`;\r\n\r\nconst SubscribeButton = styled(ChannelActionButton)`\r\n  background: #e20880;\r\n  min-width: 80px;\r\n`;\r\n\r\nconst UnsubscribeButton = styled(ChannelActionButton)`\r\n  background: #674c9f;\r\n  min-width: 80px;\r\n`;\r\n\r\nconst OwnerButton = styled(ChannelActionButton)`\r\n  background: #35c5f3;\r\n`;\r\n\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`;\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`;\r\n\r\n// Export Default\r\nexport default ViewChannelItem;\r\n","import React from \"react\";\r\n\r\nimport { useTheme } from 'styled-components';\r\nimport { Item, ItemH, Span, Anchor} from 'components/SharedStyling';\r\n\r\nimport { FaGasPump } from 'react-icons/fa';\r\n\r\n// Faucet URLs\r\nfunction Faucets() {\r\n  const themes = useTheme();\r\n\r\n  // render\r\n  return (\r\n    <ItemH\r\n      self=\"flex-end\"\r\n      flex=\"initial\"\r\n      bg={`${themes.faucetBg}`}\r\n      radius=\"8px\"\r\n      padding=\"30px 10px 10px 10px\"\r\n      margin=\"10px\"\r\n      border={`1px solid ${themes.faucetBorder}`}\r\n      overflow=\"hidden\"\r\n      align=\"center\"\r\n    >\r\n      <Span\r\n        pos=\"absolute\"\r\n        top=\"10px\"\r\n        right=\"0px\"\r\n        padding=\"5px 10px\"\r\n        bg={`${themes.faucetHeader}`}\r\n        color=\"#fff\"\r\n        size=\"12px\"\r\n        weight=\"600\"\r\n      >\r\n        Get Free Kovan Ether\r\n      </Span>\r\n\r\n      <Item margin=\"5px\">\r\n        <Anchor\r\n          direction=\"column\"\r\n          href=\"https://faucet.metamask.io/\"\r\n          target=\"_blank\"\r\n          rel=\"nofollow\"\r\n        >\r\n          <FaGasPump size={30} color={`${themes.faucetIcon}`}/>\r\n          <Span\r\n            bg=\"#000\"\r\n            color=\"#fff\"\r\n            size=\"10px\"\r\n            weight=\"600\"\r\n            spacing=\"0.1em\"\r\n            textAlign=\"center\"\r\n            padding=\"5px 10px\"\r\n            margin=\"10px 0px 0px 0px\"\r\n            textTransform=\"uppercase\"\r\n            radius=\"8px\"\r\n          >\r\n            Metamask Faucet\r\n          </Span>\r\n        </Anchor>\r\n      </Item>\r\n      <Item margin=\"5px\">\r\n        <Anchor\r\n          direction=\"column\"\r\n          href=\"https://gitter.im/kovan-testnet/faucet\"\r\n          target=\"_blank\"\r\n          rel=\"nofollow\"\r\n        >\r\n          <FaGasPump size={30} color={`${themes.faucetIcon}`}/>\r\n          <Span\r\n            bg=\"#000\"\r\n            color=\"#fff\"\r\n            size=\"10px\"\r\n            weight=\"600\"\r\n            spacing=\"0.1em\"\r\n            textAlign=\"center\"\r\n            padding=\"5px 10px\"\r\n            margin=\"10px 0px 0px 0px\"\r\n            textTransform=\"uppercase\"\r\n            radius=\"8px\"\r\n          >\r\n            Faucet Kovan\r\n          </Span>\r\n        </Anchor>\r\n      </Item>\r\n\r\n    </ItemH>\r\n  );\r\n}\r\n\r\n// Export Default\r\nexport default Faucets;\r\n","import React, {useState} from \"react\";\r\nimport styled, { useTheme } from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { postReq } from \"api\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport { Item, ItemH } from \"components/SharedStyling\";\r\nimport { AiOutlineSearch } from \"react-icons/ai\";\r\n\r\nimport UtilityHelper from 'helpers/UtilityHelper';\r\n\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport ViewChannelItem from \"components/ViewChannelItem\";\r\nimport Faucets from \"components/Faucets\";\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport { setChannelMeta, incrementPage } from \"redux/slices/channelSlice\";\r\nimport queryString from 'query-string';\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\n\r\nconst CHANNELS_PER_PAGE = 10; //pagination parameter which indicates how many channels to return over one iteration\r\nconst SEARCH_TRIAL_LIMIT = 5; //ONLY TRY SEARCHING 5 TIMES BEFORE GIVING UP\r\nconst DEBOUNCE_TIMEOUT = 500; //time in millisecond which we want to wait for then to finish typing\r\nconst ADDRESS_REGEX = /^0x[a-fA-F0-9]{40}$/;\r\nconst SEARCH_DELAY = 1500;\r\n\r\n// Create Header\r\nfunction ViewChannels() {\r\n  const themes = useTheme();\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const { account, chainId } = useWeb3React();\r\n  const { channels, page, ZERO_ADDRESS } = useSelector((state: any) => state.channels);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [moreLoading, setMoreLoading] = React.useState(false);\r\n  const [search, setSearch] = React.useState(\"\");\r\n  const [channelToShow, setChannelToShow] = React.useState([]);\r\n  const [loadingChannel, setLoadingChannel] = React.useState(false);\r\n  const [trialCount, setTrialCount] = React.useState(0);\r\n\r\n  const channelsVisited = page * CHANNELS_PER_PAGE;\r\n\r\n  // fetch channel data if we are just getting to this pae\r\n  React.useEffect(() => {\r\n    setLoading(!channels.length); //if there are no channels initially then, set the loader\r\n    fetchInitialsChannelMeta();\r\n  }, [account, chainId]);\r\n\r\n  // to update a page\r\n  const updateCurrentPage = () => {\r\n    if (loading || moreLoading) return;\r\n    // fetch more channel information\r\n    setMoreLoading(true);\r\n    dispatch(incrementPage());\r\n    loadMoreChannelMeta(page + 1); //load the meta for the next page\r\n  };\r\n\r\n  // to fetch initial channels and logged in user data\r\n  const fetchInitialsChannelMeta = async () => {\r\n    // fetch the meta of the first `CHANNELS_PER_PAGE` channels\r\n    const channelsMeta = await ChannelsDataStore.instance.getChannelsMetaAsync(\r\n      channelsVisited,\r\n      CHANNELS_PER_PAGE\r\n    );\r\n    if (!channels.length) {\r\n      dispatch(setChannelMeta(channelsMeta));\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // load more channels when we get to the bottom of the page\r\n  const loadMoreChannelMeta = async (newPageNumber: any) => {\r\n    const startingPoint = newPageNumber * CHANNELS_PER_PAGE;\r\n    const moreChannels = await ChannelsDataStore.instance.getChannelsMetaAsync(\r\n      startingPoint,\r\n      CHANNELS_PER_PAGE\r\n    );\r\n    dispatch(setChannelMeta([...channels, ...moreChannels]));\r\n    setMoreLoading(false);\r\n  };\r\n\r\n  // conditionally display the waymore bar which loads more information\r\n  // load more channels when we are at the bottom of the page\r\n  const showWayPoint = (index: any) => {\r\n    return Number(index) === channels.length - 1;\r\n  };\r\n\r\n  // Search Channels Feature\r\n  React.useEffect(() => {\r\n    if (!channels.length) return;\r\n    setChannelToShow(channels);\r\n  }, [channels]);\r\n\r\n  console.log(\"\\n\\n\");\r\n  console.log(\"\\n\\n\");\r\n  console.log({ channels });\r\n\r\n  function searchForChannel() {\r\n    if (loadingChannel) return; //if we are already loading, do nothing\r\n    if (search) {\r\n      setLoadingChannel(true); //begin loading here\r\n      setChannelToShow([]); //maybe remove later\r\n      postReq(\"/channels/search\", {\r\n        query: search,\r\n        op: \"read\",\r\n      })\r\n        .then((data) => {\r\n          setChannelToShow(data.data.channels || []);\r\n          setLoadingChannel(false);\r\n        })\r\n        .catch(() => {\r\n          // if there's an error search for three times before giving up and displaying the normal channels\r\n          if (trialCount < SEARCH_TRIAL_LIMIT) {\r\n            setTrialCount((t) => t + 1);\r\n            searchForChannel(); //if theres an error, recursively search\r\n          } else {\r\n            setChannelToShow(channels);\r\n            setLoadingChannel(false);\r\n          }\r\n        });\r\n    } else {\r\n      // if no search item, then set it back to the channels\r\n      setLoadingChannel(false);\r\n      setChannelToShow(channels);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    // this is done so that we only make a request after the user stops typing\r\n    const timeout = setTimeout(searchForChannel, DEBOUNCE_TIMEOUT);\r\n    return () => {\r\n      clearTimeout(timeout);\r\n    };\r\n  }, [search]);\r\n\r\n\r\n\r\n  React.useEffect(() => {\r\n    const parsedChannel = String(queryString.parse(window.location.search).channel)\r\n    if(!ADDRESS_REGEX.test(parsedChannel)) return;\r\n    setTimeout(() => {\r\n      setSearch(parsedChannel);\r\n    }, SEARCH_DELAY)\r\n  }, [])\r\n  \r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n      <Container>\r\n        {!loading && channels.length == 0 ? (\r\n          <ContainerInfo>\r\n            <DisplayNotice\r\n              title=\"That's weird, No Channels in EPNS... world is ending... right?\"\r\n              theme=\"primary\"\r\n            />\r\n          </ContainerInfo>\r\n        ) : (\r\n          <ScrollItem>\r\n            {!loading && (\r\n              <ItemH\r\n                padding=\"10px 0px\"\r\n                flex=\"initial\"\r\n              >\r\n                <Item\r\n                  flex=\"1\"\r\n                  margin=\"10px\"\r\n                  minWidth=\"320px\"\r\n                >\r\n                  <SearchBar\r\n                    type=\"text\"\r\n                    value={search}\r\n                    onChange={(e: any) => setSearch(e.target.value)}\r\n                    className=\"input\"\r\n                    placeholder=\"Search By Name/Address\"\r\n                  />\r\n                  <Item\r\n                    position=\"absolute\"\r\n                    top=\"0\"\r\n                    bottom=\"0\"\r\n                    left=\"12px\"\r\n\r\n                  >\r\n                    <AiOutlineSearch size={20} style={{color: themes.viewChannelSearchIcon}} />\r\n                  </Item>\r\n                </Item>\r\n\r\n                {!UtilityHelper.isMainnet(chainId) && \r\n                  <Faucets /> \r\n                }\r\n                \r\n              </ItemH>\r\n            )}\r\n\r\n            {/* render all channels depending on if we are searching or not */}\r\n            {(search ? channelToShow : channels).map(\r\n              (channel: any, index: any) =>\r\n                channel &&\r\n                channel.addr !== ZERO_ADDRESS && (\r\n                  <>\r\n                    <div key={channel.addr}>\r\n                      <ViewChannelItem channelObjectProp={channel} />\r\n                    </div>\r\n                    {showWayPoint(index) && (\r\n                      <Waypoint onEnter={updateCurrentPage} />\r\n                    )}\r\n                  </>\r\n                )\r\n            )}\r\n            {/* render all channels depending on if we are searching or not */}\r\n\r\n            {/* if we are in search mode and there are no channels then display error message */}\r\n            {search && !channelToShow?.length && !loadingChannel && (\r\n              <CenteredContainerInfo>\r\n                <DisplayNotice\r\n                  title=\"No channels match your query, please search for another name/address\"\r\n                  theme=\"third\"\r\n                />\r\n              </CenteredContainerInfo>\r\n            )}\r\n\r\n            {/* display loader if pagination is loading next batch of channelTotalList */}\r\n            {((moreLoading && channels.length) ||\r\n              loading ||\r\n              loadingChannel) && (\r\n              <CenterContainer>\r\n                <Loader type=\"Oval\" color=\"#35c5f3\" height={40} width={40} />\r\n              </CenterContainer>\r\n            )}\r\n          </ScrollItem>\r\n        )}\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst SearchBar = styled.input`\r\n  width: 100%;\r\n  padding-right: 50px;\r\n  height: 60px;\r\n  padding-left: 40px;\r\n\r\n  background: ${props => props.theme.viewChannelSearchBg};\r\n  border: 1px solid ${props => props.theme.viewChannelSearchBorder};\r\n  color: ${props => props.theme.viewChannelSearchText};\r\n  box-sizing: border-box;\r\n  border-radius: 10px;\r\n  text-transform: capitalize;\r\n  font-size: 16px;\r\n\r\n  input[type=\"reset\"] {\r\n    display: none;\r\n  }\r\n  &::placeholder {\r\n    letter-spacing: 0.15em;\r\n  }\r\n  &:hover,\r\n  &:active,\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n  &:focus {\r\n    border: 1px solid #ec008c;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 92vh;\r\n`;\r\n\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`;\r\n\r\nconst CenteredContainerInfo = styled.div`\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst CenterContainer = styled(ContainerInfo)`\r\n  width: fit-content;\r\n  align-self: center;\r\n`;\r\n\r\nconst ScrollItem = styled.div`\r\n  display: flex;\r\n  align-self: stretch;\r\n  align-items: stretch;\r\n  justify-content: stretch;\r\n  flex-direction: column;\r\n  flex: 1;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background-color: ${props => props.theme.scrollBg};\r\n    border-radius: 10px;\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    background-color: ${props => props.theme.scrollBg};\r\n    width: 6px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 10px;\r\n    background-image: -webkit-gradient(linear,\r\n                       left top,\r\n                       left bottom,\r\n                       color-stop(0.44, #35c5f3),\r\n                       color-stop(0.72, #35b0f3),\r\n                       color-stop(0.86, #35a1f3));\r\n  }\r\n`;\r\n\r\n// Export Default\r\nexport default ViewChannels;\r\n","import React from 'react'\r\n\r\nexport const CloseIcon = () => (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10.243\" height=\"10.243\" viewBox=\"0 0 16.243 16.243\">\r\n        <g id=\"Group_4723\" data-name=\"Group 4723\" transform=\"translate(2.121 2.121)\">\r\n            <g id=\"Group_4716\" data-name=\"Group 4716\" transform=\"translate(0)\">\r\n            <line id=\"Line_1079\" data-name=\"Line 1079\" x2=\"16.97\" transform=\"translate(0 12) rotate(-45)\" fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-width=\"3\"/>\r\n            <line id=\"Line_1080\" data-name=\"Line 1080\" y2=\"16.97\" transform=\"translate(0 0) rotate(-45)\" fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-width=\"3\"/>\r\n            </g>\r\n        </g>\r\n    </svg>\r\n);\r\n","  import React from \"react\";\r\n  import { toast } from \"react-toastify\";\r\n  import Dropdown from \"react-dropdown\";\r\n  import { FiLink } from \"react-icons/fi\";\r\n  import Loader from \"react-loader-spinner\";\r\n  import styled , {useTheme} from \"styled-components\";\r\n  import { BsFillImageFill } from \"react-icons/bs\";\r\n  import { useSelector } from \"react-redux\";\r\n  import { postReq } from \"api\";\r\n  import {\r\n  Section,\r\n  Content,\r\n  Item,\r\n  ItemH,\r\n  H2,\r\n  H3,\r\n  Span,\r\n  Button,\r\n  FormSubmision,\r\n  Input,\r\n  TextField,\r\n} from \"components/SharedStyling\";\r\n\r\nimport \"react-dropdown/style.css\";\r\nimport \"react-toastify/dist/ReactToastify.min.css\";\r\n\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport { CloseIcon } from \"assets/icons\";\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport CryptoHelper from \"helpers/CryptoHelper\";\r\nconst ethers = require(\"ethers\");\r\n\r\n// Set Notification Form Type | 0 is reserved for protocol storage\r\nconst NFTypes = [\r\n  { value: \"1\", label: \"Broadcast (IPFS Payload)\" },\r\n  // { value: \"2\", label: \"Secret (IPFS Payload)\" },\r\n  { value: \"3\", label: \"Targetted (IPFS Payload)\" },\r\n  { value: \"4\", label: \"Subset (IPFS Payload)\" },\r\n  // { value: \"5\", label: \"Offchain (Push)\" },\r\n];\r\nconst LIMITER_KEYS = [\"Enter\", \",\"];\r\n\r\n// Create Header\r\nfunction SendNotifications() {\r\n  const theme = useTheme();\r\n  const { account, library, chainId } = useWeb3React();\r\n  const { epnsCommWriteProvider, epnsCommReadProvider } = useSelector(\r\n    (state: any) => state.contracts\r\n  );\r\n  const { channelDetails, delegatees } = useSelector(\r\n    (state: any) => state.admin\r\n  );\r\n  const { CHANNNEL_DEACTIVATED_STATE } = useSelector(\r\n    (state: any) => state.channels\r\n  );\r\n\r\n  const [nfProcessing, setNFProcessing] = React.useState(0);\r\n  const [channelAddress, setChannelAddress] = React.useState(\"\");\r\n  const [nfRecipient, setNFRecipient] = React.useState(\"\");\r\n  const [multipleRecipients, setMultipleRecipients] = React.useState([]);\r\n  const [tempRecipeint, setTempRecipient] = React.useState(\"\"); // to temporarily hold the address of one recipient who would be entered into the recipeints array above.\r\n  const [nfType, setNFType] = React.useState(\"\");\r\n  const [nfSub, setNFSub] = React.useState(\"\");\r\n  const [nfSubEnabled, setNFSubEnabled] = React.useState(false);\r\n  const [nfMsg, setNFMsg] = React.useState(\"\");\r\n  const [nfCTA, setNFCTA] = React.useState(\"\");\r\n  const [nfCTAEnabled, setNFCTAEnabled] = React.useState(false);\r\n  const [nfMedia, setNFMedia] = React.useState(\"\");\r\n  const [nfMediaEnabled, setNFMediaEnabled] = React.useState(false);\r\n  const [nfInfo, setNFInfo] = React.useState(\"\");\r\n  const [delegateeOptions, setDelegateeOptions] = React.useState([]);\r\n\r\n  const isChannelDeactivated = channelDetails\r\n      ? channelDetails.channelState === CHANNNEL_DEACTIVATED_STATE\r\n      : false;\r\n  const cannotDisplayDelegatees =\r\n      (delegatees.length === 1 && delegatees[0].address === account) ||\r\n      !delegatees.length; //do not display delegatees dropdown if you are the only delegatee to yourself or there are no delegatess\r\n  // construct a list of channel delegators\r\n  React.useEffect(() => {\r\n      if (!account) return;\r\n      if (!delegatees || !delegatees.length) {\r\n          setChannelAddress(account);\r\n      } else {\r\n          setDelegateeOptions(\r\n              delegatees.map((oneDelegatee: any) => ({\r\n                  value: oneDelegatee.address,\r\n                  label: (\r\n                      <CustomDropdownItem>\r\n                          <img src={oneDelegatee.icon} alt=\"\" />\r\n                          <div>{oneDelegatee.name}</div>\r\n                      </CustomDropdownItem>\r\n                  ),\r\n              }))\r\n          );\r\n          // default the channel address to the first one on the list which should be that of the user if they have a channel\r\n          setChannelAddress(delegatees[0].address);\r\n      }\r\n  }, [delegatees, account]);\r\n\r\n  // on change for the subset type notifications input\r\n  const handleSubsetInputChange = (e: any) => {\r\n      // if the user enters in a comma or an enter then seperate the addresses\r\n      if (LIMITER_KEYS.includes(e.key)) {\r\n          e.preventDefault();\r\n          // if they enter a limiter key, then add the temp value to the recipeints list\r\n          // then clear the value of the temp text\r\n          setMultipleRecipients((oldRecipients) =>\r\n              // use this combination to remove duplicates\r\n              Array.from(new Set([...oldRecipients, tempRecipeint]))\r\n          );\r\n          const listRecipients = Array.from(\r\n              new Set([...multipleRecipients, tempRecipeint])\r\n          );\r\n          setNFRecipient(listRecipients.join());\r\n          setTempRecipient(\"\");\r\n      }\r\n  };\r\n  // when to remove a subscriber\r\n  const removeRecipient = (recipientAddress: any) => {\r\n      const filteredRecipients = multipleRecipients.filter(\r\n          (rec) => rec !== recipientAddress\r\n      );\r\n      setNFRecipient(filteredRecipients.join());\r\n      setMultipleRecipients(filteredRecipients);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n      const broadcastIds = [\"1\"]; //id's of notifications which qualify as broadcast\r\n      setMultipleRecipients([]); //reset array when type changes/\r\n      if (broadcastIds.includes(nfType)) {\r\n          // This is broadcast, nfRecipient will be the same\r\n          setNFRecipient(account);\r\n      } else {\r\n          setNFRecipient(\"\");\r\n      }\r\n  }, [nfType]);\r\n\r\n  // validate the body being sent, return true if no errors\r\n  const bodyValidated = (notificationToast) => {\r\n      let validated = true;\r\n      // if we are sending for a subset and there\r\n      if (nfType === \"4\" && multipleRecipients.length < 2) {\r\n          toast.update(notificationToast, {\r\n              render: \"Please enter at least two recipients in order to use subset notifications type\",\r\n              type: toast.TYPE.ERROR,\r\n              autoClose: 5000,\r\n          });\r\n          validated = false;\r\n      }\r\n      return validated;\r\n  };\r\n\r\n  const handleSendMessage = async (e) => {\r\n      // Check everything in order\r\n      e.preventDefault();\r\n\r\n      // Toastify\r\n      let notificationToast = toast.dark(\r\n          <LoaderToast msg=\"Preparing Notification\" color=\"#fff\" />,\r\n          {\r\n              position: \"bottom-right\",\r\n              autoClose: false,\r\n              hideProgressBar: true,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n          }\r\n      );\r\n\r\n      // do some validation\r\n      if (!bodyValidated(notificationToast)) return;\r\n\r\n      // Set to processing\r\n      setNFProcessing(1);\r\n\r\n      // Form signer and contract connection\r\n      const communicatorContract = epnsCommWriteProvider;\r\n      // define the epns comms contracts\r\n\r\n      // For payload basic\r\n      let nsub = nfSub;\r\n      let nmsg = nfMsg;\r\n      let secretEncrypted;\r\n\r\n      let asub = nfSub;\r\n      let amsg = nfMsg;\r\n      let acta = nfCTA;\r\n      let aimg = nfMedia;\r\n\r\n      // Decide type and storage\r\n      switch (nfType) {\r\n          // Broadcast Notification\r\n          case \"1\":\r\n              break;\r\n\r\n          // Targetted Notification\r\n          case \"3\":\r\n              break;\r\n\r\n          // Secret Notification\r\n          case \"2\":\r\n              // Create secret\r\n              let secret = CryptoHelper.makeid(14);\r\n\r\n              // Encrypt payload and change sub and nfMsg in notification\r\n              nsub = \"You have a secret message!\";\r\n              nmsg = \"Open the app to see your secret message!\";\r\n\r\n              // get public key from EPNSCoreHelper\r\n              let k = await EPNSCoreHelper.getPublicKey(\r\n                  nfRecipient,\r\n                  epnsCommWriteProvider\r\n              );\r\n              if (k == null) {\r\n                  // No public key, can't encrypt\r\n                  setNFInfo(\r\n                      \"Public Key Registration is required for encryption!\"\r\n                  );\r\n                  setNFProcessing(2);\r\n\r\n                  toast.update(notificationToast, {\r\n                      render: \"Unable to encrypt for this user, no public key registered\",\r\n                      type: toast.TYPE.ERROR,\r\n                      autoClose: 5000,\r\n                  });\r\n\r\n                  return;\r\n              }\r\n\r\n              let publickey = k.toString().substring(2);\r\n              //console.log(\"This is public Key: \" + publickey);\r\n\r\n              secretEncrypted = await CryptoHelper.encryptWithECIES(\r\n                  secret,\r\n                  publickey\r\n              );\r\n              asub = CryptoHelper.encryptWithAES(nfSub, secret);\r\n              amsg = CryptoHelper.encryptWithAES(nfMsg, secret);\r\n              acta = CryptoHelper.encryptWithAES(nfCTA, secret);\r\n              aimg = CryptoHelper.encryptWithAES(nfMedia, secret);\r\n              break;\r\n\r\n          // Targetted Notification\r\n          case \"4\":\r\n              break;\r\n\r\n          // Offchain Notification\r\n          case \"5\":\r\n              console.log(\r\n                  nsub,\r\n                  nmsg,\r\n                  nfType,\r\n                  asub,\r\n                  amsg,\r\n                  acta,\r\n                  aimg,\r\n                  \"case 5\"\r\n              );\r\n\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n\r\n      // Handle Storage\r\n      let storagePointer = \"\";\r\n\r\n      // IPFS PAYLOAD --> 1, 2, 3\r\n      if (\r\n          nfType === \"1\" ||\r\n          nfType === \"2\" ||\r\n          nfType === \"3\" ||\r\n          nfType === \"4\"\r\n      ) {\r\n          // Checks for optional fields\r\n          if (nfSubEnabled && isEmpty(nfSub)) {\r\n              setNFInfo(\"Enter Subject or Disable it\");\r\n              setNFProcessing(2);\r\n\r\n              toast.update(notificationToast, {\r\n                  render: \"Incorrect Payload\",\r\n                  type: toast.TYPE.ERROR,\r\n                  autoClose: 5000,\r\n              });\r\n\r\n              return;\r\n          }\r\n\r\n          if (nfMediaEnabled && isEmpty(nfMedia)) {\r\n              setNFInfo(\"Enter Media URL or Disable it\");\r\n              setNFProcessing(2);\r\n\r\n              toast.update(notificationToast, {\r\n                  render: \"Incorrect Payload\",\r\n                  type: toast.TYPE.ERROR,\r\n                  autoClose: 5000,\r\n              });\r\n              return;\r\n          }\r\n\r\n          if (nfCTAEnabled && isEmpty(nfCTA)) {\r\n              setNFInfo(\"Enter Call to Action Link or Disable it\");\r\n              setNFProcessing(2);\r\n\r\n              toast.update(notificationToast, {\r\n                  render: \"Incorrect Payload\",\r\n                  type: toast.TYPE.ERROR,\r\n                  autoClose: 5000,\r\n              });\r\n              return;\r\n          }\r\n\r\n          if (isEmpty(nfMsg)) {\r\n              setNFInfo(\"Message cannot be empty\");\r\n              setNFProcessing(2);\r\n\r\n              toast.update(notificationToast, {\r\n                  render: \"Incorrect Payload\",\r\n                  type: toast.TYPE.ERROR,\r\n                  autoClose: 5000,\r\n              });\r\n              return;\r\n          }\r\n\r\n          const jsonPayload = {\r\n              notification: {\r\n                  title: nsub,\r\n                  body: nmsg,\r\n              },\r\n              data: {\r\n                  type: nfType,\r\n                  secret: secretEncrypted,\r\n                  asub: asub,\r\n                  amsg: amsg,\r\n                  acta: acta,\r\n                  aimg: aimg,\r\n              },\r\n          };\r\n\r\n          // if we are sending a subset type, then include recipients\r\n          if (nfType === \"4\") {\r\n              jsonPayload[\"recipients\"] = [...multipleRecipients];\r\n          }\r\n\r\n          const input = JSON.stringify(jsonPayload);\r\n          console.log(input);\r\n\r\n          console.log(\"Uploding to IPFS...\");\r\n          toast.update(notificationToast, {\r\n              render: \"Preparing Payload for upload\",\r\n          });\r\n\r\n          const ipfs = require(\"nano-ipfs-store\").at(\r\n              \"https://ipfs.infura.io:5001\"\r\n          );\r\n\r\n          try {\r\n              storagePointer = await ipfs.add(input);\r\n          } catch (e) {\r\n              setNFProcessing(2);\r\n              setNFInfo(\"IPFS Upload Error\");\r\n          }\r\n\r\n          console.log(\"IPFS cid: %o\", storagePointer);\r\n      }\r\n      if (\r\n          nfType === \"1\" ||\r\n          nfType === \"2\" ||\r\n          nfType === \"3\" ||\r\n          nfType === \"4\"\r\n      ) {\r\n          // Prepare Identity and send notification\r\n          const identity = nfType + \"+\" + storagePointer;\r\n          const identityBytes = ethers.utils.toUtf8Bytes(identity);\r\n          console.log({\r\n              identityBytes,\r\n          });\r\n          const EPNS_DOMAIN = {\r\n              name: \"EPNS COMM V1\",\r\n              chainId: chainId,\r\n              verifyingContract: epnsCommReadProvider.address,\r\n          };\r\n\r\n          const type = {\r\n              Data: [\r\n                  { name: \"acta\", type: \"string\" },\r\n                  { name: \"aimg\", type: \"string\" },\r\n                  { name: \"amsg\", type: \"string\" },\r\n                  { name: \"asub\", type: \"string\" },\r\n                  { name: \"type\", type: \"string\" },\r\n                  { name: \"secret\", type: \"string\" },\r\n              ],\r\n          };\r\n\r\n          const payload = {\r\n              data: {\r\n                  acta: acta,\r\n                  aimg: aimg,\r\n                  amsg: amsg,\r\n                  asub: asub,\r\n                  type: nfType,\r\n                  secret: \"\",\r\n              },\r\n\r\n              notification: {\r\n                  body: amsg,\r\n                  title: asub,\r\n              },\r\n          };\r\n\r\n          const message = payload.data;\r\n          console.log(payload, \"payload\");\r\n          console.log(\"chainId\", chainId);\r\n          const signature = await library\r\n              .getSigner(account)\r\n              ._signTypedData(EPNS_DOMAIN, type, message);\r\n          console.log(\"case5 signature\", signature);\r\n          try {\r\n              console.log(nfRecipient);\r\n              postReq(\"/payloads/add_manual_payload\", {\r\n                  signature,\r\n                  op: \"write\",\r\n                  chainId: chainId.toString(),\r\n                  channel: channelAddress,\r\n                  recipient: nfRecipient,\r\n                  deployedContract: epnsCommReadProvider.address,\r\n                  payload: payload,\r\n                  type: nfType,\r\n              }).then(async (res) => {\r\n                  toast.update(notificationToast, {\r\n                      render: \"Notification Sent\",\r\n                      type: toast.TYPE.INFO,\r\n                      autoClose: 5000,\r\n                  });\r\n\r\n                  setNFProcessing(2);\r\n                  setNFType(\"\");\r\n                  setNFInfo(\"Offchain Notification Sent\");\r\n\r\n                  toast.update(notificationToast, {\r\n                      render: \"Offchain Notification Sent\",\r\n                      type: toast.TYPE.SUCCESS,\r\n                      autoClose: 5000,\r\n                  });\r\n                  console.log(res);\r\n              });\r\n          } catch (err) {\r\n              setNFInfo(\"Offchain Notification Failed, please try again\");\r\n\r\n              toast.update(notificationToast, {\r\n                  render: \"Offchain Notification Failed: \" + err,\r\n                  type: toast.TYPE.ERROR,\r\n                  autoClose: 5000,\r\n              });\r\n              setNFProcessing(0);\r\n              console.log(err);\r\n          }\r\n\r\n          // var anotherSendTxPromise;\r\n\r\n          // anotherSendTxPromise = communicatorContract.sendNotification(\r\n          //   channelAddress,\r\n          //   nfRecipient,\r\n          //   identityBytes\r\n          // );\r\n\r\n          // console.log(\"Sending Transaction... \");\r\n          // toast.update(notificationToast, {\r\n          //   render: \"Sending Notification...\",\r\n          // });\r\n\r\n          // anotherSendTxPromise\r\n          //   .then(async (tx) => {\r\n          //     console.log(tx);\r\n          //     console.log(\"Transaction Sent!\");\r\n\r\n          //     toast.update(notificationToast, {\r\n          //       render: \"Notification Sent\",\r\n          //       type: toast.TYPE.INFO,\r\n          //       autoClose: 5000,\r\n          //     });\r\n\r\n          //     await tx.wait(1);\r\n          //     console.log(\"Transaction Mined!\");\r\n\r\n          //     setNFProcessing(2);\r\n          //     setNFType(\"\");\r\n          //     setNFInfo(\"Notification Sent\");\r\n\r\n          //     toast.update(notificationToast, {\r\n          //       render: \"Transaction Mined / Notification Sent\",\r\n          //       type: toast.TYPE.SUCCESS,\r\n          //       autoClose: 5000,\r\n          //     });\r\n          //   })\r\n          //   .catch((err) => {\r\n          //     console.log(\"!!!Error handleSendMessage() --> %o\", err);\r\n          //     setNFInfo(\"Transaction Failed, please try again\");\r\n\r\n          //     toast.update(notificationToast, {\r\n          //       render: \"Transacion Failed: \" + err,\r\n          //       type: toast.TYPE.ERROR,\r\n          //       autoClose: 5000,\r\n          //     });\r\n          //     setNFProcessing(0);\r\n          //   });\r\n      }\r\n      if (nfType === \"5\") {\r\n          // const jsonPayload = {\r\n          //   notification: {\r\n          //     title: nsub,\r\n          //     body: nmsg,\r\n          //   },\r\n          //   data: {\r\n          //     type: nfType,\r\n          //     secret: secretEncrypted,\r\n          //     asub: asub,\r\n          //     amsg: amsg,\r\n          //     acta: acta,\r\n          //     aimg: aimg,\r\n          //   },\r\n          // };\r\n\r\n          const EPNS_DOMAIN = {\r\n              name: \"EPNS COMM V1\",\r\n              chainId: chainId,\r\n              verifyingContract: epnsCommReadProvider.address,\r\n          };\r\n\r\n          const type = {\r\n              Data: [\r\n                  { name: \"acta\", type: \"string\" },\r\n                  { name: \"aimg\", type: \"string\" },\r\n                  { name: \"amsg\", type: \"string\" },\r\n                  { name: \"asub\", type: \"string\" },\r\n                  { name: \"type\", type: \"string\" },\r\n                  { name: \"secret\", type: \"string\" },\r\n              ],\r\n          };\r\n\r\n          const payload = {\r\n              data: {\r\n                  acta: acta,\r\n                  aimg: aimg,\r\n                  amsg: amsg,\r\n                  asub: asub,\r\n                  type: nfType,\r\n                  secret: \"\",\r\n              },\r\n\r\n              notification: {\r\n                  body: amsg,\r\n                  title: asub,\r\n              },\r\n          };\r\n\r\n          const message = payload.data;\r\n          console.log(payload, \"payload\");\r\n          console.log(\"chainId\", chainId);\r\n          const signature = await library\r\n              .getSigner(account)\r\n              ._signTypedData(EPNS_DOMAIN, type, message);\r\n          console.log(\"case5 signature\", signature);\r\n          try {\r\n              postReq(\"/payloads/add_manual_payload\", {\r\n                  signature,\r\n                  op: \"write\",\r\n                  chainId: chainId.toString(),\r\n                  channel: channelAddress,\r\n                  recipient: nfRecipient,\r\n                  deployedContract: epnsCommReadProvider.address,\r\n                  payload: payload,\r\n                  type: \"3\",\r\n              }).then(async (res) => {\r\n                  toast.update(notificationToast, {\r\n                      render: \"Notification Sent\",\r\n                      type: toast.TYPE.INFO,\r\n                      autoClose: 5000,\r\n                  });\r\n\r\n                  setNFProcessing(2);\r\n                  setNFType(\"\");\r\n                  setNFInfo(\"Offchain Notification Sent\");\r\n\r\n                  toast.update(notificationToast, {\r\n                      render: \"Offchain Notification Sent\",\r\n                      type: toast.TYPE.SUCCESS,\r\n                      autoClose: 5000,\r\n                  });\r\n                  console.log(res);\r\n              });\r\n          } catch (err) {\r\n              setNFInfo(\"Offchain Notification Failed, please try again\");\r\n\r\n              toast.update(notificationToast, {\r\n                  render: \"Offchain Notification Failed: \" + err,\r\n                  type: toast.TYPE.ERROR,\r\n                  autoClose: 5000,\r\n              });\r\n              setNFProcessing(0);\r\n              console.log(err);\r\n          }\r\n      }\r\n  };\r\n\r\n  const isEmpty = (field: any) => {\r\n      if (field.trim().length == 0) {\r\n          return true;\r\n      }\r\n\r\n      return false;\r\n  };\r\n\r\n  // toast customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n      <Toaster>\r\n          <Loader type=\"Oval\" color={color} height={30} width={30} />\r\n          <ToasterMsg>{msg}</ToasterMsg>\r\n      </Toaster>\r\n  );\r\n\r\n  return (\r\n      <>\r\n          <Section>\r\n              <Content padding=\"10px 20px 20px\">\r\n                  <Item align=\"flex-start\">\r\n                      <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n                          <Span weight=\"200\" style={{color : theme.color}}>Send </Span>\r\n                          <Span\r\n                              bg=\"#674c9f\"\r\n                              color=\"#fff\"\r\n                              weight=\"600\"\r\n                              padding=\"0px 8px\"\r\n                          >\r\n                              Notification\r\n                          </Span>\r\n                      </H2>\r\n                      {!isChannelDeactivated ? (\r\n                          <H3 style={{color : theme.color}}>\r\n                              EPNS supports three types of notifications (for\r\n                              now!). <b>Groups</b>, <b>Subsets</b>, and{\" \"}\r\n                              <b>Targetted</b>\r\n                              {/* and{\" \"} <b>Subsets</b>. */}\r\n                          </H3>\r\n                      ) : (\r\n                          <H3>\r\n                              This channel has been deactivated, please\r\n                              reactivate it!.\r\n                          </H3>\r\n                      )}\r\n                  </Item>\r\n              </Content>\r\n          </Section>\r\n\r\n          {!isChannelDeactivated && (\r\n              <Section>\r\n                  <ModifiedContent>\r\n                      <Item align=\"stretch\">\r\n                          <FormSubmision\r\n                              flex=\"1\"\r\n                              direction=\"column\"\r\n                              margin=\"0px\"\r\n                              justify=\"center\"\r\n                              size=\"1.1rem\"\r\n                              onSubmit={handleSendMessage}\r\n                          >\r\n                              <Item\r\n                                  margin=\"0px 20px\"\r\n                                  flex=\"1\"\r\n                                  self=\"stretch\"\r\n                                  align=\"stretch\"\r\n                              >\r\n                                  {!cannotDisplayDelegatees && (\r\n                                      <Item\r\n                                          flex=\"5\"\r\n                                          justify=\"flex-start\"\r\n                                          align=\"stretch\"\r\n                                          minWidth=\"280px\"\r\n                                      >\r\n                                          <DropdownStyledParentWhite>\r\n                                              <DropdownHeader>\r\n                                                  SEND NOTIFICATION ON BEHALF\r\n                                                  OF\r\n                                              </DropdownHeader>\r\n                                              <DropdownStyledWhite\r\n                                                  options={delegateeOptions}\r\n                                                  onChange={(option: any) => {\r\n                                                      setChannelAddress(\r\n                                                          option.value\r\n                                                      );\r\n                                                  }}\r\n                                                  value={delegateeOptions.find(\r\n                                                      (d) =>\r\n                                                          d.value ==\r\n                                                          channelAddress\r\n                                                  )}\r\n                                              />\r\n                                          </DropdownStyledParentWhite>\r\n                                      </Item>\r\n                                  )}\r\n\r\n                                  <Input\r\n                                      display=\"none\"\r\n                                      value={nfType}\r\n                                      onChange={(e) => {\r\n                                          setNFType(e.target.value);\r\n                                      }}\r\n                                  />\r\n\r\n                                  <Item\r\n                                      flex=\"5\"\r\n                                      justify=\"flex-start\"\r\n                                      align=\"stretch\"\r\n                                      minWidth=\"280px\"\r\n                                  >\r\n                                      <DropdownStyledParent>\r\n                                          <DropdownStyled\r\n                                              options={NFTypes}\r\n                                              onChange={(option) => {\r\n                                                  setNFType(option.value);\r\n                                                  console.log(option);\r\n                                              }}\r\n                                              value={nfType}\r\n                                              placeholder=\"Select Type of Notification to Send\"\r\n                                          />\r\n                                      </DropdownStyledParent>\r\n                                  </Item>\r\n                                  <Input\r\n                                      display=\"none\"\r\n                                      value={nfType}\r\n                                      onChange={(e) => {\r\n                                          setNFType(e.target.value);\r\n                                      }}\r\n                                  />\r\n\r\n                                  {nfType && (\r\n                                      <ItemH\r\n                                          margin=\"0px 15px 15px 15px\"\r\n                                          bg=\"#f1f1f1\"\r\n                                          flex=\"1\"\r\n                                          self=\"stretch\"\r\n                                          justify=\"space-between\"\r\n                                      >\r\n                                          <ItemH\r\n                                              margin=\"15px 10px\"\r\n                                              flex=\"inital\"\r\n                                          >\r\n                                              <Span\r\n                                                  margin=\"0px 10px 0px 0px\"\r\n                                                  weight=\"400\"\r\n                                                  spacing=\"0.1em\"\r\n                                                  textTransform=\"uppercase\"\r\n                                                  size=\"0.8em\"\r\n                                                  bg=\"#e20880\"\r\n                                                  color=\"#fff\"\r\n                                                  padding=\"5px 15px\"\r\n                                                  radius=\"30px\"\r\n                                              >\r\n                                                  Enable Subject\r\n                                              </Span>\r\n                                              <Switch\r\n                                                  color=\"primary\"\r\n                                                  size=\"small\"\r\n                                                  checked={nfSubEnabled}\r\n                                                  onChange={() =>\r\n                                                      setNFSubEnabled(\r\n                                                          !nfSubEnabled\r\n                                                      )\r\n                                                  }\r\n                                              />\r\n                                          </ItemH>\r\n\r\n                                          <ItemH\r\n                                              margin=\"15px 10px\"\r\n                                              flex=\"inital\"\r\n                                          >\r\n                                              <Span\r\n                                                  margin=\"0px 10px 0px 0px\"\r\n                                                  weight=\"400\"\r\n                                                  spacing=\"0.1em\"\r\n                                                  textTransform=\"uppercase\"\r\n                                                  size=\"0.8em\"\r\n                                                  bg=\"#e20880\"\r\n                                                  color=\"#fff\"\r\n                                                  padding=\"5px 15px\"\r\n                                                  radius=\"30px\"\r\n                                              >\r\n                                                  Enable Media\r\n                                              </Span>\r\n                                              <Switch\r\n                                                  color=\"primary\"\r\n                                                  size=\"small\"\r\n                                                  checked={nfMediaEnabled}\r\n                                                  onChange={() =>\r\n                                                      setNFMediaEnabled(\r\n                                                          !nfMediaEnabled\r\n                                                      )\r\n                                                  }\r\n                                              />\r\n                                          </ItemH>\r\n\r\n                                          <ItemH\r\n                                              margin=\"15px 10px\"\r\n                                              flex=\"inital\"\r\n                                          >\r\n                                              <Span\r\n                                                  margin=\"0px 10px 0px 0px\"\r\n                                                  weight=\"400\"\r\n                                                  spacing=\"0.1em\"\r\n                                                  textTransform=\"uppercase\"\r\n                                                  size=\"0.8em\"\r\n                                                  bg=\"#e20880\"\r\n                                                  color=\"#fff\"\r\n                                                  padding=\"5px 15px\"\r\n                                                  radius=\"30px\"\r\n                                              >\r\n                                                  Enable CTA\r\n                                              </Span>\r\n                                              <Switch\r\n                                                  color=\"primary\"\r\n                                                  size=\"small\"\r\n                                                  checked={nfCTAEnabled}\r\n                                                  onChange={() =>\r\n                                                      setNFCTAEnabled(\r\n                                                          !nfCTAEnabled\r\n                                                      )\r\n                                                  }\r\n                                              />\r\n                                          </ItemH>\r\n                                      </ItemH>\r\n                                  )}\r\n                              </Item>\r\n\r\n                              {(nfType === \"2\" ||\r\n                                  nfType === \"3\" ||\r\n                                  nfType === \"5\") && (\r\n                                  <Item\r\n                                      margin=\"15px 20px 15px 20px\"\r\n                                      flex=\"1\"\r\n                                      self=\"stretch\"\r\n                                      align=\"stretch\"\r\n                                  >\r\n                                      <Input\r\n                                          required\r\n                                          placeholder=\"Enter recipient wallet address\"\r\n                                          radius=\"4px\"\r\n                                          padding=\"12px\"\r\n                                          border=\"1px solid #674c9f\"\r\n                                          bg=\"#fff\"\r\n                                          value={nfRecipient}\r\n                                          onChange={(e) => {\r\n                                              setNFRecipient(e.target.value);\r\n                                          }}\r\n                                      />\r\n                                      {nfRecipient.trim().length == 0 && (\r\n                                          <Span\r\n                                              padding=\"4px 10px\"\r\n                                              right=\"0px\"\r\n                                              top=\"0px\"\r\n                                              pos=\"absolute\"\r\n                                              color=\"#fff\"\r\n                                              bg=\"#000\"\r\n                                              size=\"0.7rem\"\r\n                                              z=\"1\"\r\n                                          >\r\n                                              Recipient Wallet\r\n                                          </Span>\r\n                                      )}\r\n                                  </Item>\r\n                              )}\r\n\r\n                              {nfType === \"4\" && (\r\n                                  <>\r\n                                      <MultiRecipientsContainer>\r\n                                          {multipleRecipients.map(\r\n                                              (oneRecipient) => (\r\n                                                  <span key={oneRecipient}>\r\n                                                      {oneRecipient}\r\n                                                      <i\r\n                                                          onClick={() =>\r\n                                                              removeRecipient(\r\n                                                                  oneRecipient\r\n                                                              )\r\n                                                          }\r\n                                                      >\r\n                                                          <CloseIcon />\r\n                                                      </i>\r\n                                                  </span>\r\n                                              )\r\n                                          )}\r\n                                      </MultiRecipientsContainer>\r\n                                      <Item\r\n                                          margin=\"15px 20px 15px 20px\"\r\n                                          flex=\"1\"\r\n                                          self=\"stretch\"\r\n                                          align=\"stretch\"\r\n                                      >\r\n                                          <Input\r\n                                              required={\r\n                                                  multipleRecipients.length ===\r\n                                                  0\r\n                                              }\r\n                                              placeholder=\"Enter recipients wallet addresses seperated by a comma or by pressing the enter key\"\r\n                                              radius=\"4px\"\r\n                                              padding=\"12px\"\r\n                                              border=\"1px solid #674c9f\"\r\n                                              bg=\"#fff\"\r\n                                              value={tempRecipeint}\r\n                                              onKeyPress={\r\n                                                  handleSubsetInputChange\r\n                                              }\r\n                                              onChange={(e) => {\r\n                                                  const text =\r\n                                                      e.target.value.trim();\r\n                                                  console.log(text);\r\n                                                  console.log(tempRecipeint);\r\n                                                  // if (!LIMITER_KEYS.includes(text) && text.length > 0 ) {\r\n                                                  setTempRecipient(\r\n                                                      e.target.value\r\n                                                  );\r\n                                                  // }\r\n                                              }}\r\n                                          />\r\n                                          {nfRecipient.trim().length == 0 && (\r\n                                              <Span\r\n                                                  padding=\"4px 10px\"\r\n                                                  right=\"0px\"\r\n                                                  top=\"0px\"\r\n                                                  pos=\"absolute\"\r\n                                                  color=\"#fff\"\r\n                                                  bg=\"#000\"\r\n                                                  size=\"0.7rem\"\r\n                                                  z=\"1\"\r\n                                              >\r\n                                                  Recipient Wallet\r\n                                              </Span>\r\n                                          )}\r\n                                      </Item>\r\n                                  </>\r\n                              )}\r\n\r\n                              {nfType && nfSubEnabled && (\r\n                                  <Item\r\n                                      margin=\"15px 20px 15px 20px\"\r\n                                      flex=\"1\"\r\n                                      self=\"stretch\"\r\n                                      align=\"stretch\"\r\n                                  >\r\n                                      <Input\r\n                                          required\r\n                                          placeholder=\"Subject of Notification\"\r\n                                          padding=\"12px\"\r\n                                          borderBottom=\"1px solid #000\"\r\n                                          weight=\"400\"\r\n                                          size=\"1.2em\"\r\n                                          bg=\"#fff\"\r\n                                          value={nfSub}\r\n                                          onChange={(e) => {\r\n                                              setNFSub(e.target.value);\r\n                                          }}\r\n                                      />\r\n                                      {nfSub.trim().length == 0 && (\r\n                                          <Span\r\n                                              padding=\"4px 10px\"\r\n                                              right=\"0px\"\r\n                                              top=\"0px\"\r\n                                              pos=\"absolute\"\r\n                                              color=\"#fff\"\r\n                                              bg=\"#000\"\r\n                                              size=\"0.7rem\"\r\n                                              z=\"1\"\r\n                                          >\r\n                                              Subject\r\n                                          </Span>\r\n                                      )}\r\n                                  </Item>\r\n                              )}\r\n\r\n                              {nfType && (\r\n                                  <Item\r\n                                      margin=\"15px 20px 15px 20px\"\r\n                                      flex=\"1\"\r\n                                      self=\"stretch\"\r\n                                      align=\"stretch\"\r\n                                  >\r\n                                      <TextField\r\n                                          required\r\n                                          placeholder=\"Notification Message\"\r\n                                          rows=\"6\"\r\n                                          radius=\"4px\"\r\n                                          padding=\"12px\"\r\n                                          weight=\"400\"\r\n                                          border=\"1px solid #000\"\r\n                                          bg=\"#fff\"\r\n                                          value={nfMsg}\r\n                                          onChange={(e) => {\r\n                                              setNFMsg(e.target.value);\r\n                                          }}\r\n                                          autocomplete=\"off\"\r\n                                      />\r\n                                  </Item>\r\n                              )}\r\n\r\n                              {nfType && nfMediaEnabled && (\r\n                                  <ItemH\r\n                                      padding=\"15px 20px 15px 20px\"\r\n                                      flex=\"1\"\r\n                                      self=\"stretch\"\r\n                                      align=\"center\"\r\n                                  >\r\n                                      <Item flex=\"0\" margin=\"0px 5px 0px 0px\">\r\n                                          <BsFillImageFill\r\n                                              size={24}\r\n                                              color=\"#000\"\r\n                                          />\r\n                                      </Item>\r\n                                      <Item\r\n                                          flex=\"1\"\r\n                                          margin=\"0px 0px 0px 5px\"\r\n                                          align=\"stretch\"\r\n                                      >\r\n                                          <Input\r\n                                              required\r\n                                              placeholder=\"Media URL for Notification\"\r\n                                              padding=\"12px\"\r\n                                              border=\"1px solid #000\"\r\n                                              radius=\"4px\"\r\n                                              weight=\"400\"\r\n                                              bg=\"#f1f1f1\"\r\n                                              value={nfMedia}\r\n                                              onChange={(e) => {\r\n                                                  setNFMedia(e.target.value);\r\n                                              }}\r\n                                          />\r\n                                          {nfMedia.trim().length == 0 && (\r\n                                              <Span\r\n                                                  padding=\"4px 10px\"\r\n                                                  right=\"0px\"\r\n                                                  top=\"0px\"\r\n                                                  pos=\"absolute\"\r\n                                                  color=\"#fff\"\r\n                                                  bg=\"#000\"\r\n                                                  size=\"0.7rem\"\r\n                                                  z=\"1\"\r\n                                              >\r\n                                                  Media URL\r\n                                              </Span>\r\n                                          )}\r\n                                      </Item>\r\n                                  </ItemH>\r\n                              )}\r\n\r\n                              {nfType && nfCTAEnabled && (\r\n                                  <ItemH\r\n                                      margin=\"15px 20px 15px 20px\"\r\n                                      flex=\"1\"\r\n                                      self=\"stretch\"\r\n                                      align=\"center\"\r\n                                  >\r\n                                      <Item flex=\"0\" margin=\"0px 5px 0px 0px\">\r\n                                          <FiLink size={24} color=\"#000\" />\r\n                                      </Item>\r\n                                      <Item\r\n                                          flex=\"1\"\r\n                                          margin=\"0px 0px 0px 5px\"\r\n                                          align=\"stretch\"\r\n                                      >\r\n                                          <Input\r\n                                              required\r\n                                              placeholder=\"Call to Action Link\"\r\n                                              padding=\"12px\"\r\n                                              border=\"1px solid #000\"\r\n                                              radius=\"4px\"\r\n                                              weight=\"400\"\r\n                                              bg=\"#f1f1f1\"\r\n                                              value={nfCTA}\r\n                                              onChange={(e) => {\r\n                                                  setNFCTA(e.target.value);\r\n                                              }}\r\n                                          />\r\n                                          {nfCTA.trim().length == 0 && (\r\n                                              <Span\r\n                                                  padding=\"4px 10px\"\r\n                                                  right=\"0px\"\r\n                                                  top=\"0px\"\r\n                                                  pos=\"absolute\"\r\n                                                  color=\"#fff\"\r\n                                                  bg=\"#000\"\r\n                                                  size=\"0.7rem\"\r\n                                                  z=\"1\"\r\n                                              >\r\n                                                  Call to Action URL\r\n                                              </Span>\r\n                                          )}\r\n                                      </Item>\r\n                                  </ItemH>\r\n                              )}\r\n\r\n                              {nfInfo && nfProcessing != 1 && (\r\n                                  <Item\r\n                                      color=\"#fff\"\r\n                                      bg=\"#e1087f\"\r\n                                      padding=\"10px 15px\"\r\n                                      margin=\"15px 0px\"\r\n                                  >\r\n                                      <Span\r\n                                          color=\"#fff\"\r\n                                          textTransform=\"uppercase\"\r\n                                          spacing=\"0.1em\"\r\n                                          weight=\"400\"\r\n                                          size=\"1em\"\r\n                                      >\r\n                                          {nfInfo}\r\n                                      </Span>\r\n                                  </Item>\r\n                              )}\r\n\r\n                              {nfType && (\r\n                                  <Item\r\n                                      margin=\"15px 0px 0px 0px\"\r\n                                      flex=\"1\"\r\n                                      self=\"stretch\"\r\n                                      align=\"stretch\"\r\n                                  >\r\n                                      <Button\r\n                                          bg=\"#e20880\"\r\n                                          color=\"#fff\"\r\n                                          flex=\"1\"\r\n                                          radius=\"0px\"\r\n                                          padding=\"20px 10px\"\r\n                                          disabled={\r\n                                              nfProcessing == 1 ? true : false\r\n                                          }\r\n                                      >\r\n                                          {nfProcessing == 1 && (\r\n                                              <Loader\r\n                                                  type=\"Oval\"\r\n                                                  color=\"#fff\"\r\n                                                  height={24}\r\n                                                  width={24}\r\n                                              />\r\n                                          )}\r\n                                          {nfProcessing != 1 && (\r\n                                              <Input\r\n                                                  cursor=\"hand\"\r\n                                                  textTransform=\"uppercase\"\r\n                                                  color=\"#fff\"\r\n                                                  weight=\"400\"\r\n                                                  size=\"0.8em\"\r\n                                                  spacing=\"0.2em\"\r\n                                                  type=\"submit\"\r\n                                                  value=\"Send Notification\"\r\n                                              />\r\n                                          )}\r\n                                      </Button>\r\n                                  </Item>\r\n                              )}\r\n                          </FormSubmision>\r\n                      </Item>\r\n                  </ModifiedContent>\r\n              </Section>\r\n          )}\r\n      </>\r\n  );\r\n  }\r\n\r\n  // css styles\r\n  const Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n  `;\r\n\r\n  const ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n  `;\r\n\r\n  const DropdownStyledParent = styled.div`\r\n  .is-open {\r\n      margin-bottom: 130px;\r\n  }\r\n  `;\r\n\r\n  const MultiRecipientsContainer = styled.div`\r\n  width: 100%;\r\n  padding: 0px 20px;\r\n  padding-top: 10px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 7px 15px;\r\n  span {\r\n      color: white;\r\n      background: #e20880;\r\n      padding: 6px 10px;\r\n      border-radius: 5px;\r\n      i {\r\n          cursor: pointer;\r\n          margin-left: 25px;\r\n      }\r\n  }\r\n  `;\r\n\r\n  const ModifiedContent = styled(Content)`\r\n  padding-top: 20px;\r\n  font-weight: 400;\r\n  `;\r\n\r\n  const DropdownHeader = styled.div`\r\n  color: black;\r\n  padding: 10px;\r\n  letter-spacing: 3px;\r\n  font-size: 14px;\r\n  `;\r\n\r\n  const DropdownStyled = styled(Dropdown)`\r\n  .Dropdown-control {\r\n      background-color: #000;\r\n      color: #fff;\r\n      padding: 12px 52px 12px 10px;\r\n      border: 1px solid #000;\r\n      border-radius: 4px;\r\n  }\r\n  .Dropdown-placeholder {\r\n      text-transform: uppercase;\r\n      font-weight: 400;\r\n      letter-spacing: 0.2em;\r\n      font-size: 0.8em;\r\n  }\r\n  .Dropdown-arrow {\r\n      top: 18px;\r\n      bottom: 0;\r\n      border-color: #fff transparent transparent;\r\n  }\r\n  .Dropdown-menu {\r\n      border: 1px solid #000;\r\n      box-shadow: none;\r\n      background-color: #000;\r\n      border-radius: 0px;\r\n      margin-top: -2px;\r\n      border-bottom-right-radius: 4px;\r\n      border-bottom-left-radius: 4px;\r\n  }\r\n  .Dropdown-option {\r\n      background-color: rgb(35 35 35);\r\n      color: #ffffff99;\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.2em;\r\n      font-size: 0.7em;\r\n      padding: 15px 20px;\r\n  }\r\n  .Dropdown-option:hover {\r\n      background-color: #000000;\r\n      color: #fff;\r\n  }\r\n  `;\r\n\r\n  const DropdownStyledWhite = styled(DropdownStyled)`\r\n  .Dropdown-control {\r\n      color: #000;\r\n      background: #fafafa;\r\n      border: 0px;\r\n      padding: 15px 52px 15px 10px;\r\n  }\r\n  .Dropdown-arrow {\r\n      border-color: #000 transparent transparent;\r\n      top: 30px;\r\n  }\r\n  .Dropdown-menu {\r\n      border: 0px;\r\n      background-color: #fafafa;\r\n  }\r\n  .Dropdown-option {\r\n      background-color: #fafafa;\r\n      color: black;\r\n      transition: 300ms;\r\n  }\r\n  .Dropdown-option:hover {\r\n      background-color: #e7e6e6;\r\n  }\r\n  .Dropdown-option.is-selected {\r\n      background-color: #f1efef;\r\n  }\r\n  `;\r\n\r\n  const DropdownStyledParentWhite = styled(DropdownStyledParent)`\r\n  margin-bottom: 20px;\r\n  border: 1px solid rgba(169, 169, 169, 0.5);\r\n  `;\r\n\r\n  const CustomDropdownItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  img {\r\n      height: 30px;\r\n      width: 30px;\r\n      border-radius: 50%;\r\n      margin-right: 10px;\r\n  }\r\n  div {\r\n      color: black;\r\n      font-size: 16px;\r\n      letter-spacing: 2px;\r\n  }\r\n  `;\r\n\r\n  // Export Default\r\n  export default SendNotifications;\r\n","import React from \"react\";\r\n\r\nimport styled, { css } from 'styled-components';\r\nimport {Section, Content} from 'components/SharedStyling';\r\n\r\nimport CreateChannel from 'components/CreateChannel';\r\n\r\n// CREATE CHANNEL OWNER DASHBOARD\r\nfunction ChannelCreationDashboard() {\r\n  React.useEffect(() => {\r\n\r\n  });\r\n\r\n  // RRENDER\r\n  return (\r\n    <>\r\n      <Section>\r\n        <Content padding=\"0px\">\r\n          <CreateChannel />\r\n        </Content>\r\n      </Section>\r\n    </>\r\n  );\r\n}\r\n\r\n// css styles\r\n\r\n\r\n// Export Default\r\nexport default ChannelCreationDashboard;\r\n","/**\r\n * This file helps us to maintain the state of the logged in user user(if they have an account)\r\n * as well as the privilidges the logged in user has\r\n */\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n    channelDetails: null,\r\n    canVerify: false,\r\n    delegatees: []\r\n};\r\n\r\nexport const contractSlice = createSlice({\r\n    name: \"admin\",\r\n    initialState,\r\n    reducers: {\r\n        setUserChannelDetails: (state, action) => {\r\n            state.channelDetails = action.payload;\r\n        },\r\n        setCanVerify: (state, action) => {\r\n            state.canVerify = action.payload;\r\n        },\r\n        setDelegatees: (state, action) => {\r\n            state.delegatees = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nexport const {\r\n    setUserChannelDetails,\r\n    setCanVerify,\r\n    setDelegatees\r\n} = contractSlice.actions;\r\n\r\nexport default contractSlice.reducer;","import React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\nimport { ethers } from \"ethers\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport hex2ascii from \"hex2ascii\";\r\nimport { addresses, abis, envConfig } from \"@project/contracts\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport config from \"config\";\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport NotificationToast from \"components/NotificationToast\";\r\nimport AliasVerificationodal from \"components/AliasVerificationModal\";\r\n\r\nimport Info from \"segments/Info\";\r\nimport SpamBox from \"segments/spam\";\r\n\r\nimport ViewChannels from \"segments/ViewChannels\";\r\nimport Feedbox from \"segments/Feedbox\";\r\n\r\nimport ChannelOwnerDashboard from \"segments/ChannelOwnerDashboard\";\r\nimport ChannelCreationDashboard from \"segments/ChannelCreationDashboard\";\r\n\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport UsersDataStore from \"singletons/UsersDataStore\";\r\nimport { postReq } from \"api\";\r\n\r\nimport {\r\n  setCoreReadProvider,\r\n  setCoreWriteProvider,\r\n  setCommunicatorReadProvider,\r\n  setCommunicatorWriteProvider,\r\n  setPushAdmin,\r\n} from \"redux/slices/contractSlice\";\r\nimport {\r\n  setUserChannelDetails,\r\n  setCanVerify,\r\n  setDelegatees,\r\n} from \"redux/slices/adminSlice\";\r\nimport { addNewNotification, toggleToggler, resetState } from \"redux/slices/notificationSlice\";\r\n\r\nexport const ALLOWED_CORE_NETWORK = envConfig.coreContractChain; //chainId of network which we have deployed the core contract on\r\nconst CHANNEL_TAB = 1; //Default to 1 which is the channel tab\r\n\r\n// Create Header\r\nfunction Home() {\r\n  ReactGA.pageview(\"/home\");\r\n\r\n  const dispatch = useDispatch();\r\n  const { account, library, chainId } = useWeb3React();\r\n  const {\r\n    epnsReadProvider,\r\n    epnsWriteProvider,\r\n    epnsCommReadProvider,\r\n  } = useSelector((state) => state.contracts);\r\n\r\n  const onCoreNetwork = ALLOWED_CORE_NETWORK === chainId;\r\n  const INITIAL_OPEN_TAB = CHANNEL_TAB; //if they are not on a core network.redirect then to the notifications page\r\n\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const [adminStatusLoaded, setAdminStatusLoaded] = React.useState(false);\r\n  const [aliasEthAccount, setAliasEthAccount] = React.useState(null);\r\n  const [aliasVerified, setAliasVerified] = React.useState(null); // null means error, false means unverified and true means verified\r\n  const [channelAdmin, setChannelAdmin] = React.useState(false);\r\n  const [channelJson, setChannelJson] = React.useState([]);\r\n\r\n  // toast related section\r\n  const [toast, showToast] = React.useState(null);\r\n  const clearToast = () => showToast(null);\r\n  const showNetworkToast = () => {\r\n    showToast({\r\n      notificationTitle: (\r\n        <span style={{ color: \"#e20880\" }}> Invalid Network </span>\r\n      ),\r\n      notificationBody:\r\n        \"Please connect to the Ethereum network to access channels\",\r\n    });\r\n  };\r\n\r\n  //clear toast variable after it is shown\r\n  React.useEffect(() => {\r\n    if (toast) {\r\n      clearToast();\r\n    }\r\n  }, [toast]);\r\n  // toast related section\r\n\r\n  React.useEffect(() => {\r\n    dispatch(resetState());\r\n    setTimeout(() => dispatch(toggleToggler()), 300)\r\n  }, [account]);\r\n\r\n  /**\r\n   * Logic to get channel alias and alias verification status as well as create instances of core and comunicator contract\r\n   */\r\n  React.useEffect(() => {\r\n    (async function init() {\r\n      const coreProvider = onCoreNetwork\r\n        ? library\r\n        : ethers.getDefaultProvider(ALLOWED_CORE_NETWORK, {\r\n            etherscan: config.etherscanToken,\r\n          });\r\n      // if we are not on the core network then check for if this account is an alias for another channel\r\n      if (!onCoreNetwork) {\r\n        // get the eth address of the alias address, in order to properly render information about the channel\r\n        const aliasEth = await postReq(\"/channels/get_eth_address\", {\r\n          aliasAddress: account,\r\n          op: \"read\",\r\n        }).then(({ data }) => {\r\n          console.log({ data });\r\n          const ethAccount = data;\r\n          if (ethAccount) {\r\n            setAliasEthAccount(ethAccount.ethAddress);\r\n          }\r\n          return data;\r\n        });\r\n        if (aliasEth) {\r\n          // if an alias exists, check if its verified.\r\n          await postReq(\"/channels/get_alias_verification_status\", {\r\n            aliasAddress: account,\r\n            op: \"read\",\r\n          }).then(({ data }) => {\r\n            // if it returns undefined then we need to let them know to verify their channel\r\n            if (!data) {\r\n              setAliasVerified(false);\r\n              return;\r\n            }\r\n            const { status } = data;\r\n            setAliasVerified(status || null);\r\n            return data;\r\n          });\r\n        }\r\n      }\r\n      // if we are not on the core network then fetch if there is an alias address from the api\r\n      // inititalise the read contract for the core network\r\n      const coreContractInstance = new ethers.Contract(\r\n        addresses.epnscore,\r\n        abis.epnscore,\r\n        coreProvider\r\n      );\r\n      // initialise the read contract for the communicator function\r\n      const commAddress = onCoreNetwork\r\n        ? addresses.epnsEthComm\r\n        : addresses.epnsPolyComm;\r\n      const commContractInstance = new ethers.Contract(\r\n        commAddress,\r\n        abis.epnsComm,\r\n        library\r\n      );\r\n      dispatch(setCommunicatorReadProvider(commContractInstance));\r\n      dispatch(setCoreReadProvider(coreContractInstance));\r\n      // initialise the read contract for the communicator function\r\n      if (!!(library && account)) {\r\n        let signer = library.getSigner(account);\r\n        const coreSignerInstance = new ethers.Contract(\r\n          addresses.epnscore,\r\n          abis.epnscore,\r\n          signer\r\n        );\r\n        const communicatorSignerInstance = new ethers.Contract(\r\n          commAddress,\r\n          abis.epnsComm,\r\n          signer\r\n        );\r\n        dispatch(setCoreWriteProvider(coreSignerInstance));\r\n        dispatch(setCommunicatorWriteProvider(communicatorSignerInstance));\r\n      }\r\n    })();\r\n  }, [account, chainId]);\r\n\r\n  /**\r\n   * When we instantiate the contract instances, fetch basic information about the user\r\n   * Corresponding channel owned.\r\n   */\r\n  React.useEffect(() => {\r\n    if (!epnsReadProvider || !epnsCommReadProvider) return;\r\n    // Reset when account refreshes\r\n    setChannelAdmin(false);\r\n    dispatch(setUserChannelDetails(null));\r\n    setAdminStatusLoaded(false);\r\n    userClickedAt(INITIAL_OPEN_TAB);\r\n    setChannelJson([]);\r\n    // save push admin to global state\r\n    epnsReadProvider.pushChannelAdmin().then((response) => {\r\n      dispatch(setPushAdmin(response));\r\n    });\r\n\r\n    // EPNS Read Provider Set\r\n    if (epnsReadProvider != null && epnsCommReadProvider != null) {\r\n      // Instantiate Data Stores\r\n      UsersDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      ChannelsDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      checkUserForChannelOwnership();\r\n      fetchDelegators();\r\n    }\r\n  }, [epnsReadProvider, epnsCommReadProvider]);\r\n\r\n  // handle user action at control center\r\n  const userClickedAt = (controlIndex) => {\r\n    setControlAt(controlIndex);\r\n  };\r\n\r\n  // fetch all the channels who have delegated to this account\r\n  const fetchDelegators = () => {\r\n    postReq(\"/channels/delegatee/get_channels\", {\r\n      delegateAddress: account,\r\n      op: \"read\",\r\n    })\r\n      .then(async ({ data: delegators }) => {\r\n        // if there are actual delegators\r\n        // fetch basic information abouot the channels and store it to state\r\n        if (delegators && delegators.channelOwners) {\r\n          const channelInformationPromise = [\r\n            ...new Set([account, ...delegators.channelOwners])//make the accounts unique\r\n          ].map((channelAddress) =>\r\n            ChannelsDataStore.instance\r\n              .getChannelJsonAsync(channelAddress)\r\n              .then((res) => ({ ...res, address: channelAddress }))\r\n              .catch(() => false)\r\n          );\r\n          const channelInformation = await Promise.all(\r\n            channelInformationPromise\r\n          );\r\n          dispatch(setDelegatees(channelInformation.filter(Boolean)));\r\n          // fetch the json information about this delegatee channel and add to global state\r\n        } else {\r\n          dispatch(setDelegatees([]));\r\n        }\r\n      })\r\n      .catch(async (err) => {\r\n        console.log({ err });\r\n      });\r\n  };\r\n\r\n  // Check if a user is a channel or not\r\n  const checkUserForChannelOwnership = async () => {\r\n    // Check if account is admin or not and handle accordingly\r\n    const ownerAccount = !onCoreNetwork ? aliasEthAccount : account;\r\n    EPNSCoreHelper.getChannelJsonFromUserAddress(ownerAccount, epnsReadProvider)\r\n      .then(async (response) => {\r\n        // if channel admin, then get if the channel is verified or not, then also fetch more details about the channel\r\n        const verificationStatus = await epnsWriteProvider.getChannelVerfication(\r\n          ownerAccount\r\n        );\r\n        const channelJson = await epnsWriteProvider.channels(ownerAccount);\r\n        const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n          ownerAccount\r\n        );\r\n        dispatch(\r\n          setUserChannelDetails({\r\n            ...response,\r\n            ...channelJson,\r\n            subscribers: channelSubscribers,\r\n          })\r\n        );\r\n        dispatch(setCanVerify(Boolean(verificationStatus)));\r\n        setChannelJson(response);\r\n        setChannelAdmin(true);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          \"There was an error [checkUserForChannelOwnership]:\",\r\n          err.message\r\n        );\r\n        setChannelAdmin(false);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .finally(() => {\r\n        setAdminStatusLoaded(true);\r\n      });\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <Container>\r\n      <Controls>\r\n        <ControlButton\r\n          index={0}\r\n          active={controlAt == 0 ? 1 : 0}\r\n          border=\"#e20880\"\r\n          onClick={() => {\r\n            userClickedAt(0);\r\n          }}\r\n        >\r\n          <ControlImage\r\n            src=\"./svg/feedbox.svg\"\r\n            active={controlAt == 0 ? 1 : 0}\r\n          />\r\n          <ControlText active={controlAt == 0 ? 1 : 0}>Inbox</ControlText>\r\n        </ControlButton>\r\n\r\n        <ControlButton\r\n          index={1}\r\n          active={controlAt == 1 ? 1 : 0}\r\n          border=\"#35c5f3\"\r\n          onClick={() => {\r\n            userClickedAt(1);\r\n          }}\r\n        >\r\n          <ControlImage\r\n            src=\"./svg/channel.svg\"\r\n            active={controlAt == 1 ? 1 : 0}\r\n          />\r\n          <ControlText active={controlAt == 1 ? 1 : 0}>Channels</ControlText>\r\n        </ControlButton>\r\n\r\n        <ControlButton\r\n          index={2}\r\n          active={controlAt == 2 ? 1 : 0}\r\n          border=\"#674c9f\"\r\n          disabled={!adminStatusLoaded}\r\n          onClick={() => {\r\n            if (adminStatusLoaded) {\r\n              // if youre not on kovan and you dont have a channel, you cannot create except on kovan, so throw error\r\n              if (!channelAdmin && !onCoreNetwork) {\r\n                return showNetworkToast();\r\n              }\r\n              if (channelAdmin && !aliasVerified && !onCoreNetwork) {\r\n                return setModalOpen(true);\r\n              }\r\n              userClickedAt(2);\r\n            }\r\n          }}\r\n        >\r\n          {!adminStatusLoaded && (\r\n            <Loader type=\"Oval\" color=\"#674c9f\" height={32} width={32} />\r\n          )}\r\n          {channelAdmin &&\r\n            adminStatusLoaded &&\r\n            (onCoreNetwork ? true : aliasVerified) && (\r\n              <ControlChannelContainer>\r\n                <ControlChannelImage\r\n                  src={`${channelJson.icon}`}\r\n                  active={controlAt == 2 ? 1 : 0}\r\n                />\r\n                <ControlChannelText active={controlAt == 2 ? 1 : 0}>\r\n                  {channelJson.name}\r\n                </ControlChannelText>\r\n              </ControlChannelContainer>\r\n            )}\r\n          {channelAdmin &&\r\n            adminStatusLoaded &&\r\n            aliasVerified === false &&\r\n            !onCoreNetwork && (\r\n              <ControlChannelContainer>\r\n                <ControlChannelImage\r\n                  src={`${channelJson.icon}`}\r\n                  active={controlAt == 2 ? 1 : 0}\r\n                />\r\n                <ControlChannelText active={controlAt == 2 ? 1 : 0}>\r\n                  Verify channel alias\r\n                </ControlChannelText>\r\n              </ControlChannelContainer>\r\n            )}\r\n          {channelAdmin &&\r\n            adminStatusLoaded &&\r\n            aliasVerified === null &&\r\n            !onCoreNetwork && (\r\n              <ControlChannelContainer>\r\n                <ControlChannelImage\r\n                  src={`${channelJson.icon}`}\r\n                  active={controlAt == 2 ? 1 : 0}\r\n                />\r\n                <ControlChannelText active={controlAt == 2 ? 1 : 0}>\r\n                  Contact the admin\r\n                </ControlChannelText>\r\n              </ControlChannelContainer>\r\n            )}\r\n          {!channelAdmin && adminStatusLoaded && (\r\n            <>\r\n              <ControlImage\r\n                src=\"./svg/channeladmin.svg\"\r\n                active={controlAt == 2 ? 1 : 0}\r\n              />\r\n              <ControlText active={controlAt == 2 ? 1 : 0}>\r\n                Create Your Channel\r\n              </ControlText>\r\n            </>\r\n          )}\r\n        </ControlButton>\r\n\r\n        <ControlButton\r\n          index={3}\r\n          active={controlAt == 3 ? 1 : 0}\r\n          border=\"#e20880\"\r\n          onClick={() => {\r\n            userClickedAt(3);\r\n          }}\r\n        >\r\n          <ControlImage src=\"./svg/share.svg\" active={controlAt == 3 ? 1 : 0} />\r\n          <ControlText active={controlAt == 3 ? 1 : 0}>\r\n            Receive Notifs\r\n          </ControlText>\r\n        </ControlButton>\r\n      </Controls>\r\n      <Interface>\r\n        {controlAt == 0 && <Feedbox />}\r\n        {controlAt == 1 && <ViewChannels />}\r\n        {controlAt == 2 && adminStatusLoaded && <ChannelOwnerDashboard />}\r\n        {controlAt == 3 && <Info />}\r\n        {toast && (\r\n          <NotificationToast notification={toast} clearToast={clearToast} />\r\n        )}\r\n        {modalOpen && (\r\n          <AliasVerificationodal\r\n            onClose={() => setModalOpen(false)}\r\n            onSuccess={() => setAliasVerified(true)}\r\n            verificationStatus={aliasVerified}\r\n          />\r\n        )}\r\n      </Interface>\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: block;\r\n  flex-direction: column;\r\n  min-height: calc(100vh - 100px);\r\n`;\r\n\r\nconst Controls = styled.div`\r\n  flex: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ControlButton = styled.div`\r\n  flex: 1 1 21%;\r\n  height: 120px;\r\n  min-width: 200px;\r\n  background: #fff;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 15px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  border-bottom: 10px solid rgb(180, 180, 180);\r\n  margin: 20px;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  border-bottom: 10px solid\r\n    ${(props) => (props.active ? props.border : \"rgb(180,180,180)\")};\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ControlImage = styled.img`\r\n  height: 30%;\r\n  margin-right: 15px;\r\n  filter: ${(props) => (props.active ? \"brightness(1)\" : \"brightness(0)\")};\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.25\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-20px, 0px);\r\n      opacity: 0.4;\r\n    `};\r\n`;\r\n\r\nconst ControlText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 200;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.3) translate(-10px, 0px);\r\n    `};\r\n`;\r\n\r\nconst ControlChannelContainer = styled.div`\r\n  margin: 0px 20px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst ControlChannelImage = styled.img`\r\n  width: 20%;\r\n  margin-bottom: 10px;\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-40px, 5px);\r\n      opacity: 0.2;\r\n      z-index: 1;\r\n    `};\r\n`;\r\n\r\nconst ControlChannelText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 300;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n  transition: transform 0.2s ease-out;\r\n  background: -webkit-linear-gradient(#db268a, #34c6f3);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  z-index: 2;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.1) translate(0px, -20px);\r\n    `};\r\n`;\r\n\r\nconst Interface = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 20px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  margin: 15px;\r\n  overflow: hidden;\r\n`;\r\n\r\n// Export Default\r\nexport default Home;\r\n","import React, {useRef, useState} from 'react';\r\nimport { useClick, useClickAway } from 'react-use';\r\nimport styled ,  {useTheme} from 'styled-components';\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport {Item, H2, H3, Span, Button, Input} from 'components/SharedStyling';\r\n\r\nconst ethers = require('ethers');\r\n\r\n\r\nexport default function AddDelegateModal({\r\n    onClose,onSuccess, addDelegate\r\n}) {\r\n\r\n    const themes = useTheme();\r\n    console.log(themes);\r\n    const modalRef = useRef(null);\r\n    const [mainAdress, setMainAddress] = useState('');\r\n    const [loading, setLoading] = useState('');\r\n\r\n    // Form signer and contract connection\r\n    useClickAway(modalRef, onClose);\r\n\r\n    const addDelegateFunction = () => {\r\n        setLoading('loading')\r\n        addDelegate(mainAdress)\r\n        .then(async (tx) => {\r\n            console.log(tx);\r\n            setLoading(\"Transaction Sent!\");\r\n\r\n            setTimeout(() => {\r\n                onSuccess();\r\n                onClose();\r\n            }, 2000);\r\n\r\n        })\r\n        .catch((err) => {\r\n            console.log({\r\n                err\r\n            })\r\n            setLoading('There was an error');\r\n            setTimeout(() => {\r\n                setLoading('')\r\n            }, 2000)\r\n        })\r\n    };\r\n    \r\n\r\n    return (\r\n        <Overlay>\r\n            <AliasModal ref={modalRef} background={themes}>\r\n                <Item align=\"flex-start\">\r\n                    <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n                    <Span weight=\"200\">Add </Span><Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Delegate</Span>\r\n                    </H2>\r\n                    <H3>Add an account who can send notifications on your behalf.</H3>\r\n                </Item>\r\n                <Item align=\"flex-start\">\r\n                    <CustomInput\r\n                        required\r\n                        placeholder=\"Enter the ethereum address\"\r\n                        radius=\"4px\"\r\n                        padding=\"12px\"\r\n                        border=\"1px solid #674c9f\"\r\n                        bg=\"#fff\"\r\n                        value={mainAdress}\r\n                        onChange={(e) => {setMainAddress(e.target.value)}}\r\n                    />\r\n                </Item>\r\n                <Item margin=\"15px 0px 0px 0px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\r\n                    <Button\r\n                        bg='#e20880'\r\n                        color='#fff'\r\n                        flex=\"1\"\r\n                        radius=\"0px\"\r\n                        padding=\"20px 10px\"\r\n                        disabled={mainAdress.length !== 42}\r\n                        onClick={addDelegateFunction}\r\n                    >\r\n                        { loading && <Loader\r\n                            type=\"Oval\"\r\n                            color=\"#FFF\"\r\n                            height={16}\r\n                            width={16}\r\n                            />\r\n                        }\r\n                        <StyledInput\r\n                            cursor=\"hand\"\r\n                            textTransform=\"uppercase\"\r\n                            color=\"#fff\" weight=\"400\"\r\n                            size=\"0.8em\" spacing=\"0.2em\"\r\n                            value={loading ? loading : \"Add Delegate\"}\r\n                        />\r\n                    </Button>\r\n                </Item>\r\n            </AliasModal>\r\n        </Overlay>\r\n    )\r\n}\r\n\r\nconst StyledInput = styled(Input)`\r\n    width: 100%;\r\n    text-align: center;\r\n    caret-color: transparent;\r\n`\r\n\r\nconst CustomInput = styled(Input)`\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin: 20px 0px;\r\n`;\r\n\r\nconst Overlay = styled.div`\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0,0,0,0.85);\r\n    height: 100%;\r\n    width: 100%;\r\n    z-index: 1000;\r\n    position: fixed;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow-y: scroll;\r\n`;\r\n\r\nconst AliasModal = styled.div`\r\n    padding: 20px 30px;\r\n    background: ${props => props.background.mainBg};\r\n`;","import React, {useRef, useState} from 'react';\r\nimport { useClickAway } from 'react-use';\r\nimport styled from 'styled-components';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport {Item, H2, H3, Span, Button, Input} from 'components/SharedStyling';\r\n\r\n\r\n\r\nexport default function RemoveDelegateModal({\r\n    onClose,onSuccess, removeDelegate\r\n}) {\r\n\r\n    const modalRef = useRef(null);\r\n    const [mainAdress, setMainAddress] = useState('');\r\n    const [loading, setLoading] = useState('');\r\n\r\n    // Form signer and contract connection\r\n    useClickAway(modalRef, onClose);\r\n\r\n    const addDelegateFunction = () => {\r\n        setLoading('loading')\r\n        removeDelegate(mainAdress)\r\n        .then(async (tx) => {\r\n            console.log(tx);\r\n            setLoading(\"Transaction Sent!\");\r\n\r\n            setTimeout(() => {\r\n                onSuccess();\r\n                onClose();\r\n            }, 2000);\r\n\r\n        })\r\n        .catch((err) => {\r\n            console.log({\r\n                err\r\n            })\r\n            setLoading('There was an error');\r\n            setTimeout(() => {\r\n                setLoading('')\r\n            }, 2000)\r\n        })\r\n    };\r\n    \r\n\r\n    return (\r\n        <Overlay>\r\n            <AliasModal ref={modalRef}>\r\n                <Item align=\"flex-start\">\r\n                    <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n                    <Span weight=\"200\">Remove </Span><Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Delegate</Span>\r\n                    </H2>\r\n                    <H3>Remove an account who can send notifications on your behalf.</H3>\r\n                </Item>\r\n                <Item align=\"flex-start\">\r\n                    <CustomInput\r\n                        required\r\n                        placeholder=\"Enter the ethereum address\"\r\n                        radius=\"4px\"\r\n                        padding=\"12px\"\r\n                        border=\"1px solid #674c9f\"\r\n                        bg=\"#fff\"\r\n                        value={mainAdress}\r\n                        onChange={(e) => {setMainAddress(e.target.value)}}\r\n                    />\r\n                </Item>\r\n                <Item margin=\"15px 0px 0px 0px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\r\n                    <Button\r\n                        bg='#e20880'\r\n                        color='#fff'\r\n                        flex=\"1\"\r\n                        radius=\"0px\"\r\n                        padding=\"20px 10px\"\r\n                        disabled={mainAdress.length !== 42}\r\n                        onClick={addDelegateFunction}\r\n                    >\r\n                        { loading && <Loader\r\n                            type=\"Oval\"\r\n                            color=\"#FFF\"\r\n                            height={16}\r\n                            width={16}\r\n                            />\r\n                        }\r\n                        <StyledInput\r\n                            cursor=\"hand\"\r\n                            textTransform=\"uppercase\"\r\n                            color=\"#fff\" weight=\"400\"\r\n                            size=\"0.8em\" spacing=\"0.2em\"\r\n                            value={loading ? loading : \"Remove Delegate\"}\r\n                        />\r\n                    </Button>\r\n                </Item>\r\n            </AliasModal>\r\n        </Overlay>\r\n    )\r\n}\r\n\r\nconst StyledInput = styled(Input)`\r\n    width: 100%;\r\n    text-align: center;\r\n    caret-color: transparent;\r\n`\r\n\r\nconst CustomInput = styled(Input)`\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin: 20px 0px;\r\n`;\r\n\r\nconst Overlay = styled.div`\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0,0,0,0.85);\r\n    height: 100%;\r\n    width: 100%;\r\n    z-index: 1000;\r\n    position: fixed;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow-y: scroll;\r\n`;\r\n\r\nconst AliasModal = styled.div`\r\n    padding: 20px 30px;\r\n    background: white;\r\n`;","import React, { useRef, useState } from \"react\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport styled from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { useClickAway } from \"react-use\";\r\nimport {\r\n  Section,\r\n  Content,\r\n  Item,\r\n  H3,\r\n  Span,\r\n  Button,\r\n} from \"components/SharedStyling\";\r\n\r\nconst MIN_STAKE_FEES = 50;\r\n\r\nexport default function ActivateChannelModal({\r\n  activateChannel,\r\n  loading,\r\n  setChannelStakeFees,\r\n  channelStakeFees,\r\n  onClose,\r\n}) {\r\n  const popupRef = React.useRef(null);\r\n  useClickAway(popupRef, onClose); //close the popoup when we click away\r\n  return (\r\n    <PopupOverlay>\r\n      <PopupSlider ref={popupRef}>\r\n        <Section>\r\n          <Content padding=\"50px 0px 0px 0px\">\r\n            <Item align=\"flex-start\" margin=\"0px 20px\">\r\n              <H3 color=\"#e20880\">Set your staking fees in DAI</H3>\r\n            </Item>\r\n\r\n            <Item\r\n              margin=\"-10px 20px 20px 20px\"\r\n              padding=\"20px 20px 10px 20px\"\r\n              bg=\"#f1f1f1\"\r\n            >\r\n              <Slider\r\n                defaultValue={MIN_STAKE_FEES}\r\n                onChangeCommitted={(_, value) =>\r\n                  setChannelStakeFees(Number(value))\r\n                }\r\n                aria-labelledby=\"discrete-slider\"\r\n                valueLabelDisplay=\"auto\"\r\n                step={MIN_STAKE_FEES}\r\n                marks\r\n                min={MIN_STAKE_FEES}\r\n                max={25000}\r\n              />\r\n              <Span\r\n                weight=\"400\"\r\n                size=\"1.0em\"\r\n                textTransform=\"uppercase\"\r\n                spacing=\"0.2em\"\r\n              >\r\n                Amount Staked: {channelStakeFees} DAI\r\n              </Span>\r\n            </Item>\r\n\r\n            <Item self=\"stretch\" align=\"stretch\" margin=\"20px 0px 0px 0px\">\r\n              <Button\r\n                bg=\"#e20880\"\r\n                color=\"#fff\"\r\n                flex=\"1\"\r\n                radius=\"0px\"\r\n                padding=\"20px 10px\"\r\n                onClick={activateChannel}\r\n              >\r\n                {loading ? (\r\n                  <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n                ) : (\r\n                  <Span\r\n                    color=\"#fff\"\r\n                    weight=\"400\"\r\n                    textTransform=\"uppercase\"\r\n                    spacing=\"0.1em\"\r\n                  >\r\n                    Reactivate Channel\r\n                  </Span>\r\n                )}\r\n              </Button>\r\n            </Item>\r\n          </Content>\r\n        </Section>\r\n      </PopupSlider>\r\n    </PopupOverlay>\r\n  );\r\n}\r\n\r\nconst PopupOverlay = styled.div`\r\n  background: rgba(0, 0, 0, 0.5);\r\n  height: 100vh;\r\n  width: 100vw;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1000;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst PopupSlider = styled.div`\r\n  height: 200px;\r\n  width: 70vw;\r\n  background: white;\r\n`;\r\n","import React from \"react\";\r\nimport { Section, Content, Item } from \"components/SharedStyling\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport styled, { css , useTheme } from \"styled-components\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { toast as toaster } from \"react-toastify\";\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { postReq } from \"api\";\r\n\r\nimport { ALLOWED_CORE_NETWORK } from \"pages/Home\";\r\nimport AddDelegateModal from \"./AddDelegateModal\";\r\nimport RemoveDelegateModal from \"./RemoveDelegateModal\";\r\nimport ActivateChannelModal from \"./ActivateChannelModal\";\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport { setUserChannelDetails } from \"redux/slices/adminSlice\";\r\n\r\nimport \"react-dropdown/style.css\";\r\nimport \"react-toastify/dist/ReactToastify.min.css\";\r\n\r\nimport Loader from \"react-loader-spinner\";\r\nconst ethers = require(\"ethers\");\r\n\r\nconst MIN_STAKE_FEES = 50;\r\n\r\n// Create Header\r\nfunction ChannelSettings() {\r\n  const dispatch = useDispatch();\r\n  const { account, library, chainId } = useWeb3React();\r\n  const { epnsWriteProvider, epnsCommWriteProvider } = useSelector(\r\n    (state: any) => state.contracts\r\n  );\r\n  const { channelDetails } = useSelector((state: any) => state.admin);\r\n  const {\r\n    CHANNNEL_DEACTIVATED_STATE,\r\n    CHANNEL_BLOCKED_STATE,\r\n    CHANNEL_ACTIVE_STATE,\r\n  } = useSelector((state: any) => state.channels);\r\n\r\n  const theme = useTheme();\r\n  const { channelState } = channelDetails;\r\n  const onCoreNetwork = ALLOWED_CORE_NETWORK === chainId;\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [\r\n    showActivateChannelPopup,\r\n    setShowActivateChannelPopup,\r\n  ] = React.useState(false);\r\n  const [channelStakeFees, setChannelStakeFees] = React.useState(\r\n    MIN_STAKE_FEES\r\n  );\r\n  const [poolContrib, setPoolContrib] = React.useState(0);\r\n  const [addDelegateLoading, setAddDelegateLoading] = React.useState(false);\r\n  const [addModalOpen, setAddModalOpen] = React.useState(false);\r\n  const [removeDelegateLoading, setRemoveDelegateLoading] = React.useState(\r\n    false\r\n  );\r\n  const [removeModalOpen, setRemoveModalOpen] = React.useState(false);\r\n\r\n  // toaster customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n    <Toaster>\r\n      <Loader type=\"Oval\" color={color} height={30} width={30} />\r\n      <ToasterMsg>{msg}</ToasterMsg>\r\n    </Toaster>\r\n  );\r\n\r\n  // Toastify\r\n  let notificationToast = () =>\r\n    toaster.dark(<LoaderToast msg=\"Preparing Notification\" color=\"#fff\" />, {\r\n      position: \"bottom-right\",\r\n      autoClose: false,\r\n      hideProgressBar: true,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n\r\n  const isChannelDeactivated = channelState === CHANNNEL_DEACTIVATED_STATE;\r\n  const isChannelBlocked = channelState === CHANNEL_BLOCKED_STATE;\r\n  const channelInactive = isChannelBlocked || isChannelDeactivated;\r\n\r\n  React.useEffect(() => {\r\n    // To set channel info from a channel details\r\n    // setChannelState(channelDetails.channelState);\r\n    setPoolContrib(\r\n      +EPNSCoreHelper.formatBigNumberToMetric(\r\n        channelDetails.poolContribution,\r\n        true\r\n      )\r\n    );\r\n  }, [account]);\r\n\r\n  const toggleChannelActivationState = () => {\r\n    if (isChannelBlocked) return;\r\n    if (isChannelDeactivated) {\r\n      setShowActivateChannelPopup(true);\r\n    } else {\r\n      deactivateChannel();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function to activate a channel that has been deactivated\r\n   */\r\n  const activateChannel = async () => {\r\n    // First Approve DAI\r\n    setLoading(true);\r\n    var signer = library.getSigner(account);\r\n    let daiContract = new ethers.Contract(addresses.dai, abis.erc20, signer);\r\n    const fees = ethers.utils.parseUnits(channelStakeFees.toString(), 18);\r\n    var sendTransactionPromise = daiContract.approve(addresses.epnscore, fees);\r\n    const tx = await sendTransactionPromise;\r\n\r\n    console.log(tx);\r\n    console.log(\"waiting for tx to finish\");\r\n\r\n    await library.waitForTransaction(tx.hash);\r\n    await epnsWriteProvider\r\n      .reactivateChannel(fees)\r\n      .then(async (tx: any) => {\r\n        console.log(tx);\r\n        console.log(\"Transaction Sent!\");\r\n\r\n        toaster.update(notificationToast(), {\r\n          render: \"Reactivating Channel\",\r\n          type: toaster.TYPE.INFO,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        await tx.wait(1);\r\n        toaster.update(notificationToast(), {\r\n          render: \"Channel Reactivated\",\r\n          type: toaster.TYPE.INFO,\r\n          autoClose: 5000,\r\n        });\r\n        dispatch(\r\n          setUserChannelDetails({\r\n            ...channelDetails,\r\n            channelState: CHANNEL_ACTIVE_STATE,\r\n          })\r\n        );\r\n      })\r\n      .catch((err: any) => {\r\n        console.log(\"!!!Error reactivateChannel() --> %o\", err);\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transacion Failed: \" + err.error?.message || err.message,\r\n          type: toaster.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n        setShowActivateChannelPopup(false);\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Function to deactivate a channel that has been deactivated\r\n   */\r\n  const deactivateChannel = async () => {\r\n    setLoading(true);\r\n    if (!poolContrib) return;\r\n\r\n    const amountToBeConverted = parseInt(\"\" + poolContrib) - 10;\r\n    console.log(\"Amount To be converted==>\", amountToBeConverted);\r\n\r\n    const { data: response } = await postReq(\"/channels/get_dai_to_push\", {\r\n      value: amountToBeConverted,\r\n    });\r\n\r\n    const pushValue = response.response.data.quote.PUSH.price;\r\n    const amountsOut = pushValue * Math.pow(10, 18);\r\n\r\n    await epnsWriteProvider\r\n      // .deactivateChannel(amountsOut.toString().replace(/0+$/, \"\")) //use this to remove trailing zeros 1232323200000000 -> 12323232\r\n      .deactivateChannel(Math.floor(pushValue)) \r\n      .then(async (tx: any) => {\r\n        console.log(tx);\r\n        console.log(\"Transaction Sent!\");\r\n\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transaction sending\",\r\n          type: toaster.TYPE.INFO,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        await tx.wait(1);\r\n        console.log(\"Transaction Mined!\");\r\n        dispatch(\r\n          setUserChannelDetails({\r\n            ...channelDetails,\r\n            channelState: CHANNNEL_DEACTIVATED_STATE,\r\n          })\r\n        );\r\n      })\r\n      .catch((err: any) => {\r\n        console.log(\"!!!Error deactivateChannel() --> %o\", err);\r\n        console.log({\r\n          err,\r\n        });\r\n        toaster.update(notificationToast(), {\r\n          render: \"Transacion Failed: \" + err.error?.message || err,\r\n          type: toaster.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n      })\r\n      .finally(() => {\r\n        // post op\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const addDelegate = async (walletAddress: string) => {\r\n    setAddDelegateLoading(true);\r\n    return epnsCommWriteProvider.addDelegate(walletAddress).finally(() => {\r\n      setAddDelegateLoading(false);\r\n    });\r\n  };\r\n\r\n  const removeDelegate = (walletAddress: string) => {\r\n    setRemoveDelegateLoading(true);\r\n    return epnsCommWriteProvider.removeDelegate(walletAddress).finally(() => {\r\n      setRemoveDelegateLoading(false);\r\n    });\r\n  };\r\n\r\n  if (!onCoreNetwork) {\r\n    //temporarily deactivate the deactivate button if not on core network\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <DropdownWrapper background ={theme}>\r\n        <DeactivateButton\r\n          isChannelDeactivated={isChannelDeactivated}\r\n          onClick={toggleChannelActivationState}\r\n        >\r\n          <ActionTitle>\r\n            {loading ? (\r\n              \"Loading ...\"\r\n            ) : isChannelBlocked ? (\r\n              \"Channel Blocked\"\r\n            ) : isChannelDeactivated ? (\r\n              \"Activate Channel\"\r\n            ) : (\r\n              \"Deactivate Channel\"\r\n            )}\r\n          </ActionTitle>\r\n        </DeactivateButton>\r\n        <ActiveChannelWrapper>\r\n          <ChannelActionButton\r\n            disabled={channelInactive}\r\n            onClick={() => !channelInactive && setAddModalOpen(true)}\r\n          >\r\n            <ActionTitle>\r\n              {addDelegateLoading ? (\r\n                <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n              ) : (\r\n                \"Add Delegate\"\r\n              )}\r\n            </ActionTitle>\r\n          </ChannelActionButton>\r\n\r\n          <ChannelActionButton\r\n            disabled={channelInactive}\r\n            onClick={() => !channelInactive && setRemoveModalOpen(true)}\r\n          >\r\n            <ActionTitle>\r\n              {removeDelegateLoading ? (\r\n                <Loader type=\"Oval\" color=\"#FFF\" height={16} width={16} />\r\n              ) : (\r\n                \"Remove Delegate\"\r\n              )}\r\n            </ActionTitle>\r\n          </ChannelActionButton>\r\n        </ActiveChannelWrapper>\r\n      </DropdownWrapper>\r\n      {/* modal to display the activate channel popup */}\r\n      {showActivateChannelPopup && (\r\n        <ActivateChannelModal\r\n          onClose={() => {\r\n            if (showActivateChannelPopup) {\r\n              setShowActivateChannelPopup(false);\r\n            }\r\n          }}\r\n          activateChannel={activateChannel}\r\n          loading={loading}\r\n          setChannelStakeFees={setChannelStakeFees}\r\n          channelStakeFees={channelStakeFees}\r\n        />\r\n      )}\r\n      {/* modal to add a delegate */}\r\n      {addModalOpen && (\r\n        <AddDelegateModal\r\n          onClose={() => setAddModalOpen(false)}\r\n          onSuccess={() => {\r\n            toaster.update(notificationToast(), {\r\n              render: \"Delegate Added\",\r\n              type: toaster.TYPE.INFO,\r\n              autoClose: 5000,\r\n            });\r\n          }}\r\n          addDelegate={addDelegate}\r\n        />\r\n      )}\r\n      {/* modal to remove a delegate */}\r\n      {removeModalOpen && (\r\n        <RemoveDelegateModal\r\n          onClose={() => {\r\n            setRemoveModalOpen(false);\r\n          }}\r\n          onSuccess={() => {\r\n            toaster.update(notificationToast(), {\r\n              render: \"Delegate Removed\",\r\n              type: toaster.TYPE.INFO,\r\n              autoClose: 5000,\r\n            });\r\n          }}\r\n          removeDelegate={removeDelegate}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst DropdownWrapper = styled.div`\r\n  position: absolute;\r\n  right: 20px;\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n  width: 220px;\r\n  height: 230px;\r\n  padding: 20px;\r\n  padding-top: 30px;\r\n\r\n  background: ${props => props.background.mainBg};\r\n  border: 1px solid #a9a9a9;\r\n  box-sizing: border-box;\r\n  box-shadow: 0px 4px 30px rgba(0, 0, 0, 0.1);\r\n  border-radius: 10px;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ActiveChannelWrapper = styled.div`\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  display: ${(props) => (props.inactive ? \"none\" : \"flex\")};\r\n`;\r\n\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`;\r\n\r\nconst ActionTitle = styled.span`\r\n  ${(props: any) =>\r\n    props.hideit &&\r\n    css`\r\n      visibility: hidden;\r\n    `};\r\n`;\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`;\r\n\r\nconst DeactivateButton = styled.div`\r\n  text-decoration: underline;\r\n  color: ${(props) => (props.isChannelDeactivated ? \"#674C9F\" : \"#e20880\")};\r\n  text-align: center;\r\n  font-size: 16px;\r\n  line-height: 20px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ChannelActionButton = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  background-color: #674c9f;\r\n  &:hover {\r\n    opacity: ${(props) => (props.disabled ? 0.5 : 0.9)};\r\n    cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: ${(props) => (props.disabled ? 0.5 : 0.75)};\r\n    cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\r\n    pointer: hand;\r\n  }\r\n  opacity: ${(props) => (props.disabled ? 0.5 : 1)};\r\n`;\r\n\r\nconst Settings = styled.img`\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-left: auto;\r\n  margin-right: 30px;\r\n`;\r\n\r\n// Export Default\r\nexport default ChannelSettings;\r\n","import React from \"react\";\r\nimport { useClickAway } from \"react-use\";\r\nimport styled from \"styled-components\";\r\nimport ChannelSettingsDropdown from \"./ChannelSettingsDropdown\";\r\n\r\nexport default function ChannelSettings() {\r\n  const [active, setActive] = React.useState(false);\r\n  const modalRef = React.useRef(null);\r\n  const toggleActive = () => {\r\n    setActive((a) => !a);\r\n  };\r\n\r\n  useClickAway(modalRef, () => active && setActive(false));\r\n\r\n  return (\r\n    <SettingsWrapper ref={modalRef}>\r\n      <Settings\r\n        active={active}\r\n        onClick={toggleActive}\r\n        src=\"/Settings.svg\"\r\n        alt=\"\"\r\n      ></Settings>\r\n      {active && <ChannelSettingsDropdown />}\r\n    </SettingsWrapper>\r\n  );\r\n}\r\n\r\nconst SettingsWrapper = styled.div`\r\n  position: absolute;\r\n  top: 30px;\r\n  right: 30px;\r\n`;\r\n\r\nconst Settings = styled.img`\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-left: auto;\r\n  margin-right: 30px;\r\n  cursor: pointer;\r\n  transition: 400ms;\r\n  transform: ${(props) => (props.active ? \"rotateZ(35deg)\" : \"none\")};\r\n`;\r\n","import React from \"react\";\r\nimport moment from \"moment\";\r\nimport styled , {useTheme} from \"styled-components\";\r\nimport { useSelector } from \"react-redux\";\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nconst DATE_FORMAT = \"DD/MM/YYYY\";\r\nexport default function ChannelDetails() {\r\n  const theme = useTheme();\r\n  const { library } = useWeb3React();\r\n  const { channelDetails, canVerify } = useSelector((state) => state.admin);\r\n  const { CHANNEL_ACTIVE_STATE, CHANNNEL_DEACTIVATED_STATE } = useSelector(\r\n    (state) => state.channels\r\n  );\r\n  const [verifyingChannel, setVerifyingChannel] = React.useState([]);\r\n  const [creationDate, setCreationDate] = React.useState(\"\");\r\n  const { channelState } = channelDetails;\r\n  const channelIsActive = channelState === CHANNEL_ACTIVE_STATE;\r\n  const channelIsDeactivated = channelState === CHANNNEL_DEACTIVATED_STATE;\r\n\r\n  React.useEffect(() => {\r\n    if (!channelDetails || !canVerify) return;\r\n    (async function() {\r\n      let channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(\r\n        channelDetails.verifiedBy\r\n      );\r\n      setVerifyingChannel(channelJson);\r\n    })();\r\n  }, [channelDetails, canVerify]);\r\n\r\n  React.useEffect(() => {\r\n    if (!channelDetails) return;\r\n    (async function() {\r\n      const bn = channelDetails.channelStartBlock.toString();\r\n      const block = await library.getBlock(+bn);\r\n      const date = moment(block.timestamp * 1000);//convert from millisecs\r\n      setCreationDate(date.format(DATE_FORMAT))\r\n    })();\r\n  }, [channelDetails]);\r\n\r\n  return (\r\n    <ChannelDetailsWrapper>\r\n      <SectionTop>\r\n        <ImageSection src={channelDetails.icon}></ImageSection>\r\n\r\n        <Details>\r\n          <ChannelName>\r\n            {channelDetails.name}\r\n            {canVerify && <VerifyImage src=\"/verify.png\"></VerifyImage>}\r\n          </ChannelName>\r\n          <ChanneStateText active={channelIsActive}>\r\n            {channelIsActive\r\n              ? \"ACTIVE\"\r\n              : channelIsDeactivated\r\n              ? \"DEACTIVATED\"\r\n              : \"BLOCKED\"}\r\n          </ChanneStateText>\r\n          <Subscribers>\r\n            <img src=\"/people.svg\"></img>\r\n            <SubscribersCount>\r\n              {channelDetails.subscribers.length}\r\n            </SubscribersCount>\r\n          </Subscribers>\r\n        </Details>\r\n      </SectionTop>\r\n\r\n      <SectionDes style={{color : theme.color}}>{channelDetails.info}</SectionDes>\r\n\r\n      <SectionDate>\r\n        {canVerify && (\r\n          <Verified>\r\n            <span>verified by:</span>\r\n\r\n            <VerifyingIcon src={verifyingChannel.icon}></VerifyingIcon>\r\n            <VerifyingName>{verifyingChannel.name}</VerifyingName>\r\n          </Verified>\r\n        )}\r\n\r\n        <Date>\r\n          <span>created on:</span>\r\n          <span style={{ marginLeft: \"10px\" }}>{creationDate}</span>\r\n        </Date>\r\n      </SectionDate>\r\n\r\n      <hr />\r\n    </ChannelDetailsWrapper>\r\n  );\r\n}\r\n\r\nconst ChannelDetailsWrapper = styled.div`\r\n  padding: 30px;\r\n  padding-bottom: 0;\r\n`;\r\n\r\nconst SectionTop = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst ImageSection = styled.img`\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 50%;\r\n  margin-right: 20px;\r\n`;\r\nconst VerifyImage = styled.img`\r\n  width: 20px;\r\n  height: 25px;\r\n  margin-top: auto;\r\n  margin-bottom: auto;\r\n  margin-left: 8px;\r\n`;\r\n\r\nconst VerifyingIcon = styled.img`\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 50%;\r\n  margin-left: 6px;\r\n  margin-right: 5px;\r\n`;\r\n\r\nconst VerifyingName = styled.div``;\r\n\r\nconst Subscribers = styled.div`\r\n  height: fit-content;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ActiveIcon = styled.span`\r\n  width: 8px;\r\n  height: 8px;\r\n  background: #57c255;\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst ChanneStateText = styled.span`\r\n  color: #57c255;\r\n  font-family: Source Sans Pro;\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-size: 18px;\r\n  line-height: 23px;\r\n  letter-spacing: 0.1em;\r\n  text-transform: uppercase;\r\n  color: ${(props) => (props.active ? \"#57c255\" : \"red\")};\r\n  margin-bottom: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  ${(props) =>\r\n    props.active &&\r\n    `\r\n        &::after {\r\n            width:8px;\r\n            height: 8px;\r\n            background: #57c255;\r\n            border-radius: 50%;\r\n            content: \"\";\r\n            display: inline-flex;\r\n            align-items: center;\r\n            margin-left: 6px;\r\n        }\r\n    `}\r\n`;\r\n\r\nconst SubscribersCount = styled.span`\r\n  margin-left: 5px;\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  height: 16px;\r\n  background: #35c5f3;\r\n  border-radius: 10px;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  line-height: 17px;\r\n  display: inline-block;\r\n  color: #ffffff;\r\n`;\r\n\r\nconst Details = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nconst SectionLine = styled.div`\r\n  margin-left: 30px;\r\n  margin-right: 30px;\r\n`;\r\n\r\nconst Date = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 240px;\r\n  color: #674c9f;\r\n`;\r\n\r\nconst Verified = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n\r\n  & > span {\r\n    color: #ec008c;\r\n    fontsize: 1em;\r\n    fontweight: bolder;\r\n  }\r\n`;\r\n\r\nconst ChannelName = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n\r\n  font-family: Source Sans Pro;\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-size: 30px;\r\n  line-height: 38px;\r\n  margin-right: 8px;\r\n  text-transform: capitalize;\r\n  color: #e20880;\r\n`;\r\n\r\nconst SectionDate = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  line-height: 25px;\r\n  letter-spacing: 0.1em;\r\n  text-transform: uppercase;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst SectionDes = styled.div`\r\n  font-family: Source Sans Pro;\r\n  font-style: normal;\r\n  font-weight: 300;\r\n  font-size: 24px;\r\n  line-height: 30px;\r\n  letter-spacing: 0.1em;\r\n  text-transform: uppercase;\r\n  color: #000000;\r\n  margin-bottom: 40px;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Section, Content } from \"components/SharedStyling\";\r\n\r\nimport SendNotifications from \"components/SendNotifications\";\r\nimport ChannelSettings from \"components/ChannelSettings\";\r\nimport ChannelDetails from \"components/ChannelDetails\";\r\nimport CreateChannel from \"components/CreateChannel\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\n// CREATE CHANNEL OWNER DASHBOARD\r\nfunction ChannelOwnerDashboard() {\r\n  const { channelDetails, delegatees } = useSelector((state) => state.admin);\r\n  return (\r\n    <>\r\n      <Section>\r\n        <ModifiedContent>\r\n          {/* display the create channel page if there are no details */}\r\n          {!channelDetails ? <CreateChannel /> : \"\"}\r\n          {/* display the create channel page if there are no details */}\r\n          {/* display the channel settings */}\r\n          {channelDetails ? <ChannelSettings /> : \"\"}\r\n          {/* display the channel settings */}\r\n          {/* display the details about the profile of the channel */}\r\n          {channelDetails ? <ChannelDetails /> : \"\"}\r\n          {/* display the details about the profile of the channel */}\r\n          {/* display the notifications settings */}\r\n          {channelDetails || delegatees?.length ? <SendNotifications /> : \"\"}\r\n          {/* display the notifications settings */}\r\n        </ModifiedContent>\r\n      </Section>\r\n    </>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst ModifiedContent = styled(Content)`\r\n  padding: 0;\r\n  position: relative;\r\n`;\r\n\r\n// Export Default\r\nexport default ChannelOwnerDashboard;\r\n","import React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\nimport { ethers } from \"ethers\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport hex2ascii from \"hex2ascii\";\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport config from \"config\";\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport NotificationToast from \"components/NotificationToast\";\r\nimport AliasVerificationodal from \"components/AliasVerificationModal\";\r\nimport Info from \"segments/Info\";\r\nimport Feedbox from \"segments/Feedbox\";\r\nimport Spambox from \"segments/Spambox\";\r\nimport ViewChannels from \"segments/ViewChannels\";\r\nimport ChannelOwnerDashboard from \"segments/ChannelOwnerDashboard\";\r\nimport ChannelCreationDashboard from \"segments/ChannelCreationDashboard\";\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport UsersDataStore from \"singletons/UsersDataStore\";\r\nimport { postReq } from \"api\";\r\nimport {\r\n  setCoreReadProvider,\r\n  setCoreWriteProvider,\r\n  setCommunicatorReadProvider,\r\n  setCommunicatorWriteProvider,\r\n  setPushAdmin,\r\n} from \"redux/slices/contractSlice\";\r\nimport {\r\n  setUserChannelDetails,\r\n  setCanVerify,\r\n  setDelegatees,\r\n} from \"redux/slices/adminSlice\";\r\nimport { addNewNotification } from \"redux/slices/notificationSlice\";\r\nexport const ALLOWED_CORE_NETWORK = 42; //chainId of network which we have deployed the core contract on\r\nconst CHANNEL_TAB = 0; //Default to 1 which is the channel tab\r\n\r\n// Create Header\r\nfunction InboxPage() {\r\n  ReactGA.pageview(\"/inbox\");\r\n\r\n  const dispatch = useDispatch();\r\n  const { account, library, chainId } = useWeb3React();\r\n  const {\r\n    epnsReadProvider,\r\n    epnsWriteProvider,\r\n    epnsCommReadProvider,\r\n  } = useSelector((state) => state.contracts);\r\n\r\n  const onCoreNetwork = ALLOWED_CORE_NETWORK === chainId;\r\n  const INITIAL_OPEN_TAB = CHANNEL_TAB; //if they are not on a core network.redirect then to the notifications page\r\n\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const [adminStatusLoaded, setAdminStatusLoaded] = React.useState(false);\r\n  const [aliasEthAccount, setAliasEthAccount] = React.useState(null);\r\n  const [aliasVerified, setAliasVerified] = React.useState(null); // null means error, false means unverified and true means verified\r\n  const [channelAdmin, setChannelAdmin] = React.useState(false);\r\n  const [channelJson, setChannelJson] = React.useState([]);\r\n\r\n  // toast related section\r\n  const [toast, showToast] = React.useState(null);\r\n  const clearToast = () => showToast(null);\r\n  const showNetworkToast = () => {\r\n    showToast({\r\n      notificationTitle: (\r\n        <span style={{ color: \"#e20880\" }}> Invalid Network </span>\r\n      ),\r\n      notificationBody:\r\n        \"Please connect to the Ethereum network to access channels\",\r\n    });\r\n  };\r\n  /**\r\n   * Event listener for new notifications\r\n   */\r\n  const listenFornewNotifications = () => {\r\n    const event = \"SendNotification\";\r\n    //callback function for listener\r\n    const cb = async (eventChannelAddress, eventUserAddress, identityHex) => {\r\n      const userAddress = account;\r\n      const identity = hex2ascii(identityHex);\r\n      const notificationId = identity\r\n        .concat(\"+\")\r\n        .concat(eventChannelAddress)\r\n        .concat(\"+\")\r\n        .concat(eventUserAddress)\r\n        .toLocaleLowerCase();\r\n      const ipfsId = identity.split(\"+\")[1];\r\n      const channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(\r\n        eventChannelAddress\r\n      );\r\n\r\n      // Form Gateway URL\r\n      const url = \"https://ipfs.io/ipfs/\" + ipfsId;\r\n      fetch(url)\r\n        .then((result) => result.json())\r\n        .then(async (result) => {\r\n          const ipfsNotification = { ...result };\r\n          const notificationTitle =\r\n            ipfsNotification.notification.title !== \"\"\r\n              ? ipfsNotification.notification.title\r\n              : channelJson.name;\r\n          const toastMessage = {\r\n            notificationTitle,\r\n            notificationBody: ipfsNotification.notification.body,\r\n          };\r\n          const notificationObject = {\r\n            title: notificationTitle,\r\n            message: ipfsNotification.data.amsg,\r\n            cta: ipfsNotification.data.acta,\r\n            app: channelJson.name,\r\n            icon: channelJson.icon,\r\n            image: ipfsNotification.data.aimg,\r\n          };\r\n\r\n          if (ipfsNotification.data.type === \"1\") {\r\n            const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n              eventChannelAddress\r\n            );\r\n            const isSubscribed = channelSubscribers.find((sub) => {\r\n              return sub.toLowerCase() === account.toLowerCase();\r\n            });\r\n            if (isSubscribed) {\r\n              console.log(\"message recieved\", notificationObject);\r\n              showToast(toastMessage);\r\n              dispatch(addNewNotification(notificationObject));\r\n            }\r\n          } else if (userAddress === eventUserAddress) {\r\n            showToast(toastMessage);\r\n            dispatch(addNewNotification(notificationObject));\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\r\n            \"!!!Error, getting new notification data from ipfs --> %o\",\r\n            err\r\n          );\r\n        });\r\n    };\r\n    epnsCommReadProvider.on(event, cb);\r\n    return () => epnsCommReadProvider.off.bind(epnsCommReadProvider, event, cb); //when we unmount we remove the listener\r\n  };\r\n\r\n  //clear toast variable after it is shown\r\n  React.useEffect(() => {\r\n    if (toast) {\r\n      clearToast();\r\n    }\r\n  }, [toast]);\r\n  // toast related section\r\n\r\n  /**\r\n   * Logic to get channel alias and alias verification status as well as create instances of core and comunicator contract\r\n   */\r\n  React.useEffect(() => {\r\n    (async function init() {\r\n      const coreProvider = onCoreNetwork\r\n        ? library\r\n        : ethers.getDefaultProvider(ALLOWED_CORE_NETWORK, {\r\n            etherscan: config.etherscanToken,\r\n          });\r\n      // if we are not on the core network then check for if this account is an alias for another channel\r\n      if (!onCoreNetwork) {\r\n        // get the eth address of the alias address, in order to properly render information about the channel\r\n        const aliasEth = await postReq(\"/channels/get_eth_address\", {\r\n          aliasAddress: account,\r\n          op: \"read\",\r\n        }).then(({ data }) => {\r\n          console.log({ data });\r\n          const ethAccount = data;\r\n          if (ethAccount) {\r\n            setAliasEthAccount(ethAccount.ethAddress);\r\n          }\r\n          return data;\r\n        });\r\n        if (aliasEth) {\r\n          // if an alias exists, check if its verified.\r\n          await postReq(\"/channels/get_alias_verification_status\", {\r\n            aliasAddress: account,\r\n            op: \"read\",\r\n          }).then(({ data }) => {\r\n            // if it returns undefined then we need to let them know to verify their channel\r\n            if (!data) {\r\n              setAliasVerified(false);\r\n              return;\r\n            }\r\n            const { status } = data;\r\n            setAliasVerified(status || null);\r\n            return data;\r\n          });\r\n        }\r\n      }\r\n      // if we are not on the core network then fetch if there is an alias address from the api\r\n      // inititalise the read contract for the core network\r\n      const coreContractInstance = new ethers.Contract(\r\n        addresses.epnscore,\r\n        abis.epnscore,\r\n        coreProvider\r\n      );\r\n      // initialise the read contract for the communicator function\r\n      const commAddress = onCoreNetwork\r\n        ? addresses.epnsEthComm\r\n        : addresses.epnsPolyComm;\r\n      const commContractInstance = new ethers.Contract(\r\n        commAddress,\r\n        abis.epnsComm,\r\n        library\r\n      );\r\n      dispatch(setCommunicatorReadProvider(commContractInstance));\r\n      dispatch(setCoreReadProvider(coreContractInstance));\r\n      // initialise the read contract for the communicator function\r\n      if (!!(library && account)) {\r\n        let signer = library.getSigner(account);\r\n        const coreSignerInstance = new ethers.Contract(\r\n          addresses.epnscore,\r\n          abis.epnscore,\r\n          signer\r\n        );\r\n        const communicatorSignerInstance = new ethers.Contract(\r\n          commAddress,\r\n          abis.epnsComm,\r\n          signer\r\n        );\r\n        dispatch(setCoreWriteProvider(coreSignerInstance));\r\n        dispatch(setCommunicatorWriteProvider(communicatorSignerInstance));\r\n      }\r\n    })();\r\n  }, [account, chainId]);\r\n\r\n  /**\r\n   * When we instantiate the contract instances, fetch basic information about the user\r\n   * Corresponding channel owned.\r\n   */\r\n  React.useEffect(() => {\r\n    if (!epnsReadProvider || !epnsCommReadProvider) return;\r\n    // Reset when account refreshes\r\n    setChannelAdmin(false);\r\n    dispatch(setUserChannelDetails(null));\r\n    setAdminStatusLoaded(false);\r\n    userClickedAt(INITIAL_OPEN_TAB);\r\n    setChannelJson([]);\r\n    // save push admin to global state\r\n    epnsReadProvider.pushChannelAdmin()\r\n    .then((response) => {\r\n      dispatch(setPushAdmin(response));\r\n    })\r\n    .catch(err =>{\r\n      console.log({err})\r\n    });\r\n\r\n    // EPNS Read Provider Set\r\n    if (epnsReadProvider != null && epnsCommReadProvider != null) {\r\n      // Instantiate Data Stores\r\n      UsersDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      ChannelsDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      checkUserForChannelOwnership();\r\n      listenFornewNotifications();\r\n      fetchDelegators();\r\n    }\r\n  }, [epnsReadProvider, epnsCommReadProvider]);\r\n\r\n  // handle user action at control center\r\n  const userClickedAt = (controlIndex) => {\r\n    setControlAt(controlIndex);\r\n  };\r\n\r\n  // fetch all the channels who have delegated to this account\r\n  const fetchDelegators = () => {\r\n    postReq(\"/channels/delegatee/get_channels\", {\r\n      delegateAddress: account,\r\n      op: \"read\",\r\n    })\r\n      .then(async ({ data: delegators }) => {\r\n        // if there are actual delegators\r\n        // fetch basic information abouot the channels and store it to state\r\n        if (delegators && delegators.channelOwners) {\r\n          const channelInformationPromise = [\r\n            ...new Set([account, ...delegators.channelOwners])//make the accounts unique\r\n          ].map((channelAddress) =>\r\n            ChannelsDataStore.instance\r\n              .getChannelJsonAsync(channelAddress)\r\n              .then((res) => ({ ...res, address: channelAddress }))\r\n              .catch(() => false)\r\n          );\r\n          const channelInformation = await Promise.all(\r\n            channelInformationPromise\r\n          );\r\n          dispatch(setDelegatees(channelInformation.filter(Boolean)));\r\n          // fetch the json information about this delegatee channel and add to global state\r\n        } else {\r\n          dispatch(setDelegatees([]));\r\n        }\r\n      })\r\n      .catch(async (err) => {\r\n        console.log({ err });\r\n      });\r\n  };\r\n\r\n  // Check if a user is a channel or not\r\n  const checkUserForChannelOwnership = async () => {\r\n    // Check if account is admin or not and handle accordingly\r\n    const ownerAccount = !onCoreNetwork ? aliasEthAccount : account;\r\n    EPNSCoreHelper.getChannelJsonFromUserAddress(ownerAccount, epnsReadProvider)\r\n      .then(async (response) => {\r\n        // if channel admin, then get if the channel is verified or not, then also fetch more details about the channel\r\n        const verificationStatus = await epnsWriteProvider.getChannelVerfication(\r\n          ownerAccount\r\n        );\r\n        const channelJson = await epnsWriteProvider.channels(ownerAccount);\r\n        const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n          ownerAccount\r\n        );\r\n        dispatch(\r\n          setUserChannelDetails({\r\n            ...response,\r\n            ...channelJson,\r\n            subscribers: channelSubscribers,\r\n          })\r\n        );\r\n        dispatch(setCanVerify(Boolean(verificationStatus)));\r\n        setChannelJson(response);\r\n        setChannelAdmin(true);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          \"There was an error [checkUserForChannelOwnership]:\",\r\n          err.message\r\n        );\r\n        setChannelAdmin(false);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .finally(() => {\r\n        setAdminStatusLoaded(true);\r\n      });\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <Container>\r\n      <Interface>\r\n        {controlAt == 0 && <Spambox />}\r\n        {controlAt == 1 && <ViewChannels />}\r\n        {controlAt == 2 && adminStatusLoaded && <ChannelOwnerDashboard />}\r\n        {controlAt == 3 && <Info />}\r\n        {toast && (\r\n          <NotificationToast notification={toast} clearToast={clearToast} />\r\n        )}\r\n        {modalOpen && (\r\n          <AliasVerificationodal\r\n            onClose={() => setModalOpen(false)}\r\n            onSuccess={() => setAliasVerified(true)}\r\n            verificationStatus={aliasVerified}\r\n          />\r\n        )}\r\n      </Interface>\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: block;\r\n  flex-direction: column;\r\n  min-height: calc(100vh - 100px);\r\n`;\r\n\r\nconst Controls = styled.div`\r\n  flex: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ControlButton = styled.div`\r\n  flex: 1 1 21%;\r\n  height: 120px;\r\n  min-width: 200px;\r\n  background: #fff;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 15px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  border-bottom: 10px solid rgb(180, 180, 180);\r\n  margin: 20px;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  border-bottom: 10px solid\r\n    ${(props) => (props.active ? props.border : \"rgb(180,180,180)\")};\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`;\r\n\r\nconst ControlImage = styled.img`\r\n  height: 30%;\r\n  margin-right: 15px;\r\n  filter: ${(props) => (props.active ? \"brightness(1)\" : \"brightness(0)\")};\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.25\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-20px, 0px);\r\n      opacity: 0.4;\r\n    `};\r\n`;\r\n\r\nconst ControlText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 200;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.3) translate(-10px, 0px);\r\n    `};\r\n`;\r\n\r\nconst ControlChannelContainer = styled.div`\r\n  margin: 0px 20px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst ControlChannelImage = styled.img`\r\n  width: 20%;\r\n  margin-bottom: 10px;\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-40px, 5px);\r\n      opacity: 0.2;\r\n      z-index: 1;\r\n    `};\r\n`;\r\n\r\nconst ControlChannelText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 300;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n  transition: transform 0.2s ease-out;\r\n  background: -webkit-linear-gradient(#db268a, #34c6f3);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  z-index: 2;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.1) translate(0px, -20px);\r\n    `};\r\n`;\r\n\r\nconst Interface = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n\r\n  margin-bottom: 15px;\r\n  overflow: hidden;\r\n`;\r\n\r\n// Export Default\r\nexport default InboxPage;\r\n","import React, {useState} from \"react\";\r\nimport ReactGA from \"react-ga\";\r\nimport { ethers } from \"ethers\";\r\nimport styled, { css, useTheme } from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport hex2ascii from \"hex2ascii\";\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport config from \"config\";\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport NotificationToast from \"components/NotificationToast\";\r\nimport AliasVerificationodal from \"components/AliasVerificationModal\";\r\nimport Info from \"segments/Info\";\r\nimport Feedbox from \"segments/Feedbox\";\r\nimport ViewChannels from \"segments/ViewChannels\";\r\nimport ChannelOwnerDashboard from \"segments/ChannelOwnerDashboard\";\r\nimport ChannelCreationDashboard from \"segments/ChannelCreationDashboard\";\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport UsersDataStore from \"singletons/UsersDataStore\";\r\nimport { postReq } from \"api\";\r\nimport {\r\n  setCoreReadProvider,\r\n  setCoreWriteProvider,\r\n  setCommunicatorReadProvider,\r\n  setCommunicatorWriteProvider,\r\n  setPushAdmin,\r\n} from \"redux/slices/contractSlice\";\r\nimport {\r\n  setUserChannelDetails,\r\n  setCanVerify,\r\n  setDelegatees,\r\n} from \"redux/slices/adminSlice\";\r\nimport { addNewNotification } from \"redux/slices/notificationSlice\";\r\n\r\nimport GLOBALS from \"config/Globals\";\r\n\r\nexport const ALLOWED_CORE_NETWORK = 42; //chainId of network which we have deployed the core contract on\r\nconst CHANNEL_TAB = 1; //Default to 1 which is the channel tab\r\n\r\n// Create Header\r\nfunction InboxPage() {\r\n  ReactGA.pageview(\"/channels\");\r\n\r\n\r\n  const dispatch = useDispatch();\r\n  const { account, library, chainId } = useWeb3React();\r\n  const {\r\n    epnsReadProvider,\r\n    epnsWriteProvider,\r\n    epnsCommReadProvider,\r\n  } = useSelector((state) => state.contracts);\r\n\r\n  const onCoreNetwork = ALLOWED_CORE_NETWORK === chainId;\r\n  const INITIAL_OPEN_TAB = CHANNEL_TAB; //if they are not on a core network.redirect then to the notifications page\r\n\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const [adminStatusLoaded, setAdminStatusLoaded] = React.useState(false);\r\n  const [aliasEthAccount, setAliasEthAccount] = React.useState(null);\r\n  const [aliasVerified, setAliasVerified] = React.useState(null); // null means error, false means unverified and true means verified\r\n  const [channelAdmin, setChannelAdmin] = React.useState(false);\r\n  const [channelJson, setChannelJson] = React.useState([]);\r\n\r\n  // toast related section\r\n  const [toast, showToast] = React.useState(null);\r\n  const clearToast = () => showToast(null);\r\n  const showNetworkToast = () => {\r\n    showToast({\r\n      notificationTitle: (\r\n        <span style={{ color: \"#e20880\" }}> Invalid Network </span>\r\n      ),\r\n      notificationBody:\r\n        \"Please connect to the Ethereum network to access channels\",\r\n    });\r\n  };\r\n  /**\r\n   * Event listener for new notifications\r\n   */\r\n  const listenFornewNotifications = () => {\r\n    const event = \"SendNotification\";\r\n    //callback function for listener\r\n    const cb = async (eventChannelAddress, eventUserAddress, identityHex) => {\r\n      const userAddress = account;\r\n      const identity = hex2ascii(identityHex);\r\n      const notificationId = identity\r\n        .concat(\"+\")\r\n        .concat(eventChannelAddress)\r\n        .concat(\"+\")\r\n        .concat(eventUserAddress)\r\n        .toLocaleLowerCase();\r\n      const ipfsId = identity.split(\"+\")[1];\r\n      const channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(\r\n        eventChannelAddress\r\n      );\r\n\r\n      // Form Gateway URL\r\n      const url = \"https://ipfs.io/ipfs/\" + ipfsId;\r\n      fetch(url)\r\n        .then((result) => result.json())\r\n        .then(async (result) => {\r\n          const ipfsNotification = { ...result };\r\n          const notificationTitle =\r\n            ipfsNotification.notification.title !== \"\"\r\n              ? ipfsNotification.notification.title\r\n              : channelJson.name;\r\n          const toastMessage = {\r\n            notificationTitle,\r\n            notificationBody: ipfsNotification.notification.body,\r\n          };\r\n          const notificationObject = {\r\n            title: notificationTitle,\r\n            message: ipfsNotification.data.amsg,\r\n            cta: ipfsNotification.data.acta,\r\n            app: channelJson.name,\r\n            icon: channelJson.icon,\r\n            image: ipfsNotification.data.aimg,\r\n          };\r\n\r\n          if (ipfsNotification.data.type === \"1\") {\r\n            const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n              eventChannelAddress\r\n            );\r\n            const isSubscribed = channelSubscribers.find((sub) => {\r\n              return sub.toLowerCase() === account.toLowerCase();\r\n            });\r\n            if (isSubscribed) {\r\n              console.log(\"message recieved\", notificationObject);\r\n              showToast(toastMessage);\r\n              dispatch(addNewNotification(notificationObject));\r\n            }\r\n          } else if (userAddress === eventUserAddress) {\r\n            showToast(toastMessage);\r\n            dispatch(addNewNotification(notificationObject));\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\r\n            \"!!!Error, getting new notification data from ipfs --> %o\",\r\n            err\r\n          );\r\n        });\r\n    };\r\n    epnsCommReadProvider.on(event, cb);\r\n    return () => epnsCommReadProvider.off.bind(epnsCommReadProvider, event, cb); //when we unmount we remove the listener\r\n  };\r\n\r\n  //clear toast variable after it is shown\r\n  React.useEffect(() => {\r\n    if (toast) {\r\n      clearToast();\r\n    }\r\n  }, [toast]);\r\n  // toast related section\r\n\r\n  /**\r\n   * Logic to get channel alias and alias verification status as well as create instances of core and comunicator contract\r\n   */\r\n  React.useEffect(() => {\r\n    (async function init() {\r\n      const coreProvider = onCoreNetwork\r\n        ? library\r\n        : ethers.getDefaultProvider(ALLOWED_CORE_NETWORK, {\r\n            etherscan: config.etherscanToken,\r\n          });\r\n      // if we are not on the core network then check for if this account is an alias for another channel\r\n      if (!onCoreNetwork) {\r\n        // get the eth address of the alias address, in order to properly render information about the channel\r\n        const aliasEth = await postReq(\"/channels/get_eth_address\", {\r\n          aliasAddress: account,\r\n          op: \"read\",\r\n        }).then(({ data }) => {\r\n          console.log({ data });\r\n          const ethAccount = data;\r\n          if (ethAccount) {\r\n            setAliasEthAccount(ethAccount.ethAddress);\r\n          }\r\n          return data;\r\n        });\r\n        if (aliasEth) {\r\n          // if an alias exists, check if its verified.\r\n          await postReq(\"/channels/get_alias_verification_status\", {\r\n            aliasAddress: account,\r\n            op: \"read\",\r\n          }).then(({ data }) => {\r\n            // if it returns undefined then we need to let them know to verify their channel\r\n            if (!data) {\r\n              setAliasVerified(false);\r\n              return;\r\n            }\r\n            const { status } = data;\r\n            setAliasVerified(status || null);\r\n            return data;\r\n          });\r\n        }\r\n      }\r\n      // if we are not on the core network then fetch if there is an alias address from the api\r\n      // inititalise the read contract for the core network\r\n      const coreContractInstance = new ethers.Contract(\r\n        addresses.epnscore,\r\n        abis.epnscore,\r\n        coreProvider\r\n      );\r\n      // initialise the read contract for the communicator function\r\n      const commAddress = onCoreNetwork\r\n        ? addresses.epnsEthComm\r\n        : addresses.epnsPolyComm;\r\n      const commContractInstance = new ethers.Contract(\r\n        commAddress,\r\n        abis.epnsComm,\r\n        library\r\n      );\r\n      dispatch(setCommunicatorReadProvider(commContractInstance));\r\n      dispatch(setCoreReadProvider(coreContractInstance));\r\n      // initialise the read contract for the communicator function\r\n      if (!!(library && account)) {\r\n        let signer = library.getSigner(account);\r\n        const coreSignerInstance = new ethers.Contract(\r\n          addresses.epnscore,\r\n          abis.epnscore,\r\n          signer\r\n        );\r\n        const communicatorSignerInstance = new ethers.Contract(\r\n          commAddress,\r\n          abis.epnsComm,\r\n          signer\r\n        );\r\n        dispatch(setCoreWriteProvider(coreSignerInstance));\r\n        dispatch(setCommunicatorWriteProvider(communicatorSignerInstance));\r\n      }\r\n    })();\r\n  }, [account, chainId]);\r\n\r\n  /**\r\n   * When we instantiate the contract instances, fetch basic information about the user\r\n   * Corresponding channel owned.\r\n   */\r\n  React.useEffect(() => {\r\n    if (!epnsReadProvider || !epnsCommReadProvider) return;\r\n    // Reset when account refreshes\r\n    setChannelAdmin(false);\r\n    dispatch(setUserChannelDetails(null));\r\n    setAdminStatusLoaded(false);\r\n    userClickedAt(INITIAL_OPEN_TAB);\r\n    setChannelJson([]);\r\n    // save push admin to global state\r\n    epnsReadProvider.pushChannelAdmin()\r\n    .then((response) => {\r\n      dispatch(setPushAdmin(response));\r\n    })\r\n    .catch(err =>{\r\n      console.log({err})\r\n    });\r\n\r\n    // EPNS Read Provider Set\r\n    if (epnsReadProvider != null && epnsCommReadProvider != null) {\r\n      // Instantiate Data Stores\r\n      UsersDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      ChannelsDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      checkUserForChannelOwnership();\r\n      listenFornewNotifications();\r\n      fetchDelegators();\r\n    }\r\n  }, [epnsReadProvider, epnsCommReadProvider]);\r\n\r\n  // handle user action at control center\r\n  const userClickedAt = (controlIndex) => {\r\n    setControlAt(controlIndex);\r\n  };\r\n\r\n  // fetch all the channels who have delegated to this account\r\n  const fetchDelegators = () => {\r\n    postReq(\"/channels/delegatee/get_channels\", {\r\n      delegateAddress: account,\r\n      op: \"read\",\r\n    })\r\n      .then(async ({ data: delegators }) => {\r\n        // if there are actual delegators\r\n        // fetch basic information abouot the channels and store it to state\r\n        if (delegators && delegators.channelOwners) {\r\n          const channelInformationPromise = [\r\n            ...new Set([account, ...delegators.channelOwners])//make the accounts unique\r\n          ].map((channelAddress) =>\r\n            ChannelsDataStore.instance\r\n              .getChannelJsonAsync(channelAddress)\r\n              .then((res) => ({ ...res, address: channelAddress }))\r\n              .catch(() => false)\r\n          );\r\n          const channelInformation = await Promise.all(\r\n            channelInformationPromise\r\n          );\r\n          dispatch(setDelegatees(channelInformation.filter(Boolean)));\r\n          // fetch the json information about this delegatee channel and add to global state\r\n        } else {\r\n          dispatch(setDelegatees([]));\r\n        }\r\n      })\r\n      .catch(async (err) => {\r\n        console.log({ err });\r\n      });\r\n  };\r\n\r\n  // Check if a user is a channel or not\r\n  const checkUserForChannelOwnership = async () => {\r\n    // Check if account is admin or not and handle accordingly\r\n    const ownerAccount = !onCoreNetwork ? aliasEthAccount : account;\r\n    EPNSCoreHelper.getChannelJsonFromUserAddress(ownerAccount, epnsReadProvider)\r\n      .then(async (response) => {\r\n        // if channel admin, then get if the channel is verified or not, then also fetch more details about the channel\r\n        const verificationStatus = await epnsWriteProvider.getChannelVerfication(\r\n          ownerAccount\r\n        );\r\n        const channelJson = await epnsWriteProvider.channels(ownerAccount);\r\n        const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n          ownerAccount\r\n        );\r\n        dispatch(\r\n          setUserChannelDetails({\r\n            ...response,\r\n            ...channelJson,\r\n            subscribers: channelSubscribers,\r\n          })\r\n        );\r\n        dispatch(setCanVerify(Boolean(verificationStatus)));\r\n        setChannelJson(response);\r\n        setChannelAdmin(true);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          \"There was an error [checkUserForChannelOwnership]:\",\r\n          err.message\r\n        );\r\n        setChannelAdmin(false);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .finally(() => {\r\n        setAdminStatusLoaded(true);\r\n      });\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <>\r\n    <Container>\r\n      <Interface>\r\n        {controlAt == 0 && <Feedbox />}\r\n        {controlAt == 1 && <ViewChannels />}\r\n        {controlAt == 2 && adminStatusLoaded && <ChannelOwnerDashboard />}\r\n        {controlAt == 3 && <Info />}\r\n        {toast && (\r\n          <NotificationToast notification={toast} clearToast={clearToast} />\r\n        )}\r\n        {modalOpen && (\r\n          <AliasVerificationodal\r\n            onClose={() => setModalOpen(false)}\r\n            onSuccess={() => setAliasVerified(true)}\r\n            verificationStatus={aliasVerified}\r\n          />\r\n        )}\r\n      </Interface>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  display: flex;\r\n  background: ${props => props.theme.mainBg};\r\n  height: calc(100vh - ${GLOBALS.CONSTANTS.HEADER_HEIGHT}px - 52px - ${props => props.theme.interfaceTopPadding});\r\n  align-self: stretch;\r\n`;\r\n\r\nconst Controls = styled.div`\r\n  flex: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ControlButton = styled.div`\r\n  flex: 1 1 21%;\r\n  height: 120px;\r\n  min-width: 200px;\r\n  background: #fff;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 15px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  border-bottom: 10px solid rgb(180, 180, 180);\r\n  margin: 20px;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  border-bottom: 10px solid\r\n    ${(props) => (props.active ? props.border : \"rgb(180,180,180)\")};\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`;\r\n\r\nconst ControlImage = styled.img`\r\n  height: 30%;\r\n  margin-right: 15px;\r\n  filter: ${(props) => (props.active ? \"brightness(1)\" : \"brightness(0)\")};\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.25\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-20px, 0px);\r\n      opacity: 0.4;\r\n    `};\r\n`;\r\n\r\nconst ControlText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 200;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.3) translate(-10px, 0px);\r\n    `};\r\n`;\r\n\r\nconst ControlChannelContainer = styled.div`\r\n  margin: 0px 20px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst ControlChannelImage = styled.img`\r\n  width: 20%;\r\n  margin-bottom: 10px;\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-40px, 5px);\r\n      opacity: 0.2;\r\n      z-index: 1;\r\n    `};\r\n`;\r\n\r\nconst ControlChannelText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 300;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n  transition: transform 0.2s ease-out;\r\n  background: -webkit-linear-gradient(#db268a, #34c6f3);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  z-index: 2;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.1) translate(0px, -20px);\r\n    `};\r\n`;\r\n\r\nconst Interface = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n\r\n  overflow: hidden;\r\n`;\r\n\r\n// Export Default\r\nexport default InboxPage;\r\n","import React, { useState } from \"react\";\r\nimport ReactGA from \"react-ga\";\r\nimport { ethers } from \"ethers\";\r\nimport styled, { css, useTheme } from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport hex2ascii from \"hex2ascii\";\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport config from \"config\";\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport NotificationToast from \"components/NotificationToast\";\r\nimport AliasVerificationodal from \"components/AliasVerificationModal\";\r\nimport Info from \"segments/Info\";\r\nimport Feedbox from \"segments/Feedbox\";\r\nimport ViewChannels from \"segments/ViewChannels\";\r\nimport ChannelOwnerDashboard from \"segments/ChannelOwnerDashboard\";\r\nimport ChannelCreationDashboard from \"segments/ChannelCreationDashboard\";\r\nimport ChannelsDataStore from \"singletons/ChannelsDataStore\";\r\nimport UsersDataStore from \"singletons/UsersDataStore\";\r\nimport { postReq } from \"api\";\r\nimport {\r\n  setCoreReadProvider,\r\n  setCoreWriteProvider,\r\n  setCommunicatorReadProvider,\r\n  setCommunicatorWriteProvider,\r\n  setPushAdmin,\r\n} from \"redux/slices/contractSlice\";\r\nimport {\r\n  setUserChannelDetails,\r\n  setCanVerify,\r\n  setDelegatees,\r\n} from \"redux/slices/adminSlice\";\r\nimport { addNewNotification } from \"redux/slices/notificationSlice\";\r\nexport const ALLOWED_CORE_NETWORK = 42; //chainId of network which we have deployed the core contract on\r\nconst CHANNEL_TAB = 2; //Default to 1 which is the channel tab\r\n\r\n// Create Header\r\nfunction ChannelDashboardPage() {\r\n  ReactGA.pageview(\"/dashboard\");\r\n\r\n  const themes = useTheme();\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const { account, library, chainId } = useWeb3React();\r\n  const {\r\n    epnsReadProvider,\r\n    epnsWriteProvider,\r\n    epnsCommReadProvider,\r\n  } = useSelector((state) => state.contracts);\r\n\r\n  const onCoreNetwork = ALLOWED_CORE_NETWORK === chainId;\r\n  const INITIAL_OPEN_TAB = CHANNEL_TAB; //if they are not on a core network.redirect then to the notifications page\r\n\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const [adminStatusLoaded, setAdminStatusLoaded] = React.useState(false);\r\n  const [aliasEthAccount, setAliasEthAccount] = React.useState(null);\r\n  const [aliasVerified, setAliasVerified] = React.useState(null); // null means error, false means unverified and true means verified\r\n  const [channelAdmin, setChannelAdmin] = React.useState(false);\r\n  const [channelJson, setChannelJson] = React.useState([]);\r\n\r\n  // toast related section\r\n  const [toast, showToast] = React.useState(null);\r\n  const clearToast = () => showToast(null);\r\n  const showNetworkToast = () => {\r\n    showToast({\r\n      notificationTitle: (\r\n        <span style={{ color: \"#e20880\" }}> Invalid Network </span>\r\n      ),\r\n      notificationBody:\r\n        \"Please connect to the Ethereum network to access channels\",\r\n    });\r\n  };\r\n  /**\r\n   * Event listener for new notifications\r\n   */\r\n  const listenFornewNotifications = () => {\r\n    const event = \"SendNotification\";\r\n    //callback function for listener\r\n    const cb = async (eventChannelAddress, eventUserAddress, identityHex) => {\r\n      const userAddress = account;\r\n      const identity = hex2ascii(identityHex);\r\n      const notificationId = identity\r\n        .concat(\"+\")\r\n        .concat(eventChannelAddress)\r\n        .concat(\"+\")\r\n        .concat(eventUserAddress)\r\n        .toLocaleLowerCase();\r\n      const ipfsId = identity.split(\"+\")[1];\r\n      const channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(\r\n        eventChannelAddress\r\n      );\r\n\r\n      // Form Gateway URL\r\n      const url = \"https://ipfs.io/ipfs/\" + ipfsId;\r\n      fetch(url)\r\n        .then((result) => result.json())\r\n        .then(async (result) => {\r\n          const ipfsNotification = { ...result };\r\n          const notificationTitle =\r\n            ipfsNotification.notification.title !== \"\"\r\n              ? ipfsNotification.notification.title\r\n              : channelJson.name;\r\n          const toastMessage = {\r\n            notificationTitle,\r\n            notificationBody: ipfsNotification.notification.body,\r\n          };\r\n          const notificationObject = {\r\n            title: notificationTitle,\r\n            message: ipfsNotification.data.amsg,\r\n            cta: ipfsNotification.data.acta,\r\n            app: channelJson.name,\r\n            icon: channelJson.icon,\r\n            image: ipfsNotification.data.aimg,\r\n          };\r\n\r\n          if (ipfsNotification.data.type === \"1\") {\r\n            const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n              eventChannelAddress\r\n            );\r\n            const isSubscribed = channelSubscribers.find((sub) => {\r\n              return sub.toLowerCase() === account.toLowerCase();\r\n            });\r\n            if (isSubscribed) {\r\n              console.log(\"message recieved\", notificationObject);\r\n              showToast(toastMessage);\r\n              dispatch(addNewNotification(notificationObject));\r\n            }\r\n          } else if (userAddress === eventUserAddress) {\r\n            showToast(toastMessage);\r\n            dispatch(addNewNotification(notificationObject));\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\r\n            \"!!!Error, getting new notification data from ipfs --> %o\",\r\n            err\r\n          );\r\n        });\r\n    };\r\n    epnsCommReadProvider.on(event, cb);\r\n    return () => epnsCommReadProvider.off.bind(epnsCommReadProvider, event, cb); //when we unmount we remove the listener\r\n  };\r\n\r\n  //clear toast variable after it is shown\r\n  React.useEffect(() => {\r\n    if (toast) {\r\n      clearToast();\r\n    }\r\n  }, [toast]);\r\n  // toast related section\r\n\r\n  /**\r\n   * Logic to get channel alias and alias verification status as well as create instances of core and comunicator contract\r\n   */\r\n  React.useEffect(() => {\r\n    (async function init() {\r\n      const coreProvider = onCoreNetwork\r\n        ? library\r\n        : ethers.getDefaultProvider(ALLOWED_CORE_NETWORK, {\r\n            etherscan: config.etherscanToken,\r\n          });\r\n      // if we are not on the core network then check for if this account is an alias for another channel\r\n      if (!onCoreNetwork) {\r\n        // get the eth address of the alias address, in order to properly render information about the channel\r\n        const aliasEth = await postReq(\"/channels/get_eth_address\", {\r\n          aliasAddress: account,\r\n          op: \"read\",\r\n        }).then(({ data }) => {\r\n          console.log({ data });\r\n          const ethAccount = data;\r\n          if (ethAccount) {\r\n            setAliasEthAccount(ethAccount.ethAddress);\r\n          }\r\n          return data;\r\n        });\r\n        if (aliasEth) {\r\n          // if an alias exists, check if its verified.\r\n          await postReq(\"/channels/get_alias_verification_status\", {\r\n            aliasAddress: account,\r\n            op: \"read\",\r\n          }).then(({ data }) => {\r\n            // if it returns undefined then we need to let them know to verify their channel\r\n            if (!data) {\r\n              setAliasVerified(false);\r\n              return;\r\n            }\r\n            const { status } = data;\r\n            setAliasVerified(status || null);\r\n            return data;\r\n          });\r\n        }\r\n      }\r\n      // if we are not on the core network then fetch if there is an alias address from the api\r\n      // inititalise the read contract for the core network\r\n      const coreContractInstance = new ethers.Contract(\r\n        addresses.epnscore,\r\n        abis.epnscore,\r\n        coreProvider\r\n      );\r\n      // initialise the read contract for the communicator function\r\n      const commAddress = onCoreNetwork\r\n        ? addresses.epnsEthComm\r\n        : addresses.epnsPolyComm;\r\n      const commContractInstance = new ethers.Contract(\r\n        commAddress,\r\n        abis.epnsComm,\r\n        library\r\n      );\r\n      dispatch(setCommunicatorReadProvider(commContractInstance));\r\n      dispatch(setCoreReadProvider(coreContractInstance));\r\n      // initialise the read contract for the communicator function\r\n      if (!!(library && account)) {\r\n        let signer = library.getSigner(account);\r\n        const coreSignerInstance = new ethers.Contract(\r\n          addresses.epnscore,\r\n          abis.epnscore,\r\n          signer\r\n        );\r\n        const communicatorSignerInstance = new ethers.Contract(\r\n          commAddress,\r\n          abis.epnsComm,\r\n          signer\r\n        );\r\n        dispatch(setCoreWriteProvider(coreSignerInstance));\r\n        dispatch(setCommunicatorWriteProvider(communicatorSignerInstance));\r\n      }\r\n    })();\r\n  }, [account, chainId]);\r\n\r\n  /**\r\n   * When we instantiate the contract instances, fetch basic information about the user\r\n   * Corresponding channel owned.\r\n   */\r\n  React.useEffect(() => {\r\n    if (!epnsReadProvider || !epnsCommReadProvider) return;\r\n    // Reset when account refreshes\r\n    setChannelAdmin(false);\r\n    dispatch(setUserChannelDetails(null));\r\n    setAdminStatusLoaded(false);\r\n    userClickedAt(INITIAL_OPEN_TAB);\r\n    setChannelJson([]);\r\n    // save push admin to global state\r\n    epnsReadProvider.pushChannelAdmin()\r\n    .then((response) => {\r\n      dispatch(setPushAdmin(response));\r\n    })\r\n    .catch(err =>{\r\n      console.log({err})\r\n    });\r\n\r\n    // EPNS Read Provider Set\r\n    if (epnsReadProvider != null && epnsCommReadProvider != null) {\r\n      // Instantiate Data Stores\r\n      UsersDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      ChannelsDataStore.instance.init(\r\n        account,\r\n        epnsReadProvider,\r\n        epnsCommReadProvider\r\n      );\r\n      checkUserForChannelOwnership();\r\n      listenFornewNotifications();\r\n      fetchDelegators();\r\n    }\r\n  }, [epnsReadProvider, epnsCommReadProvider]);\r\n\r\n  // handle user action at control center\r\n  const userClickedAt = (controlIndex) => {\r\n    setControlAt(controlIndex);\r\n  };\r\n\r\n  // fetch all the channels who have delegated to this account\r\n  const fetchDelegators = () => {\r\n    postReq(\"/channels/delegatee/get_channels\", {\r\n      delegateAddress: account,\r\n      op: \"read\",\r\n    })\r\n      .then(async ({ data: delegators }) => {\r\n        // if there are actual delegators\r\n        // fetch basic information abouot the channels and store it to state\r\n        if (delegators && delegators.channelOwners) {\r\n          const channelInformationPromise = [\r\n            ...new Set([account, ...delegators.channelOwners])//make the accounts unique\r\n          ].map((channelAddress) =>\r\n            ChannelsDataStore.instance\r\n              .getChannelJsonAsync(channelAddress)\r\n              .then((res) => ({ ...res, address: channelAddress }))\r\n              .catch(() => false)\r\n          );\r\n          const channelInformation = await Promise.all(\r\n            channelInformationPromise\r\n          );\r\n          dispatch(setDelegatees(channelInformation.filter(Boolean)));\r\n          // fetch the json information about this delegatee channel and add to global state\r\n        } else {\r\n          dispatch(setDelegatees([]));\r\n        }\r\n      })\r\n      .catch(async (err) => {\r\n        console.log({ err });\r\n      });\r\n  };\r\n\r\n  // Check if a user is a channel or not\r\n  const checkUserForChannelOwnership = async () => {\r\n    // Check if account is admin or not and handle accordingly\r\n    const ownerAccount = !onCoreNetwork ? aliasEthAccount : account;\r\n    EPNSCoreHelper.getChannelJsonFromUserAddress(ownerAccount, epnsReadProvider)\r\n      .then(async (response) => {\r\n        // if channel admin, then get if the channel is verified or not, then also fetch more details about the channel\r\n        const verificationStatus = await epnsWriteProvider.getChannelVerfication(\r\n          ownerAccount\r\n        );\r\n        const channelJson = await epnsWriteProvider.channels(ownerAccount);\r\n        const channelSubscribers = await ChannelsDataStore.instance.getChannelSubscribers(\r\n          ownerAccount\r\n        );\r\n        dispatch(\r\n          setUserChannelDetails({\r\n            ...response,\r\n            ...channelJson,\r\n            subscribers: channelSubscribers,\r\n          })\r\n        );\r\n        dispatch(setCanVerify(Boolean(verificationStatus)));\r\n        setChannelJson(response);\r\n        setChannelAdmin(true);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          \"There was an error [checkUserForChannelOwnership]:\",\r\n          err.message\r\n        );\r\n        setChannelAdmin(false);\r\n        setAdminStatusLoaded(true);\r\n      })\r\n      .finally(() => {\r\n        setAdminStatusLoaded(true);\r\n      });\r\n  };\r\n\r\n  // Render\r\n  return (\r\n    <Container>\r\n      <Interface>\r\n        {controlAt == 0 && <Feedbox />}\r\n        {controlAt == 1 && <ViewChannels />}\r\n        {controlAt == 2 && adminStatusLoaded && <ChannelOwnerDashboard />}\r\n        {controlAt == 3 && <Info />}\r\n        {toast && (\r\n          <NotificationToast notification={toast} clearToast={clearToast} />\r\n        )}\r\n        {modalOpen && (\r\n          <AliasVerificationodal\r\n            onClose={() => setModalOpen(false)}\r\n            onSuccess={() => setAliasVerified(true)}\r\n            verificationStatus={aliasVerified}\r\n          />\r\n        )}\r\n      </Interface>\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: block;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Controls = styled.div`\r\n  flex: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ControlButton = styled.div`\r\n  flex: 1 1 21%;\r\n  height: 120px;\r\n  min-width: 200px;\r\n  background: #fff;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 15px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  border-bottom: 10px solid rgb(180, 180, 180);\r\n  margin: 20px;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  border-bottom: 10px solid\r\n    ${(props) => (props.active ? props.border : \"rgb(180,180,180)\")};\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`;\r\n\r\nconst ControlImage = styled.img`\r\n  height: 30%;\r\n  margin-right: 15px;\r\n  filter: ${(props) => (props.active ? \"brightness(1)\" : \"brightness(0)\")};\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.25\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-20px, 0px);\r\n      opacity: 0.4;\r\n    `};\r\n`;\r\n\r\nconst ControlText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 200;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.3) translate(-10px, 0px);\r\n    `};\r\n`;\r\n\r\nconst ControlChannelContainer = styled.div`\r\n  margin: 0px 20px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst ControlChannelImage = styled.img`\r\n  width: 20%;\r\n  margin-bottom: 10px;\r\n  transition: transform 0.2s ease-out;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(3.5) translate(-40px, 5px);\r\n      opacity: 0.2;\r\n      z-index: 1;\r\n    `};\r\n`;\r\n\r\nconst ControlChannelText = styled.label`\r\n  font-size: 16px;\r\n  font-weight: 300;\r\n  opacity: ${(props) => (props.active ? \"1\" : \"0.75\")};\r\n  transition: transform 0.2s ease-out;\r\n  background: -webkit-linear-gradient(#db268a, #34c6f3);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  z-index: 2;\r\n  ${(props) =>\r\n    props.active &&\r\n    css`\r\n      transform: scale(1.1) translate(0px, -20px);\r\n    `};\r\n`;\r\n\r\nconst Interface = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n\r\n  margin-bottom: 15px;\r\n  overflow: hidden;\r\n`;\r\n\r\n// Export Default\r\nexport default ChannelDashboardPage;\r\n","import React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport Info from \"segments/Info\";\r\n\r\nimport GLOBALS from \"config/Globals\";\r\n\r\n// Create Header\r\nfunction ReceiveNotifsPage() {\r\n  ReactGA.pageview(\"/receive\");\r\n\r\n\r\n  // Render\r\n  return (\r\n    <Container>\r\n      <Info />\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  flex-direction: column;\r\n  height: calc(100vh - ${GLOBALS.CONSTANTS.HEADER_HEIGHT}px - 52px - ${props => props.theme.interfaceTopPadding});\r\n  background: ${props => props.theme.mainBg};\r\n  align-self: stretch;\r\n`;\r\n\r\n// Export Default\r\nexport default ReceiveNotifsPage;\r\n","import React from \"react\";\r\nimport styled, { css } from 'styled-components';\r\nimport Blockies from \"components/BlockiesIdenticon\";\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\nimport { Device } from 'assets/Device';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport Skeleton from '@yisheng90/react-loading';\r\nimport { FiTwitter } from 'react-icons/fi';\r\nimport { GoVerified } from 'react-icons/go';\r\nimport { IoMdShareAlt } from 'react-icons/io';\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { ethers } from \"ethers\";\r\nimport { keccak256, arrayify, hashMessage, recoverPublicKey } from 'ethers/utils';\r\n\r\nfunction ViewDelegateeItem({ delegateeObject, epnsToken, pushBalance, theme }) {\r\n  const { account, library } = useWeb3React();\r\n  const [ loading, setLoading ] = React.useState(true);\r\n  const [ txInProgress, setTxInProgress ] = React.useState(false);\r\n  const [ isBalance, setIsBalance ] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setLoading(false);\r\n    if(pushBalance !== 0){\r\n      setIsBalance(true)\r\n    }\r\n  }, [account, delegateeObject]);\r\n\r\n  const delegateAction = async (delegateeAddress) => {\r\n    setTxInProgress(true);\r\n    if (!isBalance) {\r\n      toast.dark(\"No PUSH to Delegate!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n\r\n      setTxInProgress(false);\r\n      return;\r\n    }\r\n    let sendWithTxPromise;\r\n    sendWithTxPromise = epnsToken.delegate(delegateeAddress);\r\n    sendWithTxPromise\r\n      .then(async tx => {\r\n        let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n        try {\r\n          await library.waitForTransaction(tx.hash);\r\n          toast.update(txToast, {\r\n            render: \"Transaction Completed!\",\r\n            type: toast.TYPE.SUCCESS,\r\n            autoClose: 5000\r\n          });\r\n          setTxInProgress(false);\r\n        }\r\n        catch(e) {\r\n          toast.update(txToast, {\r\n            render: \"Transaction Failed! (\" + e.name + \")\",\r\n            type: toast.TYPE.ERROR,\r\n            autoClose: 5000\r\n          });\r\n          setTxInProgress(false);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        toast.dark('Transaction Cancelled!', {\r\n          position: \"bottom-right\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n        setTxInProgress(false);\r\n      })\r\n  }\r\n\r\n  // toast customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n    <Toaster>\r\n      <Loader\r\n       type=\"Oval\"\r\n       color={color}\r\n       height={30}\r\n       width={30}\r\n      />\r\n      <ToasterMsg>{msg}</ToasterMsg>\r\n    </Toaster>\r\n  )\r\n\r\n  // render\r\n  return (\r\n    <Item\r\n      key={delegateeObject.wallet}\r\n    >\r\n      <DelegateeItem\r\n        theme={theme}\r\n      >\r\n        <DelegateeImageOuter>\r\n          <DelegateeImageInner>\r\n            {loading &&\r\n              <Skeleton color=\"#eee\" width=\"100%\" height=\"100%\" />\r\n            }\r\n            {!loading && delegateeObject.pic &&\r\n              <Image\r\n                src={`./delegatees/${delegateeObject.pic}.jpg`}\r\n                srcSet={`./delegatees/${delegateeObject.pic}@2x.jpg 2x, ./delegatees/${delegateeObject.pic}@3x.jpg 3x`}\r\n                alt= {delegateeObject.name}\r\n              />\r\n            }\r\n            {!loading && !delegateeObject.pic &&\r\n              <Blockies seed={delegateeObject.wallet.toLowerCase()} opts={{seed: delegateeObject.wallet.toLowerCase(), size: 30, scale: 10}}/>\r\n            }\r\n          </DelegateeImageInner>\r\n\r\n          <ItemH\r\n            position=\"absolute\"\r\n            top=\"10px\"\r\n            left=\"10px\"\r\n            bg=\"#00000088\"\r\n            padding=\"6px 10px\"\r\n            radius=\"22px\"\r\n          >\r\n            <GoVerified size={12} color=\"#fff\"/>\r\n            <Span size=\"12px\" color=\"#fff\" padding=\"0px 0px 0px 10px\" spacing=\"0.2em\" weight=\"600\" textAlign=\"center\">{delegateeObject.votingPower.toLocaleString()}</Span>\r\n          </ItemH>\r\n        </DelegateeImageOuter>\r\n\r\n        <DelegateeProfile>\r\n          <Item>\r\n            <ItemH>\r\n              <Span weight=\"400\" textAlign=\"center\">{delegateeObject.name}</Span>\r\n              <Anchor\r\n                href={delegateeObject.url}\r\n                target=\"_blank\"\r\n                title={\"Visit Twitter profile of \" + delegateeObject.name}\r\n                bg=\"transparent\"\r\n                radius=\"4px\"\r\n                padding=\"4px\"\r\n                margin=\"0px 6px\"\r\n              >\r\n                <FiTwitter size={12} color=\"#35c5f3\" />\r\n              </Anchor>\r\n            </ItemH>\r\n\r\n            <DelegateeWallet size=\"0.5em\" color=\"#aaa\" spacing=\"0.2em\" weight=\"600\" textAlign=\"center\">{delegateeObject.wallet}</DelegateeWallet>\r\n          </Item>\r\n          <ItemBreak></ItemBreak>\r\n          <UnsubscribeButton >\r\n            <ActionTitle onClick={() => {delegateAction(delegateeObject.wallet)\r\n            }}\r\n              >Delegate</ActionTitle>\r\n          </UnsubscribeButton>\r\n\r\n          <Item\r\n            position=\"absolute\"\r\n            bottom=\"2px\"\r\n            left=\"-2px\"\r\n            padding=\"4px\"\r\n          >\r\n            <Anchor\r\n              href={delegateeObject.forum}\r\n              target=\"_blank\"\r\n              title={\"Visit forum post of \" + delegateeObject.name}\r\n              bg=\"transparent\"\r\n              radius=\"4px\"\r\n              padding=\"2px\"\r\n            >\r\n              <IoMdShareAlt size={16} color=\"#fff\" />\r\n            </Anchor>\r\n          </Item>\r\n        </DelegateeProfile>\r\n      </DelegateeItem>\r\n    </Item>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n  background: #fff;\r\n  border-radius: 10px;\r\n  border: 1px solid rgb(237, 237, 237);\r\n\r\n  margin: 15px 0px;\r\n  justify-content: center;\r\n  padding: 0px;\r\n`\r\n\r\nconst DelegateeItem = styled.div`\r\n  max-width: 220px;\r\n  min-width: 220px;\r\n  flex: 1;\r\n  margin: 20px 20px;\r\n  padding: 4px;\r\n  border: 2px solid #fafafa;\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-self: flex-start;\r\n  position: relative;\r\n\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.theme == \"nominee\" ? \"#35c5f3\" : \"linear-gradient( 283deg, #34c5f2 0%, #e20880 45%, #35c5f3 100%)\"};\r\n  }\r\n`\r\n\r\nconst DelegateeImageOuter = styled.div`\r\n  padding-top: 100%;\r\n  position: relative;\r\n`\r\n\r\nconst DelegateeImageInner = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  border-top-right-radius: 16px;\r\n  border-top-left-radius: 16px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst DelegateeProfile = styled(ItemH)`\r\n  background: #fff;\r\n  border-bottom-right-radius: 16px;\r\n  border-bottom-left-radius: 90px;\r\n  padding: 20px;\r\n`\r\n\r\nconst DelegateeWallet = styled(Span)`\r\n  word-break: break-all;\r\n  padding-top: 4px;\r\n`\r\n\r\nconst LineBreak = styled.div`\r\n  display: none;\r\n  flex-basis: 100%;\r\n  height: 0;\r\n\r\n  @media ${Device.tablet} {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ChannelActions = styled.div`\r\n  margin: 5px;\r\n  flex-grow: 1;\r\n  max-width: 120px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst ChannelActionButton = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${ props => props.disabled && css`\r\n    &:hover {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n    &:active {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n  `}\r\n`\r\n\r\nconst ActionTitle = styled.span`\r\n  ${ props => props.hideit && css`\r\n    visibility: hidden;\r\n  `};\r\n`\r\n\r\nconst ActionLoader = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst SkeletonButton = styled.div`\r\n  border: 0;\r\n  outline: 0;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 10px;\r\n  border-radius: 5px;\r\n  flex: 1;\r\n`\r\n\r\nconst SubscribeButton = styled(ChannelActionButton)`\r\n  background: #e20880;\r\n`\r\n\r\nconst UnsubscribeButton = styled(ChannelActionButton)`\r\n  background: #000;\r\n`\r\n\r\nconst DisabledDelegate = styled(ChannelActionButton)`\r\n  background: #ccc;\r\n`\r\nconst OwnerButton = styled(ChannelActionButton)`\r\n  background: #35c5f3;\r\n`\r\n\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`\r\nconst NFTTextStyle = styled.label`\r\n  margin: 0px 5px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  padding: 2px 8px;\r\n  border-radius: 10px;\r\n  font-size: 11px;\r\n`\r\nconst NFTStatus = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n\r\n  position: absolute;\r\n  bottom: 10px;\r\n  right: 10px;\r\n`\r\n\r\nconst NFTStatusTitle = styled(NFTTextStyle)`\r\n  background: #35c4f3;\r\n`\r\n\r\nconst NFTClaim = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n\r\n  position: absolute;\r\n  bottom: 10px;\r\n  left: 10px;\r\n`\r\n\r\nconst NFTClaimTitle = styled(NFTTextStyle)`\r\n  background: #e20880;\r\n`\r\nconst Blocky = styled.div`\r\n  position: relative;\r\n  width: 100px;\r\n  height: 100px;\r\n  border-radius: 100%;\r\n  overflow: hidden;\r\n  transform: scale(0.85);\r\n  outline-width: 2px;\r\n  outline-color: rgba(225,225,225,1);\r\n`\r\n// Export Default\r\nexport default ViewDelegateeItem;\r\n","import React, { useState } from \"react\";\r\nimport styled, { css, useTheme } from 'styled-components';\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3,LI, Image, P, Span, Anchor, Button, FormSubmision, Input, TextField, UL} from 'components/SharedStyling';\r\nimport Loader from 'react-loader-spinner'\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { BsChevronExpand } from 'react-icons/bs';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\r\nimport { ethers } from \"ethers\";\r\n\r\nimport Blockies from \"components/BlockiesIdenticon\";\r\n\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\n\r\n\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport ViewDelegateeItem from \"components/ViewDelegateeItem\";\r\n\r\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\r\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\r\n\r\nconst delegateesJSON = require(\"config/delegatees.json\")\r\nconst VOTING_TRESHOLD = 75000; //the treshold for delegates\r\n\r\n// Create Header\r\nfunction GovernancePage({ epnsReadProvider, epnsWriteProvide }) {\r\n  const themes = useTheme();\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const { account, library } = useWeb3React();\r\n\r\n  const [address, setAddress] = React.useState('');\r\n  const [ens, setENS] = React.useState('');\r\n  const [ensFetched, setENSFetched] = React.useState(false);\r\n\r\n  const [dashboardLoading, setDashboardLoading] = React.useState(true);\r\n  const [delegateesLoading, setDelegateesLoading] = React.useState(true);\r\n\r\n  const [txInProgress, setTxInProgress ] = React.useState(false);\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [user, setUser] = React.useState(null);\r\n  const [owner, setOwner] = React.useState(null);\r\n  const [delegateesObject, setDelegateesObject] = React.useState({});\r\n  const [pushDelegatees, setPushDelegatees] = React.useState([]);\r\n  const [pushNominees, setPushNominees] = React.useState([]);\r\n  const [epnsToken, setEpnsToken] = React.useState(null);\r\n  const [tokenBalance, setTokenBalance] = React.useState(null);\r\n  const [prettyTokenBalance, setPrettyTokenBalance] = React.useState(null);\r\n\r\n  const [showDelegateePrompt, setShowDelegateePrompt] = React.useState(false);\r\n  const [delegatee, setDelegatee] = React.useState(null);\r\n\r\n  const [showAnswers, setShowAnswers] = React.useState([]);\r\n  const [selfVotingPower, setSelfVotingPower ] = React.useState(null);\r\n  const [newDelegateeAddress, setNewDelegateeAddress ] = React.useState(\"0x\");\r\n  const [newDelegateeVotingPower, setNewDelegateeVotingPower ] = React.useState(null);\r\n\r\n  const toggleShowAnswer = (id) => {\r\n    let newShowAnswers = [...showAnswers];\r\n    newShowAnswers[id] = !newShowAnswers[id];\r\n    setShowAnswers(newShowAnswers);\r\n  }\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (account && account != '') {\r\n      // Check if the address is the same\r\n      if (address !== account) {\r\n        setENS('');\r\n        setENSFetched(false);\r\n\r\n        // get ens\r\n        library\r\n          .lookupAddress(account).then(function(name) {\r\n            setENS(name);\r\n            setENSFetched(true);\r\n            setAddress(account);\r\n          })\r\n          .catch(() => {\r\n            setENSFetched(true);\r\n            setAddress(account);\r\n          })\r\n      }\r\n\r\n    }\r\n  }, [account]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(account)\r\n    if (!!(library && account)) {\r\n      let signer = library.getSigner(account);\r\n      const epnsTokenContract = new ethers.Contract(addresses.epnsToken, abis.epnsToken, signer);\r\n      setEpnsToken(epnsTokenContract);\r\n    }\r\n  }, [account,library]);\r\n\r\n  React.useEffect(() => {\r\n    if(epnsToken){\r\n      getMyInfo()\r\n    }\r\n  }, [epnsToken,account,library, prettyTokenBalance, tokenBalance]);\r\n\r\n  React.useEffect(() => {\r\n    setDashboardLoading(false);\r\n  }, [account]);\r\n\r\n  React.useEffect(() => {\r\n    if(!epnsToken) return;\r\n    const delegateesList = Object.values(delegateesJSON);\r\n    // write helper function to sort by voting power\r\n    const votingPowerSorter = (a, b) => {\r\n      return  b.votingPower - a.votingPower\r\n    };\r\n\r\n\r\n    // go through all the delegates json and get their voting power\r\n    const allDelegateesPromise = delegateesList.map(async (oneDelegate:any) => {\r\n      const { wallet } = oneDelegate;\r\n      const votingPower = await EPNSCoreHelper.getVotingPower(wallet, epnsToken);\r\n      return {...oneDelegate, votingPower: Number(votingPower)};\r\n    });\r\n\r\n\r\n    Promise.all(allDelegateesPromise).then((allDelegatees) => {\r\n      // filter for delegates (i.e) Those who have above 75000 power,\r\n      // use the parameter votingPowerSimulate parameter to simulate voting power above the treshold\r\n      const delegateesAbove75k = allDelegatees.filter(({votingPower, votingPowerSimulate}) => {\r\n        return (votingPower >=  VOTING_TRESHOLD)\r\n      });\r\n\r\n      // sort by voting power\r\n      const sortedDelegatees = [...delegateesAbove75k].sort(votingPowerSorter);\r\n      setPushDelegatees(sortedDelegatees);\r\n\r\n      // calculate for  the nominees (i.e peoplw who have voting power less than 75k)\r\n      const delegateesBelow75k = allDelegatees.filter(({votingPower}) => {\r\n        return votingPower <  VOTING_TRESHOLD\r\n      });\r\n\r\n      const sortedNominees = [...delegateesBelow75k].sort(votingPowerSorter);\r\n\r\n      // sort by voting power\r\n      setPushNominees(sortedNominees);\r\n\r\n      setDelegateesLoading(false);\r\n    })\r\n    setDelegateesObject(delegateesJSON)\r\n    // in order to\r\n  }, [epnsToken])\r\n\r\n  const isValidAddress = (address) => {\r\n    if(ethers.utils.isAddress(address)){\r\n      return true\r\n    }\r\n    else{\r\n      toast.dark(\"Invalid address!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const getVotingPower = async (address) => {\r\n    try{\r\n      const votingPower = await EPNSCoreHelper.getVotingPower(address, epnsToken, true)\r\n      setNewDelegateeVotingPower(votingPower)\r\n    }\r\n    catch(err){\r\n    console.log(\" ~ file: Delegate.tsx ~ line 86 ~ getVotingPower ~ err\", err)\r\n    }\r\n  }\r\n\r\n  const getMyInfo = async () => {\r\n    let bal = await epnsToken.balanceOf(account)\r\n    let decimals =  await epnsToken.decimals()\r\n    let tokenBalance = await Number(bal/Math.pow(10, decimals))\r\n    let newBal = tokenBalance.toString();\r\n    let delegatee = await epnsToken.delegates(account)\r\n    let votes = await epnsToken.getCurrentVotes(account)\r\n    let votingPower = await Number(votes/Math.pow(10, decimals))\r\n    let prettyVotingPower = votingPower.toLocaleString();\r\n    setTokenBalance(tokenBalance)\r\n    setPrettyTokenBalance(newBal)\r\n    setDelegatee(delegatee)\r\n    setSelfVotingPower(prettyVotingPower)\r\n  }\r\n\r\n  const delegateAction = async (newDelegatee) => {\r\n    setTxInProgress(true);\r\n\r\n    const isAddress = await isValidAddress(newDelegatee)\r\n    console.log(isAddress)\r\n    if(!isAddress){\r\n      setTxInProgress(false);\r\n      return;\r\n    }\r\n    if (tokenBalance == 0) {\r\n      toast.dark(\"No PUSH to Delegate!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTxInProgress(false);\r\n      return;\r\n    }\r\n\r\n    let sendWithTxPromise;\r\n    sendWithTxPromise = epnsToken.delegate(newDelegatee);\r\n    sendWithTxPromise\r\n      .then(async tx => {\r\n\r\n        let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n\r\n        try {\r\n          await library.waitForTransaction(tx.hash);\r\n\r\n          toast.update(txToast, {\r\n            render: \"Transaction Completed!\",\r\n            type: toast.TYPE.SUCCESS,\r\n            autoClose: 5000\r\n          });\r\n\r\n          setTxInProgress(false);\r\n          setShowDelegateePrompt(false);\r\n        }\r\n        catch(e) {\r\n          toast.update(txToast, {\r\n            render: \"Transaction Failed! (\" + e.name + \")\",\r\n            type: toast.TYPE.ERROR,\r\n            autoClose: 5000\r\n          });\r\n\r\n          setTxInProgress(false);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        toast.dark('Transaction Cancelled!', {\r\n          position: \"bottom-right\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n\r\n        setTxInProgress(false);\r\n      })\r\n  }\r\n\r\n\r\n\r\n  // handle user action at control center\r\n  const userClickedAt = (controlIndex) => {\r\n    setControlAt(controlIndex);\r\n  }\r\n\r\n  // toast customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n    <Toaster>\r\n      <Loader\r\n       type=\"Oval\"\r\n       color={color}\r\n       height={30}\r\n       width={30}\r\n      />\r\n      <ToasterMsg>{msg}</ToasterMsg>\r\n    </Toaster>\r\n  )\r\n\r\n\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n    <Section>\r\n      <Content themes={themes.mainBg} padding=\"20px 20px 30px 20px\">\r\n        <Item align=\"stretch\" justify=\"flex-start\" margin=\"0px 15px 15px 15px\">\r\n          {(dashboardLoading || !prettyTokenBalance || !selfVotingPower) &&\r\n            <Item padding=\"20px\">\r\n              <Loader type=\"Oval\" color=\"#e20880\" height={40} width={40} />\r\n            </Item>\r\n          }\r\n\r\n          {!dashboardLoading && prettyTokenBalance && selfVotingPower &&\r\n            <Item margin=\"10px 0px 0px 0px\" self=\"stretch\" items=\"stretch\">\r\n              <StatsCard\r\n                align=\"stretch\"\r\n                justify=\"flex-start\"\r\n                self=\"stretch\"\r\n                bg={themes.mainBg}\r\n                op=\"1\"\r\n                \r\n              >\r\n                <StatsHeading bg=\"#e20880\">Governance Dashboard</StatsHeading>\r\n                <StatsContent>\r\n                  <ItemH align=\"stretch\" self=\"stretch\">\r\n                    <Item align=\"center\" self=\"center\" flex=\"initial\" padding=\"10px\">\r\n                      <Blocky>\r\n                        <BlockyInner>\r\n                           <Blockies seed={account.toLowerCase()} opts={{seed: account.toLowerCase(), size: 10, scale: 10}}/>\r\n                        </BlockyInner>\r\n                      </Blocky>\r\n                      <Wallet>\r\n                      {!ensFetched &&\r\n                        <Loader\r\n                           type=\"Oval\"\r\n                           color=\"#FFF\"\r\n                           height={16}\r\n                           width={16}\r\n                        />\r\n                      }\r\n                      {ensFetched && ens &&\r\n                        <>{ens}</>\r\n                      }\r\n                      {ensFetched && !ens &&\r\n                        <>{account.substring(0, 6)}.....{account.substring(account.length - 6)}</>\r\n                      }\r\n                      </Wallet>\r\n                    </Item>\r\n\r\n                    <Item align=\"flex-start\" self=\"stretch\" padding=\"10px\" size=\"16px\">\r\n                      <ItemH flex=\"initial\" padding=\"5px\">\r\n                        <Span weight=\"500\" padding=\"0px 8px 0px 0px\" color={themes.color}>$PUSH Balance: </Span>\r\n                        <CurvedSpan bg=\"#e20880\" color=\"#fff\" weight=\"600\" padding=\"4px 8px\" textTransform=\"uppercase\">{prettyTokenBalance}</CurvedSpan>\r\n                      </ItemH>\r\n\r\n                      <ItemH flex=\"initial\" padding=\"5px\">\r\n                        <Span weight=\"500\"  padding=\"0px 8px 0px 0px\" color={themes.color}>Voting Power: </Span>\r\n                        <CurvedSpan bg=\"#35c5f3\" color=\"#fff\" weight=\"600\" padding=\"4px 8px\" textTransform=\"uppercase\">{selfVotingPower}</CurvedSpan>\r\n                      </ItemH>\r\n\r\n                      {delegatee !== \"0x0000000000000000000000000000000000000000\" &&\r\n                        <ItemH flex=\"initial\" padding=\"5px\">\r\n                          <Span padding=\"0px 8px 0px 0px\">Delegated To: </Span>\r\n                          <Span weight=\"600\">{delegatee}</Span>\r\n                        </ItemH>\r\n                      }\r\n                    </Item>\r\n                  </ItemH>\r\n\r\n                  {showDelegateePrompt &&\r\n                    <Item\r\n                      bg=\"#eeeeeeee\"\r\n                      position=\"absolute\"\r\n                      top=\"0\"\r\n                      bottom=\"0\"\r\n                      left=\"0\"\r\n                      right=\"0\"\r\n                    >\r\n                      <Item align=\"stretch\" self=\"stretch\" margin=\"0px 20px 40px 20px\">\r\n                        <Span color=\"#000\" weight=\"400\">Enter delegatee address</Span><br></br>\r\n                        <Input\r\n                          placeholder=\"Enter delegatee address\"\r\n                          radius=\"4px\"\r\n                          padding=\"12px\"\r\n                          self=\"stretch\"\r\n                          bg=\"#fff\"\r\n                          value={newDelegateeAddress}\r\n                          onChange={async(e) => {\r\n                            setNewDelegateeAddress(e.target.value)\r\n                            setNewDelegateeVotingPower(null)\r\n                          }}\r\n                        />\r\n                        {newDelegateeVotingPower && newDelegateeAddress &&\r\n                          <StatsInnerTitle>Voting Power: {newDelegateeVotingPower}</StatsInnerTitle>\r\n                        }\r\n                      </Item>\r\n\r\n                    </Item>\r\n                  }\r\n\r\n                  <Item self=\"stretch\" align=\"flex-end\">\r\n                    <ItemH>\r\n\r\n                      <ButtonAlt\r\n                        bg={txInProgress ? \"#999\" : \"#e20880\"}\r\n                        disabled={txInProgress ? true : false}\r\n                        onClick={() => {\r\n                          if (showDelegateePrompt) {\r\n                            delegateAction(newDelegateeAddress)\r\n                          }\r\n                          else {\r\n                            setShowDelegateePrompt(true)\r\n                          }\r\n                        }}\r\n                        >\r\n                          <Span color=\"#fff\" weight=\"400\">Delegate to Others</Span>\r\n                      </ButtonAlt>\r\n\r\n                      {!showDelegateePrompt &&\r\n                        <ButtonAlt\r\n                          bg={txInProgress ? \"#999\" : \"#51CAF3\"}\r\n                          disabled={txInProgress ? true : false}\r\n                          onClick={() => { delegateAction(account)}}\r\n                        >\r\n                            <Span color=\"#fff\" weight=\"400\">Delegate to Myself</Span>\r\n                        </ButtonAlt>\r\n                      }\r\n\r\n                      <ButtonAlt\r\n                        bg={\"#000\"}\r\n                        onClick={\r\n                          () => {\r\n                            if (showDelegateePrompt) {\r\n                              getVotingPower(newDelegateeAddress)\r\n                            }\r\n                            else {\r\n                              setShowDelegateePrompt(true)\r\n                            }\r\n                          }\r\n                        }\r\n                      >\r\n                        <Span color=\"#fff\" weight=\"400\">Query Voting Power</Span>\r\n                      </ButtonAlt>\r\n\r\n                      {showDelegateePrompt &&\r\n                        <ButtonAlt\r\n                          bg=\"#000\"\r\n                          onClick={() => { setShowDelegateePrompt(false) }}\r\n                        >\r\n                            <Span color=\"#fff\" weight=\"400\">Close</Span>\r\n                        </ButtonAlt>\r\n                      }\r\n                    </ItemH>\r\n\r\n                  </Item>\r\n                </StatsContent>\r\n                <StatsPreview color=\"#e20880\">MY INFO</StatsPreview>\r\n              </StatsCard>\r\n            </Item>\r\n          }\r\n        </Item>\r\n\r\n        <Item align=\"stretch\" justify=\"flex-start\" margin=\"15px 15px 0px 15px\">\r\n          <StatsCard\r\n            align=\"stretch\"\r\n            justify=\"flex-start\"\r\n            self=\"stretch\"\r\n            bg={themes.mainBg}\r\n          >\r\n            <StatsHeading bg=\"#35c5f3\">Meet the PUSH Nominees</StatsHeading>\r\n            <NomineeContainer>\r\n              {delegateesLoading ? (\r\n                  <ContainerInfo>\r\n                    <Loader\r\n                      type=\"Oval\"\r\n                      color=\"#35c5f3\"\r\n                      height={40}\r\n                      width={40}\r\n                    />\r\n                  </ContainerInfo>\r\n                ) : (\r\n                  <AbsoluteWrapper>\r\n                    {\r\n                      pushNominees.map((onePushNominee) => {\r\n                        return (\r\n                          <ViewDelegateeItem\r\n                            key={onePushNominee.wallet}\r\n                            delegateeObject={onePushNominee}\r\n                            epnsToken={epnsToken}\r\n                            pushBalance={tokenBalance}\r\n                            theme=\"nominee\"\r\n                          />\r\n                        )\r\n                      })\r\n                    }\r\n                  </AbsoluteWrapper>\r\n                )\r\n              }\r\n            </NomineeContainer>\r\n          </StatsCard>\r\n        </Item>\r\n      </Content>\r\n\r\n      <Content padding=\"20px 20px 0px\">\r\n        <Item align=\"flex-start\" margin=\"0px 15px 0px 15px\">\r\n          <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n            <Span weight=\"200\" color={themes.color}>PUSH </Span>\r\n            <Span bg=\"#35c5f3\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">DELEGATEES</Span>\r\n          </H2>\r\n          <H3 color={themes.color}>Let's start <B color={themes.color}>governing!!</B> </H3>\r\n        </Item>\r\n\r\n        <Item>\r\n          {dashboardLoading &&\r\n            <ContainerInfo>\r\n              <Loader\r\n                type=\"Oval\"\r\n                color=\"#35c5f3\"\r\n                height={40}\r\n                width={40}\r\n              />\r\n            </ContainerInfo>\r\n          }\r\n\r\n          {!dashboardLoading && controlAt == 0 &&\r\n            <ItemH\r\n              padding=\"0px 20px 20px 20px\"\r\n              self=\"stretch\"\r\n            >\r\n              {pushDelegatees.length == 0  &&\r\n                <Item align=\"flex-start\" self=\"stretch\">\r\n                  <Span padding=\"10px 10px\" margin=\"10px 0px\" bg=\"#666\" color=\"#fff\" weight=\"600\"> Awkward!!</Span>\r\n                  <Span padding=\"10px 10px\" margin=\"10px 0px\" bg=\"#666\" color=\"#fff\" weight=\"600\">Show some  to Nominees to kickstart Governance!</Span>\r\n                </Item>\r\n              }\r\n              {pushDelegatees.length > 0  &&\r\n                pushDelegatees.map((oneDelegatee) => {\r\n                  return (\r\n                    <>\r\n                    <ViewDelegateeItem\r\n                      key={oneDelegatee.wallet}\r\n                      delegateeObject={oneDelegatee}\r\n                      epnsToken={epnsToken}\r\n                      pushBalance={tokenBalance}\r\n                      theme=\"delegate\"\r\n                    />\r\n                    </>\r\n                  );\r\n                })\r\n              }\r\n            </ItemH>\r\n          }\r\n        </Item>\r\n      </Content>\r\n\r\n      {/* FAQs */}\r\n      <Content padding=\"20px 20px 35px\" themes={darkMode? themeLight : themeDark}>\r\n        <Item align=\"stretch\" justify=\"flex-start\" margin=\"-10px 20px 0px 20px\">\r\n\r\n          {/* Question */}\r\n          <Item align=\"stretch\" margin=\"0px 0px 0px 0px\">\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(0)}}\r\n                hover=\"#e20880\"\r\n                \r\n              >\r\n                <Span color={themes.color}>\r\n                  What are PUSH Delegatees?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[0] &&\r\n                <Answer>\r\n                  <Span>\r\n                    Active community members who have at least <b>75,000 $PUSH</b> delegated to them.\r\n                    They will be able to create proposals on Snapshot that are approved on the <AMod href=\"https://gov.epns.io/\"> forum </AMod>\r\n                  </Span>\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(1)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  What are PUSH Nominees\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[1] &&\r\n                <Answer>\r\n                  <Span>\r\n                  Active community members who can be delegated $PUSH to vote for proposals Snapshot. If you wish to be PUSH Nominee, submit your nomination\r\n                  <AMod href=\"https://gov.epns.io/t/epns-push-delegatee-nominations/21\"> here. </AMod>\r\n                   Once they get at least <b>75,000 $PUSH </b> delegated to them, they become a PUSH Delegatee.\r\n                  </Span>\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(2)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  How can I become a PUSH Nominee?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[2] &&\r\n                <Answer>\r\n                  <Span>Step-by-step process:</Span>\r\n                  <UL>\r\n                    <LI>\r\n                      <Span>Sign up on:- <AMod href=\"https://gov.epns.io/\" target=\"_blank\" title=\"Join our EPNS's Telegram channel\">EPNS Governance Portal</AMod></Span>\r\n                    </LI>\r\n                    <LI>\r\n                      <Span>Go to:- <AMod href=\"https://gov.epns.io/t/epns-push-delegatee-nominations/21\" target=\"_blank\" title=\"Join our EPNS's Telegram channel\">https://gov.epns.io/t/epns-push-delegatee-nominations/21</AMod></Span>\r\n                    </LI>\r\n                    <LI>\r\n                      <Span>Submit your nomination by replying to the above post in the PROPOSED TEMPLATE.</Span>\r\n                    </LI>\r\n                  </UL>\r\n                  <Span>\r\n                    Now, once your nomination receives minimum of 10 likes,\r\n                    We will be adding your wallet address on our Governance Front end within 5-7 days.\r\n                    And later community members can start delegating votes to you.\r\n                  </Span>\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(3)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  What if I don't wish to be a PUSH Nominee?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[3] &&\r\n                <Answer>\r\n                  <Span>\r\n                    No problem! You can show support to your favourite PUSH Nominees by liking their nominations <AMod href=\"https://gov.epns.io/t/epns-push-delegatee-nominations/21\">here</AMod>.\r\n                  </Span>\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(4)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  Where should I start?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[4] &&\r\n                <Answer>\r\n                  <Span>Visit <AMod href=\"https://gov.epns.io/\" target=\"_blank\" title=\"Join our EPNS's Telegram channel\">EPNS Governance Portal</AMod> and introduce yoursef on the platform in the suggested format.</Span>\r\n\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(5)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  What happens to the delegated voting power when I sell my PUSH tokens?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[5] &&\r\n                <Answer>\r\n                  <Span>If you delegate your voting power to someone/yourself and later you sell your\r\n                    PUSH tokens, then the voting power of those tokens gets revoked. Now the new owner gets to decide whom to delegate to. </Span>\r\n\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(6)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  How can I cast my vote?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[6] &&\r\n                <Answer>\r\n                  <Span>Please visit <AMod href=\"https://snapshot.org/#/epns.eth\" target=\"_blank\" title=\"EPNS Governance - Snapshot Portal\">EPNS Governance - Snapshot Portal</AMod> to view the ongoing on-chain proposals and cast your vote.</Span>\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n\r\n            <QnAItem>\r\n              <Question\r\n                onClick={() => {toggleShowAnswer(7)}}\r\n                hover=\"#e20880\"\r\n              >\r\n                <Span color={themes.color}>\r\n                  How can I keep up with EPNS Governance?\r\n                </Span>\r\n                <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n              </Question>\r\n\r\n              {showAnswers[7] &&\r\n                <Answer>\r\n                  <Span>Join our <AMod href=\"https://t.me/epnsproject\" target=\"_blank\" title=\"Join our EPNS's Telegram channel\">Telegram</AMod>, follow us on <AMod href=\"https://twitter.com/epnsproject\" target=\"_blank\" title=\"Join our EPNS's Twitter channel\">Twitter</AMod>, and sign up for our 5 minute <AMod href=\"https://epns.substack.com/\" target=\"_blank\" title=\"Join our EPNS's Twitter channel\">weekly product updates</AMod>.</Span>\r\n                </Answer>\r\n              }\r\n            </QnAItem>\r\n          </Item>\r\n        </Item>\r\n      </Content>\r\n    </Section>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 80vh;\r\n`\r\n\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  background: #fafafa;\r\n`\r\nconst Question = styled(Button)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n  background: #fff;\r\n`\r\nconst Answer = styled(Item)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n`\r\n\r\nconst QnAItem = styled(Item)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n  flex: auto;\r\n  margin: 15px 0px;\r\n  border: 1px solid #fafafa;\r\n  border-radius: 10px;\r\n  box-shadow: 0px 5px 20px -10px rgb(0 0 0 / 0.20);\r\n  overflow: hidden;\r\n\r\n  & ${Question} {\r\n    background: transparent;\r\n    justify-content: flex-start;\r\n    text-transform: uppercase;\r\n\r\n    & ${Span} {\r\n      font-weight: 400;\r\n      letter-spacing: 0.2em;\r\n      margin-left: 10px;\r\n      flex: 1;\r\n    }\r\n\r\n    &:hover {\r\n      & ${Span} {\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n\r\n  & ${Answer} {\r\n    border: 1px solid #e6e6e6;\r\n    border-top: 1px solid #e6e6e6;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    padding: 10px 15px;\r\n    align-items: flex-start;\r\n    background: #fff;\r\n\r\n    & ${Span} {\r\n      line-height: 1.5em;\r\n      margin: 10px;\r\n      color: #000 ;\r\n      font-size: 1.05em;\r\n    }\r\n  }\r\n`\r\n\r\nconst AMod = styled(A)`\r\n  color: #e20880;\r\n  font-weight: 500;\r\n`\r\n\r\nconst EpicButton = styled(A)`\r\n  padding: 15px 15px;\r\n  margin-left: 25px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  border-radius: 8px;\r\n  background: linear-gradient(273deg, #674c9f 0%, rgba(226,8,128,1) 100%);\r\n  `\r\n  const ChannelActionButton = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 800;\r\n  // font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${ props => props.disabled && css`\r\n    &:hover {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n    &:active {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n  `}\r\n`\r\n  const GradientButton = styled(ChannelActionButton)`\r\n  // background: #674c9f;\r\n  background: linear-gradient(273deg, #674c9f 0%, rgba(226,8,128,1) 100%);\r\n  `\r\n  const ActionTitle = styled.span`\r\n  ${ props => props.hideit && css`\r\n    visibility: hidden;\r\n  `};\r\n`\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`\r\nconst StatsCard = styled(Item)`\r\n  overflow: hidden;\r\n  min-width: 180px;\r\n\r\n  border-radius: 12px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  &:hover {\r\n    opacity: ${props => props.op ? \"0.9\" : props.op}\r\n  }\r\n`;\r\n\r\nconst CenterHeading = styled.h2`\r\n  text-align: center;\r\n`;\r\n\r\nconst PoolContainer = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst StatsHeading = styled(Item)`\r\n  flex: 0;\r\n  align-self: stretch;\r\n  color: #fff;\r\n  top: 0px;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.1em;\r\n  font-size: 15px;\r\n  text-align: center;\r\n  padding: 10px 5px;\r\n  right: 0;\r\n  left: 0;\r\n`\r\n\r\nconst NomineeContainer = styled.div`\r\n  padding: 0px 20px 0px 20px;\r\n  position: relative;\r\n  height: 420px;\r\n  overflow-y: hidden;\r\n  overflow-x: auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* width */\r\n\r\n  /* Track */\r\n  ::-webkit-scrollbar-track {\r\n    border-radius: 10px;\r\n  }\r\n`;\r\n\r\nconst StatsContent = styled(Item)`\r\n  padding: 20px 20px;\r\n`\r\n\r\nconst AbsoluteWrapper = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: max-content;\r\n  overflow: scroll;\r\n  display: flex;\r\n`\r\n\r\nconst StatsPreview = styled(Span)`\r\n  position: absolute;\r\n  bottom: 5px;\r\n  right: 10px;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  opacity: 0.25;\r\n  letter-spacing:0.1em;\r\n  text-transform: uppercase;\r\n  color: ${props => props.color || '#000'};\r\n  z-index: -1;\r\n`\r\n\r\nconst StatsInnerTitle = styled.span`\r\n  // font-weight: bold;\r\n  font-size: 15px;\r\n  letter-spacing: 0.1em;\r\n  align-items: left;\r\n  margin-top: 10px;\r\n`;\r\n\r\n\r\nconst StatsInnerSub = styled.span`\r\n  font-size: 12px;\r\n  color: #999;\r\n  font-weight: 600;\r\n  align-self: flex-end;\r\n`;\r\n\r\nconst ButtonAlt = styled(Button)`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${(props) =>\r\n    props.disabled &&\r\n    css`\r\n      &:hover {\r\n        opacity: 1;\r\n        cursor: default;\r\n        pointer: default;\r\n      }\r\n      &:active {\r\n        opacity: 1;\r\n        cursor: default;\r\n        pointer: default;\r\n      }\r\n    `}\r\n`;\r\n\r\nconst CurvedSpan = styled(Span)`\r\n  font-size: 14px;\r\n`;\r\n\r\n// css styles\r\nconst Blocky = styled.div`\r\n  position: relative;\r\n  width: 96px;\r\n  height: 96px;\r\n  border-radius: 100%;\r\n  overflow: hidden;\r\n  transform: scale(0.85);\r\n  outline-width: 2px;\r\n  outline-color: rgba(225,225,225,1);\r\n`\r\n\r\nconst BlockyInner = styled.div`\r\n`\r\n\r\nconst Wallet = styled.span`\r\n  margin: 10px 10px;\r\n  padding: 8px 15px;\r\n  height: 16px;\r\n  display: none;\r\n  align-items: baseline;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  border-radius: 15px;\r\n  background: #333;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\n\r\n// Export Default\r\nexport default GovernancePage;\r\n","import EPNSCoreHelper from \"helpers/EPNSCoreHelper\";\r\nimport { ethers } from \"ethers\";\r\nimport { bigNumber } from \"ethers/utils\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\n\r\nconst ONE_PUSH = ethers.BigNumber.from(1).mul(\r\n  ethers.BigNumber.from(10).pow(ethers.BigNumber.from(18))\r\n);\r\nconst GENESIS_EPOCH_AMOUNT_PUSH = 30000\r\nconst GENESIS_EPOCH_AMOUNT_LP = 35000\r\n\r\nconst bn = function(number, defaultValue = null) { if (number == null) { if (defaultValue == null) { return null } number = defaultValue } return ethers.BigNumber.from(number) }\r\n\r\nconst tokenToBn = (token) => {\r\n  return token.mul(ethers.BigNumber.from(10).pow(ethers.BigNumber.from(18)))\r\n}\r\n\r\nconst tokenBNtoNumber = (tokenBn) => {\r\n  return tokenBn.div(ethers.BigNumber.from(10).pow(ethers.BigNumber.from(10))).toNumber() / 100000000\r\n}\r\n\r\nconst bnToInt = function (bnAmount) { return parseInt(bnAmount.div(bn(10).pow(18))) }\r\n\r\nexport default class YieldFarmingDataStore {\r\n  static instance =\r\n    YieldFarmingDataStore.instance || new YieldFarmingDataStore();\r\n\r\n  state = {\r\n    account: null,\r\n    signer: null,\r\n    staking: null,\r\n    yieldFarmingPUSH: null,\r\n    yieldFarmingLP: null,\r\n    rewardForCurrentEpochPush: null,\r\n    rewardForCurrentEpochLP: null,\r\n\r\n    genesisEpochAmountPUSH: GENESIS_EPOCH_AMOUNT_PUSH,\r\n    deprecationPerEpochPUSH: 100,\r\n    genesisEpochAmountLP: GENESIS_EPOCH_AMOUNT_LP,\r\n    deprecationPerEpochLP: 100,\r\n  };\r\n\r\n  // init\r\n  init = (account, epnsToken, staking, yieldFarmingPUSH, yieldFarmingLP, uniswapV2Router02) => {\r\n    // set account\r\n    this.state.account = account;\r\n    this.state.epnsToken = epnsToken;\r\n    this.state.staking = staking;\r\n    this.state.yieldFarmingPUSH = yieldFarmingPUSH;\r\n    this.state.yieldFarmingLP = yieldFarmingLP;\r\n    this.state.uniswapV2Router02 = uniswapV2Router02;\r\n  };\r\n\r\n  // 1. Listen for Subscribe Async\r\n  getPoolStats = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      const yieldFarmingPUSH = this.state.yieldFarmingPUSH;\r\n      const yieldFarmingLP = this.state.yieldFarmingLP;\r\n\r\n      const currentEpochPUSH = await yieldFarmingPUSH.getCurrentEpoch();\r\n\r\n      const pushPriceAmounts = await this.state.uniswapV2Router02.getAmountsOut(ONE_PUSH.toString(), [addresses.epnsToken, addresses.WETHAddress, addresses.USDTAddress]);\r\n      const pushPrice = pushPriceAmounts[pushPriceAmounts.length -1].toNumber()/1000000;\r\n\r\n      const pushAmountReserve = tokenBNtoNumber(await this.state.epnsToken.balanceOf(addresses.epnsLPToken))\r\n      const wethAmountReserve = tokenBNtoNumber(await this.state.epnsToken.attach(addresses.WETHAddress).balanceOf(addresses.epnsLPToken)) // Using epnsToken instance for WETH instance\r\n\r\n      const ethPriceAmounts = await this.state.uniswapV2Router02.getAmountsOut(ONE_PUSH.toString(), [addresses.WETHAddress, addresses.USDTAddress]);\r\n      const ethPrice = ethPriceAmounts[ethPriceAmounts.length -1].toNumber()/1000000;\r\n\r\n      const uniTotalSupply = tokenBNtoNumber(await this.state.epnsToken.attach(addresses.epnsLPToken).totalSupply()) // Using epnsToken instance for Uni-V2 instance\r\n\r\n      const uniLpPrice = ((pushAmountReserve * pushPrice) + (wethAmountReserve * ethPrice)) / uniTotalSupply\r\n      const lpToPushRatio = uniLpPrice / pushPrice\r\n\r\n      const pushNextPoolSize = tokenBNtoNumber(await yieldFarmingPUSH.getPoolSize(currentEpochPUSH.add(1)));\r\n      const lpNextPoolSize = tokenBNtoNumber(await yieldFarmingLP.getPoolSize(currentEpochPUSH.add(1)));\r\n\r\n      const totalValueLocked = (pushNextPoolSize * pushPrice) + (lpNextPoolSize * uniLpPrice)\r\n\r\n      const epochDuration = await yieldFarmingPUSH.epochDuration();\r\n\r\n      const epochStart = await yieldFarmingPUSH.epochStart();\r\n\r\n      const start = epochStart.add(currentEpochPUSH.sub(1).mul(epochDuration));\r\n      const epochEndTimestamp = start.add(epochDuration);\r\n\r\n      const pushTotalDistributedAmount = await yieldFarmingPUSH.TOTAL_DISTRIBUTED_AMOUNT();\r\n      const lpTotalDistributedAmount = await yieldFarmingLP.TOTAL_DISTRIBUTED_AMOUNT();\r\n\r\n      const totalDistributedAmount = pushTotalDistributedAmount.add(\r\n        lpTotalDistributedAmount\r\n      );\r\n\r\n      const pushRewardsDistributed = await this.getPushRewardsDistributed();\r\n\r\n      resolve({\r\n        totalValueLocked,\r\n        pushPrice,\r\n        epochEndTimestamp,\r\n        totalDistributedAmount,\r\n        pushRewardsDistributed,\r\n        currentEpoch: currentEpochPUSH,\r\n        lpToPushRatio\r\n      });\r\n    });\r\n  };\r\n\r\n  // 1. Listen for Subscribe Async\r\n  getPUSHPoolStats = async () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      const epnsToken = this.state.epnsToken;\r\n      const staking = this.state.staking;\r\n      const yieldFarmingPUSH = this.state.yieldFarmingPUSH;\r\n\r\n      const currentEpochPUSH = await yieldFarmingPUSH.getCurrentEpoch();\r\n      const totalEpochPUSH = (await yieldFarmingPUSH.NR_OF_EPOCHS()).toString();\r\n\r\n      const genesisEpochAmount = tokenToBn(ethers.BigNumber.from(this.state.genesisEpochAmountPUSH));\r\n      const deprecationPerEpoch = tokenToBn(ethers.BigNumber.from(this.state.deprecationPerEpochPUSH));\r\n\r\n      const rewardForCurrentEpoch = this.calcTotalAmountPerEpoch(\r\n        genesisEpochAmount,\r\n        currentEpochPUSH,\r\n        deprecationPerEpoch\r\n      );\r\n\r\n      this.state.rewardForCurrentEpochPush = rewardForCurrentEpoch;\r\n\r\n      const poolBalance = await yieldFarmingPUSH.getPoolSize(\r\n        currentEpochPUSH.add(1)\r\n      );\r\n\r\n      const stakingAPR = this.calcStakingAPR(\r\n        genesisEpochAmount,\r\n        currentEpochPUSH,\r\n        deprecationPerEpoch,\r\n        poolBalance,\r\n      );\r\n\r\n      resolve({\r\n        currentEpochPUSH,\r\n        totalEpochPUSH,\r\n        rewardForCurrentEpoch,\r\n        poolBalance,\r\n        stakingAPR\r\n      });\r\n    });\r\n  };\r\n\r\n  getLPPoolStats = async (poolStats) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      const epnsToken = this.state.epnsToken;\r\n      const staking = this.state.staking;\r\n      const yieldFarmingLP = this.state.yieldFarmingLP;\r\n\r\n      const currentEpochPUSH = await yieldFarmingLP.getCurrentEpoch();\r\n      const totalEpochPUSH = (await yieldFarmingLP.NR_OF_EPOCHS()).toString();\r\n      const genesisEpochAmount = tokenToBn(ethers.BigNumber.from(this.state.genesisEpochAmountLP));\r\n      const deprecationPerEpoch = tokenToBn(ethers.BigNumber.from(this.state.deprecationPerEpochLP));\r\n\r\n      const rewardForCurrentEpoch = this.calcTotalAmountPerEpoch(\r\n        genesisEpochAmount,\r\n        currentEpochPUSH,\r\n        deprecationPerEpoch\r\n      );\r\n\r\n      this.state.rewardForCurrentEpochLP = rewardForCurrentEpoch;\r\n\r\n      const poolBalance = await yieldFarmingLP.getPoolSize(\r\n        currentEpochPUSH.add(1)\r\n      );\r\n\r\n      const stakingAPR = await this.calcLPPoolAPR(\r\n        genesisEpochAmount,\r\n        currentEpochPUSH,\r\n        deprecationPerEpoch,\r\n        poolBalance,\r\n        poolStats\r\n      );\r\n\r\n      resolve({\r\n        currentEpochPUSH,\r\n        totalEpochPUSH,\r\n        rewardForCurrentEpoch,\r\n        poolBalance,\r\n        stakingAPR\r\n      });\r\n    });\r\n  };\r\n\r\n  // 1. Listen for Subscribe Async\r\n  getUserData = async (contract) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (this.state.account) {\r\n        const currentEpochPUSH = await contract.getCurrentEpoch();\r\n\r\n        const potentialUserReward = (await this.calculateUserEpochReward(currentEpochPUSH, contract)).toFixed(2)\r\n\r\n        const epochStakeNext = await contract.getEpochStake(\r\n          this.state.account,\r\n          currentEpochPUSH.add(1)\r\n        );\r\n\r\n        let totalAccumulatedReward = 0\r\n\r\n        for(var i=0; i<=currentEpochPUSH.sub(1).toNumber(); i++){\r\n          const epochReward = await this.calculateUserEpochReward(i, contract)\r\n          totalAccumulatedReward = totalAccumulatedReward + epochReward\r\n        }\r\n\r\n        totalAccumulatedReward = totalAccumulatedReward.toFixed(2)\r\n        const lastEpochIdHarvested = (await contract.lastEpochIdHarvested(this.state.account)).toNumber()\r\n\r\n        let totalAvailableReward = 0\r\n\r\n        for(var i = lastEpochIdHarvested + 1; i<=currentEpochPUSH.sub(1).toNumber(); i++){\r\n          const epochReward = await this.calculateUserEpochReward(i, contract)\r\n          totalAvailableReward = totalAvailableReward + epochReward\r\n        }\r\n        totalAvailableReward = totalAvailableReward.toFixed(2)\r\n\r\n        resolve({\r\n          potentialUserReward,\r\n          epochStakeNext,\r\n          totalAccumulatedReward,\r\n          totalAvailableReward\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  getPushRewardsDistributed = async () => {\r\n    const yieldFarmingPUSH = this.state.yieldFarmingPUSH;\r\n    const yieldFarmingLP = this.state.yieldFarmingLP;\r\n\r\n    const currentEpochPUSH = await yieldFarmingPUSH.getCurrentEpoch();\r\n    const genesisEpochAmountPUSH = tokenToBn(ethers.BigNumber.from(this.state.genesisEpochAmountPUSH))\r\n    const deprecationPerEpochPUSH = tokenToBn(ethers.BigNumber.from(this.state.deprecationPerEpochPUSH))\r\n    const currentEpochLP = await yieldFarmingLP.getCurrentEpoch();\r\n    const genesisEpochAmountLP = tokenToBn(ethers.BigNumber.from(this.state.genesisEpochAmountLP))\r\n    const deprecationPerEpochLP = tokenToBn(ethers.BigNumber.from(this.state.deprecationPerEpochLP))\r\n\r\n    let pushPoolRewardsDistributed = ethers.BigNumber.from(0);\r\n    let lpPoolRewardsDistributed = ethers.BigNumber.from(0);\r\n\r\n    for(var i=0; i<currentEpochLP.toNumber(); i++){\r\n      const rewardForCurrentEpochLP = this.calcTotalAmountPerEpoch(\r\n        genesisEpochAmountLP,\r\n        ethers.BigNumber.from(i),\r\n        deprecationPerEpochLP\r\n      );\r\n\r\n      lpPoolRewardsDistributed = lpPoolRewardsDistributed.add(rewardForCurrentEpochLP);\r\n\r\n      const rewardForCurrentEpochPUSH = this.calcTotalAmountPerEpoch(\r\n        genesisEpochAmountPUSH,\r\n        ethers.BigNumber.from(i),\r\n        deprecationPerEpochPUSH\r\n      );\r\n\r\n      pushPoolRewardsDistributed = pushPoolRewardsDistributed.add(rewardForCurrentEpochPUSH);\r\n    }\r\n\r\n    return pushPoolRewardsDistributed.add(lpPoolRewardsDistributed)\r\n  }\r\n\r\n  calcTotalAmountPerEpoch = (\r\n    genesisEpochAmount,\r\n    epochId,\r\n    deprecationPerEpoch\r\n  ) => {\r\n    return genesisEpochAmount.sub(epochId.mul(deprecationPerEpoch));\r\n  };\r\n\r\n  calcAnnualEpochReward = (\r\n    genesisEpochAmount,\r\n    epochId,\r\n    deprecationPerEpoch\r\n  ) => {\r\n    // get current epoch reward\r\n    const currentEpochReward = this.calcTotalAmountPerEpoch(genesisEpochAmount, epochId, deprecationPerEpoch)\r\n\r\n    const weeks = 52\r\n    const depreciate = deprecationPerEpoch.mul(weeks * (weeks - 1)).div(2)\r\n\r\n    const annualEpochReward = (currentEpochReward.mul(weeks)).sub(depreciate)\r\n\r\n    return annualEpochReward\r\n  }\r\n\r\n  calcStakingAPR = (\r\n    genesisEpochAmount,\r\n    epochId,\r\n    deprecationPerEpoch,\r\n    totalStaked\r\n  ) => {\r\n    // get annual rewards\r\n    const annualRewards = this.calcAnnualEpochReward(genesisEpochAmount, epochId, deprecationPerEpoch)\r\n\r\n    const apr = annualRewards.mul(1000000).div(Math.max(totalStaked, 1))\r\n    const aprFormatted = (parseInt(apr.toString())/10000).toFixed(2)\r\n\r\n    return aprFormatted\r\n  }\r\n\r\n  calcLPPoolAPR = async (\r\n    genesisEpochAmount,\r\n    epochId,\r\n    deprecationPerEpoch,\r\n    totalStaked,\r\n    poolStats\r\n  ) => {\r\n    // get annual rewards\r\n    const annualRewards = this.calcAnnualEpochReward(genesisEpochAmount, epochId, deprecationPerEpoch)\r\n\r\n    const apr = annualRewards.mul(1000000).div(Math.max(totalStaked, 1))\r\n    const aprFormatted = (parseInt(apr.toString())/(10000 * poolStats.lpToPushRatio)).toFixed(2)\r\n\r\n    // console.log(annualRewards.toString(), genesisEpochAmount.toString())\r\n    // if (poolStats) {\r\n    //   console.log(poolStats.totalValueLocked)\r\n    //   console.log(poolStats[\"lpToPushRatio\"])\r\n    // }\r\n\r\n    return aprFormatted\r\n\r\n  }\r\n\r\n  calculateUserEpochReward = async (\r\n    epochId,\r\n    contract\r\n  ) => {\r\n      const epochStake = tokenBNtoNumber(await contract.getEpochStake(\r\n        this.state.account,\r\n        epochId\r\n      ));\r\n\r\n      const poolSize = tokenBNtoNumber(await contract.getPoolSize(epochId));\r\n\r\n      let potentialUserReward = 0;\r\n      if (poolSize > 0) {\r\n        if (contract.address == addresses.yieldFarmLP) {\r\n          const rewardForCurrentEpoch = tokenBNtoNumber(this.state.rewardForCurrentEpochLP)\r\n          potentialUserReward = epochStake / poolSize * rewardForCurrentEpoch\r\n        }\r\n        else {\r\n          const rewardForCurrentEpoch = tokenBNtoNumber(this.state.rewardForCurrentEpochPush)\r\n          potentialUserReward = epochStake / poolSize * rewardForCurrentEpoch\r\n        }\r\n\r\n      }\r\n\r\n      return potentialUserReward\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport styled, { css } from 'styled-components';\r\nimport {Section, Content, Item, ItemH, Span, Anchor} from 'components/SharedStyling';\r\n\r\nimport { AiFillInfoCircle } from 'react-icons/ai';\r\nimport { Tooltip } from \"@material-ui/core\";\r\n\r\n// Faucet URLs\r\nfunction InfoTooltip({title}) {\r\n  // render\r\n  return (\r\n    <Tooltip style={{marginLeft: \"5px\"}} title={title}>\r\n        <span>\r\n            <AiFillInfoCircle style={{color: \"white\"}} />\r\n        </span>\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\n// Export Default\r\nexport default InfoTooltip;\r\n","import React from \"react\";\r\nimport { useWeb3React, UnsupportedChainIdError } from \"@web3-react/core\";\r\n\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\nimport InfoTooltip from \"components/InfoTooltip\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport { AnimateOnChange } from \"react-animation\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport Blockies from \"components/BlockiesIdenticon\";\r\n\r\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\r\nconst ethers = require(\"ethers\");\r\n\r\nconst bn = function(number, defaultValue = null) { if (number == null) { if (defaultValue == null) { return null } number = defaultValue } return ethers.BigNumber.from(number) }\r\n\r\nconst tokens = function (amount) { return (bn(amount).mul(bn(10).pow(18))).toString() }\r\nconst tokensBN = function (amount) { return (bn(amount).mul(bn(10).pow(18))) }\r\nconst bnToInt = function (bnAmount) { return bnAmount.div(bn(10).pow(18)) }\r\n\r\n// Create Header\r\nexport default function PoolCard({\r\n  poolName,\r\n  poolAddress,\r\n  tokenAddress,\r\n  getPoolStats,\r\n  getPUSHPoolStats,\r\n  getUserData,\r\n  pushPoolStats,\r\n  userData,\r\n}) {\r\n  const { active, error, account, library, chainId } = useWeb3React();\r\n  const [depositAmountToken, setDepositAmountToken] = React.useState(0);\r\n  const [withdrawAmountToken, setWithdrawAmountToken] = React.useState(0);\r\n  const [harvestEpochValue, setHarvestEpochValue] = React.useState(0);\r\n  const [txInProgress, setTxInProgress] = React.useState(false);\r\n\r\n  const [showDepositItem, setShowDepositItem] = React.useState(false);\r\n\r\n  const [depositApproved, setDepositApprove] = React.useState(false);\r\n  const [txInProgressApprDep, setTxInProgressApprDep] = React.useState(false);\r\n\r\n  const [txInProgressDep, setTxInProgressDep] = React.useState(false);\r\n  const [showDepSlip, setShowDepSlip] = React.useState(null);\r\n\r\n  const [txInProgressWithdraw, setTxInProgressWithdraw] = React.useState(false);\r\n\r\n  const [txInProgressMassHarvest, setTxInProgressMassHarvest] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    // Check if the account has approved deposit\r\n    checkApprDeposit();\r\n\r\n  }, [depositAmountToken]);\r\n\r\n  const checkApprDeposit = async () => {\r\n    if (depositAmountToken <= 0) {\r\n      setDepositApprove(false);\r\n      return;\r\n    }\r\n    setTxInProgressApprDep(true);\r\n\r\n    var signer = library.getSigner(account);\r\n    const tokenAddr = poolName == \"Uniswap LP Pool (UNI-V2)\" ? addresses.epnsLPToken : addresses.epnsToken;\r\n    let token = new ethers.Contract(tokenAddr, abis.epnsToken, signer);\r\n\r\n    const allowance = await token.allowance(account, addresses.staking);\r\n    if (allowance.gte(bn(depositAmountToken))) {\r\n      setDepositApprove(true);\r\n    }\r\n    else {\r\n      setDepositApprove(false);\r\n    }\r\n\r\n    setTxInProgressApprDep(false);\r\n  }\r\n\r\n  const fillMax = async() => {\r\n    var signer = library.getSigner(account);\r\n    const tokenAddr = poolName == \"Uniswap LP Pool (UNI-V2)\" ? addresses.epnsLPToken : addresses.epnsToken;\r\n    let token = new ethers.Contract(tokenAddr, abis.epnsToken, signer);\r\n\r\n    let balance = bnToInt(await token.balanceOf(account));\r\n    setDepositAmountToken(parseInt(balance.toString().replace(/\\D/,'')) || 0)\r\n  }\r\n\r\n  const approveDeposit = async () => {\r\n    if (depositApproved || txInProgressApprDep) {\r\n      return\r\n    }\r\n\r\n    setTxInProgressApprDep(true);\r\n\r\n    var signer = library.getSigner(account);\r\n    let epnsToken = new ethers.Contract(tokenAddress, abis.epnsToken, signer);\r\n    let staking = new ethers.Contract(addresses.staking, abis.staking, signer);\r\n\r\n    const uintMax = bn(2).pow(bn(256)).sub(1)\r\n\r\n    const tx = epnsToken.approve(\r\n      staking.address,\r\n      uintMax\r\n    );\r\n\r\n    tx.then(async (tx) => {\r\n      let txToast = toast.dark(\r\n        <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n        {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        }\r\n      );\r\n\r\n      try {\r\n        await library.waitForTransaction(tx.hash);\r\n\r\n        toast.update(txToast, {\r\n          render: \"Transaction Completed!\",\r\n          type: toast.TYPE.SUCCESS,\r\n          autoClose: 5000,\r\n        });\r\n        setTxInProgressApprDep(false);\r\n        setDepositApprove(true);\r\n\r\n      } catch (e) {\r\n        toast.update(txToast, {\r\n          render: \"Transaction Failed! (\" + e.name + \")\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        setTxInProgressApprDep(false);\r\n      }\r\n    }).catch((err) => {\r\n      toast.dark(\"Transaction Cancelled!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n\r\n      setTxInProgressApprDep(false);\r\n    });\r\n  }\r\n\r\n  const depositAmountTokenFarmSingleTx = async () => {\r\n    if (txInProgressDep || !approveDeposit) {\r\n      return\r\n    }\r\n\r\n    setTxInProgressDep(true)\r\n\r\n    var signer = library.getSigner(account);\r\n    let epnsToken = new ethers.Contract(tokenAddress, abis.epnsToken, signer);\r\n    let staking = new ethers.Contract(addresses.staking, abis.staking, signer);\r\n    console.log(depositAmountToken);\r\n\r\n    const tx2 = staking.deposit(\r\n      tokenAddress,\r\n      ethers.BigNumber.from(depositAmountToken).mul(\r\n        ethers.BigNumber.from(10).pow(18)\r\n      )\r\n    );\r\n\r\n    tx2\r\n      .then(async (tx) => {\r\n        let txToast = toast.dark(\r\n          <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n          {\r\n            position: \"bottom-right\",\r\n            autoClose: false,\r\n            hideProgressBar: true,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n          }\r\n        );\r\n\r\n        try {\r\n          await library.waitForTransaction(tx.hash);\r\n\r\n          toast.update(txToast, {\r\n            render: \"Transaction Completed!\",\r\n            type: toast.TYPE.SUCCESS,\r\n            autoClose: 5000,\r\n          });\r\n\r\n          getPoolStats();\r\n          getPUSHPoolStats(pushPoolStats);\r\n          getUserData();\r\n\r\n          setTxInProgressDep(false);\r\n          setShowDepSlip(true);\r\n          // window.location.reload();\r\n        } catch (e) {\r\n          toast.update(txToast, {\r\n            render: \"Transaction Failed! (\" + e.name + \")\",\r\n            type: toast.TYPE.ERROR,\r\n            autoClose: 5000,\r\n          });\r\n\r\n          setTxInProgressDep(false);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        toast.dark(\"Transaction Cancelled!\", {\r\n          position: \"bottom-right\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n\r\n        setTxInProgressDep(false);\r\n      });\r\n  };\r\n\r\n  const withdrawAmountTokenFarmAutomatic = async () => {\r\n    if (txInProgressWithdraw) {\r\n      return;\r\n    }\r\n\r\n    setTxInProgressWithdraw(true);\r\n    const withdrawAmount = formatTokens(userData.epochStakeNext);\r\n\r\n    if (withdrawAmount == 0) {\r\n      toast.dark(\"Nothing to Withdraw!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n\r\n      setTxInProgressWithdraw(false);\r\n      return;\r\n    }\r\n\r\n    var signer = library.getSigner(account);\r\n    let staking = new ethers.Contract(addresses.staking, abis.staking, signer);\r\n\r\n    const tx = staking.withdraw(\r\n      tokenAddress,\r\n      ethers.BigNumber.from(withdrawAmount).mul(\r\n        ethers.BigNumber.from(10).pow(18)\r\n      )\r\n    );\r\n\r\n    tx.then(async (tx) => {\r\n      let txToast = toast.dark(\r\n        <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n        {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        }\r\n      );\r\n\r\n      try {\r\n        await library.waitForTransaction(tx.hash);\r\n\r\n        toast.update(txToast, {\r\n          render: \"Transaction Completed!\",\r\n          type: toast.TYPE.SUCCESS,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        setTxInProgressWithdraw(false);\r\n\r\n        getPoolStats();\r\n        getPUSHPoolStats(pushPoolStats);\r\n        getUserData();\r\n      } catch (e) {\r\n        toast.update(txToast, {\r\n          render: \"Transaction Failed! (\" + e.name + \")\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        setTxInProgressWithdraw(false);\r\n      }\r\n    }).catch((err) => {\r\n      toast.dark(\"Transaction Cancelled!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n\r\n      setTxInProgressWithdraw(false);\r\n    });\r\n  };\r\n\r\n  const harvestTokens = async () => {\r\n    var signer = library.getSigner(account);\r\n    let yieldFarmingPUSH = new ethers.Contract(\r\n      poolAddress,\r\n      abis.yieldFarming,\r\n      signer\r\n    );\r\n\r\n    if (harvestEpochValue) {\r\n      const tx = yieldFarmingPUSH.harvest(harvestEpochValue);\r\n      tx.then(async (tx) => {\r\n        let txToast = toast.dark(\r\n          <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n          {\r\n            position: \"bottom-right\",\r\n            autoClose: false,\r\n            hideProgressBar: true,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n          }\r\n        );\r\n\r\n        try {\r\n          await library.waitForTransaction(tx.hash);\r\n\r\n          toast.update(txToast, {\r\n            render: \"Transaction Completed!\",\r\n            type: toast.TYPE.SUCCESS,\r\n            autoClose: 5000,\r\n          });\r\n\r\n          setTxInProgress(false);\r\n        } catch (e) {\r\n          toast.update(txToast, {\r\n            render: \"Transaction Failed! (\" + e.name + \")\",\r\n            type: toast.TYPE.ERROR,\r\n            autoClose: 5000,\r\n          });\r\n\r\n          setTxInProgress(false);\r\n        }\r\n      }).catch((err) => {\r\n        toast.dark(\"Transaction Cancelled!\", {\r\n          position: \"bottom-right\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n\r\n        setTxInProgress(false);\r\n      });\r\n    }\r\n  };\r\n\r\n  const massHarvestTokensAll = async () => {\r\n    if (txInProgressMassHarvest) {\r\n      return;\r\n    }\r\n\r\n    if (!pushPoolStats.currentEpochPUSH || pushPoolStats.currentEpochPUSH == 1) {\r\n      toast.dark(\"Harvest unlocks from Epoch 2!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n\r\n      return;\r\n    }\r\n    setTxInProgressMassHarvest(true);\r\n\r\n    console.log(poolAddress);\r\n\r\n    var signer = library.getSigner(account);\r\n    let yieldFarmingPUSH = new ethers.Contract(\r\n      poolAddress,\r\n      abis.yieldFarming,\r\n      signer\r\n    );\r\n    const tx = yieldFarmingPUSH.massHarvest();\r\n\r\n\r\n    tx.then(async (tx) => {\r\n      let txToast = toast.dark(\r\n        <LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\" />,\r\n        {\r\n          position: \"bottom-right\",\r\n          autoClose: false,\r\n          hideProgressBar: true,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        }\r\n      );\r\n\r\n      try {\r\n        await library.waitForTransaction(tx.hash);\r\n\r\n        toast.update(txToast, {\r\n          render: \"Transaction Completed!\",\r\n          type: toast.TYPE.SUCCESS,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        setTxInProgressMassHarvest(false);\r\n      } catch (e) {\r\n        toast.update(txToast, {\r\n          render: \"Transaction Failed! (\" + e.name + \")\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000,\r\n        });\r\n\r\n        setTxInProgressMassHarvest(false);\r\n      }\r\n    }).catch((err) => {\r\n      toast.dark(\"Transaction Cancelled!\", {\r\n        position: \"bottom-right\",\r\n        type: toast.TYPE.ERROR,\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n\r\n      setTxInProgressMassHarvest(false);\r\n    });\r\n  };\r\n\r\n  const formatTokens = (tokens) => {\r\n    if (tokens) {\r\n      return tokens.div(ethers.BigNumber.from(10).pow(18)).toString();\r\n    }\r\n  };\r\n\r\n  function numberWithCommas(x) {\r\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <Item margin=\"20px\" align=\"stretch\" self=\"stretch\" border=\"1px solid #e1e1e1\" radius=\"12px\">\r\n      <Item>\r\n        <Item>\r\n          <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n            <Span bg={poolName == \"Uniswap LP Pool (UNI-V2)\" ? \"#35c5f3\" : \"#e20880\"} size=\"0.8em\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">{poolName}</Span>\r\n          </H2>\r\n          <Item\r\n            align=\"flex-end\"\r\n            self=\"stretch\"\r\n          >\r\n            <H3>\r\n              <Span>Current APR </Span><Span bg={poolName == \"Uniswap LP Pool (UNI-V2)\" ? \"#35c5f3\" : \"#e20880\"} padding=\"2px 8px\" weight=\"600\" color=\"#fff\"><b>{pushPoolStats.stakingAPR}%</b></Span>\r\n            </H3>\r\n          </Item>\r\n        </Item>\r\n\r\n        <ItemH margin=\"10px 0px 0px 0px\" self=\"stretch\" items=\"stretch\" bg=\"#f1f1f1\">\r\n          <PoolContainer bg=\"#fff\" margin=\"5px 15px\" radius=\"12px\" border=\"1px solid #ddd\" borderBottom=\"8px solid #e1e1e1\">\r\n            <PoolBoxTitle margin=\"15px 10px\" fg=\"#999\" textTransform=\"uppercase\" size=\"10px\" spacing=\"0.2em\">Current Reward</PoolBoxTitle>\r\n            <PoolBoxMsg\r\n              bg=\"transparent\"\r\n              fg={poolName == \"Uniswap LP Pool (UNI-V2)\" ? \"#35c5f3\" : \"#e20880\"}\r\n              size=\"16px\"\r\n              margin=\"-15px 5px 10px 5px\"\r\n            >\r\n              {numberWithCommas(formatTokens(pushPoolStats.rewardForCurrentEpoch))} PUSH\r\n            </PoolBoxMsg>\r\n          </PoolContainer>\r\n\r\n          <PoolContainer bg=\"#fff\" margin=\"5px 15px\" radius=\"12px\" border=\"1px solid #ddd\" borderBottom=\"8px solid #e1e1e1\">\r\n            <PoolBoxTitle margin=\"15px 10px\" fg=\"#999\" textTransform=\"uppercase\" size=\"10px\" spacing=\"0.2em\">Total Staked</PoolBoxTitle>\r\n            <PoolBoxMsg\r\n              bg=\"transparent\"\r\n              fg={poolName == \"Uniswap LP Pool (UNI-V2)\" ? \"#35c5f3\" : \"#e20880\"}\r\n              size=\"16px\"\r\n              margin=\"-15px 5px 10px 5px\"\r\n            >\r\n              {numberWithCommas(formatTokens(pushPoolStats.poolBalance))} {poolName == \"Uniswap LP Pool (UNI-V2)\" ? \"UNI-V2\" : \"PUSH\"}\r\n            </PoolBoxMsg>\r\n          </PoolContainer>\r\n        </ItemH>\r\n\r\n        <Item\r\n          self=\"stretch\"\r\n          align=\"flex-end\"\r\n          margin=\"0px 0px 10px 0px\"\r\n        >\r\n          <EpochDisplayer>\r\n            <Span padding=\"0px 5px 0px 0px\">Current Epoch</Span><B>{pushPoolStats.currentEpochPUSH.toString()}/{pushPoolStats.totalEpochPUSH}</B>\r\n          </EpochDisplayer>\r\n        </Item>\r\n      </Item>\r\n\r\n      <Item padding=\"10px 20px 0px 20px\" align=\"stretch\" self=\"stretch\">\r\n        <ItemH margin=\"0px\">\r\n          <Item bg=\"#000\" margin=\"5px 10px\" radius=\"12px\">\r\n            <PoolBoxTitle>User Deposit</PoolBoxTitle>\r\n            <PoolBoxMsg>{formatTokens(userData.epochStakeNext)} {poolName == \"Uniswap LP Pool (UNI-V2)\" ? \"UNI-V2\" : \"PUSH\"}</PoolBoxMsg>\r\n          </Item>\r\n\r\n          <Item bg=\"#000\" margin=\"5px 10px\" radius=\"12px\">\r\n              <PoolBoxTitle>Rewards Claimed <InfoTooltip title={\"The total rewards you have already claimed from the pool. This includes all the rewards including the ones already harvested.\"} /></PoolBoxTitle>\r\n              <PoolBoxMsg>{(userData.totalAccumulatedReward - userData.totalAvailableReward).toFixed(2)} PUSH</PoolBoxMsg>\r\n          </Item>\r\n        </ItemH>\r\n\r\n        <ItemH margin=\"0px\">\r\n          <Item bg=\"#000\" margin=\"5px 10px\" radius=\"12px\">\r\n            <PoolBoxTitle>Current Epoch Reward <InfoTooltip title={\"This is only an estimation for the user's reward that they might get after the epoch. This might change depending upon deposits from other users.\"} /></PoolBoxTitle>\r\n            <PoolBoxMsg>{userData.potentialUserReward} PUSH</PoolBoxMsg>\r\n          </Item>\r\n\r\n          <Item bg=\"#000\" margin=\"5px 10px\" radius=\"12px\">\r\n            <PoolBoxTitle>Available for Harvest <InfoTooltip title={\"The rewards that are currently available for harvesting and can be immediately transferred to your address.\"} /></PoolBoxTitle>\r\n            <PoolBoxMsg>{userData.totalAvailableReward} PUSH</PoolBoxMsg>\r\n          </Item>\r\n        </ItemH>\r\n      </Item>\r\n\r\n      {showDepositItem &&\r\n        <Item bg=\"#ddd\" radius=\"12px\" margin=\"20px 0px -10px 0px\" padding=\"10px 20px\" align=\"stretch\" self=\"stretch\">\r\n\r\n          {!showDepSlip &&\r\n            <>\r\n              <Item>\r\n                <MaxButton\r\n                  bg=\"#000\"\r\n                  onClick={fillMax}\r\n                  position=\"absolute\"\r\n                >\r\n                  Max\r\n                </MaxButton>\r\n\r\n                <Input\r\n                  placeholder=\"Number of Tokens\"\r\n                  radius=\"4px\"\r\n                  padding=\"12px\"\r\n                  self=\"stretch\"\r\n                  bg=\"#fff\"\r\n                  value={depositAmountToken}\r\n                  onChange={(e) => {\r\n                    setDepositAmountToken(parseInt(e.target.value.replace(/\\D/,'')) || 0)\r\n                  }}\r\n                />\r\n              </Item>\r\n\r\n              <ItemH>\r\n                <ButtonAlt\r\n                  bg={depositApproved ? \"#999\" : \"#e20880\"}\r\n                  onClick={approveDeposit}\r\n                  disabled={depositApproved ? true : false}\r\n                >\r\n                  {!depositApproved && !txInProgressApprDep &&\r\n                    <Span color=\"#fff\" weight=\"400\">Approve</Span>\r\n                  }\r\n                  {txInProgressApprDep && !depositApproved &&\r\n                    <Loader\r\n                      type=\"Oval\"\r\n                      color=\"#fff\"\r\n                      height={12}\r\n                      width={12}\r\n                    />\r\n                  }\r\n                  {!txInProgress && depositApproved &&\r\n                    <Span color=\"#fff\" weight=\"600\">Approved</Span>\r\n                  }\r\n                </ButtonAlt>\r\n                <ButtonAlt\r\n                  bg={!depositApproved ? \"#999\" : \"#e20880\"}\r\n                  disabled={!depositApproved ? true : false}\r\n                  onClick={depositAmountTokenFarmSingleTx}\r\n                >\r\n                  {!txInProgressDep &&\r\n                    <Span color=\"#fff\" weight=\"400\">Deposit</Span>\r\n                  }\r\n                  {txInProgressDep &&\r\n                    <Loader\r\n                      type=\"Oval\"\r\n                      color=\"#fff\"\r\n                      height={12}\r\n                      width={12}\r\n                    />\r\n                  }\r\n                </ButtonAlt>\r\n              </ItemH>\r\n            </>\r\n          }\r\n\r\n          {showDepSlip &&\r\n            <Span\r\n              bg=\"#e20880\"\r\n              color=\"#fff\"\r\n              align=\"center\"\r\n              textTransform=\"uppercase\"\r\n              spacing=\"0.1em\"\r\n              size=\"14px\"\r\n              weight=\"600\"\r\n              padding=\"10px\"\r\n              self=\"stretch\"\r\n            >\r\n              Deposit Successful!\r\n            </Span>\r\n          }\r\n\r\n        </Item>\r\n      }\r\n\r\n      <ItemH padding=\"0px 20px 0px 20px\" margin=\"20px 0px 20px 0px\" align=\"center\" self=\"stretch\">\r\n        {!showDepositItem &&\r\n          <ButtonAlt\r\n            bg=\"#e20880\"\r\n            onClick={() => setShowDepositItem(!showDepositItem)}\r\n          >\r\n            {!txInProgressDep &&\r\n              <Span color=\"#fff\" weight=\"400\">Deposit</Span>\r\n            }\r\n            {txInProgressApprDep &&\r\n              <Loader\r\n                type=\"Oval\"\r\n                color=\"#fff\"\r\n                height={12}\r\n                width={12}\r\n              />\r\n            }\r\n          </ButtonAlt>\r\n        }\r\n\r\n        <ButtonAlt\r\n          bg=\"#000\"\r\n          onClick={() => withdrawAmountTokenFarmAutomatic()}\r\n        >\r\n          {!txInProgressWithdraw &&\r\n            <Span color=\"#fff\" weight=\"400\">Withdraw</Span>\r\n          }\r\n          {txInProgressWithdraw &&\r\n            <Loader\r\n              type=\"Oval\"\r\n              color=\"#fff\"\r\n              height={12}\r\n              width={12}\r\n            />\r\n          }\r\n        </ButtonAlt>\r\n\r\n        <ButtonAlt\r\n          bg=\"#000\"\r\n          onClick={() => massHarvestTokensAll()}\r\n        >\r\n          {!txInProgressMassHarvest &&\r\n            <Span color=\"#fff\" weight=\"400\">Harvest</Span>\r\n          }\r\n          {txInProgressMassHarvest &&\r\n            <Loader\r\n              type=\"Oval\"\r\n              color=\"#fff\"\r\n              height={12}\r\n              width={12}\r\n            />\r\n          }\r\n        </ButtonAlt>\r\n      </ItemH>\r\n    </Item>\r\n    </>\r\n  );\r\n}\r\n\r\n// toast customize\r\nconst LoaderToast = ({ msg, color }) => (\r\n  <Toaster>\r\n    <Loader type=\"Oval\" color={color} height={30} width={30} />\r\n    <ToasterMsg>{msg}</ToasterMsg>\r\n  </Toaster>\r\n);\r\n\r\n\r\nconst MaxButton = styled(Button)`\r\n  position: absolute;\r\n  right: 0;\r\n  padding: 4px 8px;\r\n  margin: 5px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  text-transform: uppercase;\r\n  font-weight: 600;\r\n  letter-spacing: 0.1em;\r\n`\r\n\r\nconst PoolContainer = styled(Item)`\r\n  border-bottom: ${props => props.borderBottom || \"none\"};\r\n`\r\n\r\nconst PoolBoxTitle = styled(Span)`\r\n  background: ${props => props.bg || 'transparent'};\r\n  color: ${props => props.fg || '#fff'};\r\n  font-weight: 600;\r\n  font-size: ${props => props.size || '12px'};\r\n  margin: ${props => props.margin || '10px 5px'};\r\n  letter-spacing: 0.1em;\r\n`\r\n\r\nconst PoolBoxMsg = styled(Span)`\r\n  background: ${props => props.bg || '#fff'};\r\n  color: ${props => props.fg || '#000'};\r\n  font-weight: 600;\r\n  font-size: ${props => props.size || '12px'};\r\n  margin: ${props => props.margin || '5px 5px 10px 5px'};\r\n  letter-spacing: 0.1em;\r\n  padding: 4px 15px;\r\n  border-radius: 10px;\r\n`\r\n\r\nconst Container = styled.div`\r\n  padding: 18px;\r\n  background: #fff;\r\n  flex: 1;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 15px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  margin: 10px;\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n  }\r\n`;\r\n\r\nconst MainTitle = styled.h2`\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst Heading = styled.h5`\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst EpochDisplayer = styled(Span)`\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.1em;\r\n  font-size: 12px;\r\n  background: #f1f1f1;\r\n  padding: 0px 10px 0px 10px;\r\n  position: relative;\r\n  height: 23px;\r\n  align-items: center;\r\n  text-align: center;\r\n  display: flex;\r\n\r\n  &:after {\r\n    width: 0;\r\n    height: 0;\r\n    border-top: 0px solid transparent;\r\n    border-bottom: 25px solid transparent;\r\n    border-right: 10px solid #f1f1f1;\r\n    left: -10px;\r\n    content: '';\r\n    position: absolute;\r\n  }\r\n`\r\n\r\nconst ButtonAlt = styled(Button)`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${(props) =>\r\n    props.disabled &&\r\n    css`\r\n      &:hover {\r\n        opacity: 1;\r\n        cursor: default;\r\n        pointer: default;\r\n      }\r\n      &:active {\r\n        opacity: 1;\r\n        cursor: default;\r\n        pointer: default;\r\n      }\r\n    `}\r\n`;\r\n\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`;\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`;\r\n","import React, { useState } from \"react\";\r\n\r\nimport styled, { css, keyframes, useTheme } from \"styled-components\";\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\n\r\nimport { BsChevronExpand } from 'react-icons/bs';\r\n\r\nimport { AnimateOnChange } from \"react-animation\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport YieldFarmingDataStore from \"singletons/YieldFarmingDataStore\";\r\nimport PoolCard from \"components/PoolCard\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\n\r\nconst ethers = require(\"ethers\");\r\n\r\n// Create Header\r\nfunction YieldFarmingPage() {\r\n  const { active, error, account, library, chainId } = useWeb3React();\r\n\r\n  const themes = useTheme();\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n\r\n  const [poolStats, setPoolStats] = React.useState(null);\r\n  const [pushPoolStats, setPushPoolStats] = React.useState(null);\r\n  const [lpPoolStats, setLpPoolStats] = React.useState(null);\r\n  const [userDataPUSH, setUserDataPUSH] = React.useState(null);\r\n  const [userDataLP, setUserDataLP] = React.useState(null);\r\n\r\n  const [formattedDuration, setFormattedDuration] = React.useState(\"\");\r\n\r\n  const [epnsToken, setEpnsToken] = React.useState(null);\r\n  const [staking, setStaking] = React.useState(null);\r\n  const [yieldFarmingPUSH, setYieldFarmingPUSH] = React.useState(null);\r\n  const [yieldFarmingLP, setYieldFarmingLP] = React.useState(null);\r\n  const [uniswapV2Router02, setUniswapV2Router02] = React.useState(null);\r\n\r\n  const [showAnswers, setShowAnswers] = React.useState([]);\r\n\r\n  const [loadingUserData, setLoadingUserData] = React.useState(false);\r\n\r\n  const toggleShowAnswer = (id) => {\r\n    let newShowAnswers = [...showAnswers];\r\n    newShowAnswers[id] = !newShowAnswers[id];\r\n\r\n    setShowAnswers(newShowAnswers);\r\n  }\r\n\r\n  const getPoolStats = React.useCallback(async () => {\r\n    const poolStats = await YieldFarmingDataStore.instance.getPoolStats();\r\n\r\n    setPoolStats({ ...poolStats });\r\n  }, [epnsToken, staking, yieldFarmingPUSH, yieldFarmingLP, uniswapV2Router02]);\r\n\r\n  const getPUSHPoolStats = React.useCallback(async () => {\r\n    const pushPoolStats = await YieldFarmingDataStore.instance.getPUSHPoolStats();\r\n\r\n    setPushPoolStats({ ...pushPoolStats });\r\n  }, [epnsToken, staking, yieldFarmingPUSH, yieldFarmingLP, uniswapV2Router02]);\r\n\r\n  const getLPPoolStats = React.useCallback(async (poolStats) => {\r\n    const lpPoolStats = await YieldFarmingDataStore.instance.getLPPoolStats(poolStats);\r\n\r\n    setLpPoolStats({ ...lpPoolStats });\r\n  }, [epnsToken, staking, yieldFarmingPUSH, yieldFarmingLP, uniswapV2Router02]);\r\n\r\n  const getUserDataPUSH = React.useCallback(async () => {\r\n    const userDataPUSH = await YieldFarmingDataStore.instance.getUserData(yieldFarmingPUSH);\r\n\r\n    setUserDataPUSH({ ...userDataPUSH });\r\n  }, [yieldFarmingPUSH]);\r\n\r\n  const getUserDataLP = React.useCallback(async () => {\r\n    const userDataLP = await YieldFarmingDataStore.instance.getUserData(yieldFarmingLP);\r\n\r\n    setUserDataLP({ ...userDataLP });\r\n  }, [yieldFarmingLP]);\r\n\r\n  const formatTokens = (tokens) => {\r\n    if (tokens) {\r\n      return tokens.div(ethers.BigNumber.from(10).pow(18)).toString();\r\n    }\r\n  };\r\n\r\n  const getFormattedDuration = () => {\r\n    if (poolStats?.epochEndTimestamp) {\r\n      const epochEndTimestamp = poolStats.epochEndTimestamp.toNumber();\r\n\r\n      const duration = epochEndTimestamp - Math.floor(new Date() / 1000);\r\n\r\n      if(duration < 0) {\r\n        getPoolStats()\r\n      }\r\n\r\n      const day = parseInt(duration / 86400);\r\n      const hour = parseInt((duration - day * 86400) / 3600);\r\n\r\n      const minutes = parseInt((duration - (day * 86400 + hour * 3600)) / 60);\r\n      const seconds = duration - (day * 86400 + hour * 3600 + minutes * 60);\r\n\r\n      setFormattedDuration(`${day}D ${hour}H ${minutes}M ${seconds}S`);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setTimeout(() => {\r\n      getFormattedDuration();\r\n    }, 1000);\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    let epnsToken = new ethers.Contract(\r\n      addresses.epnsToken,\r\n      abis.epnsToken,\r\n      library\r\n    );\r\n\r\n    let staking = new ethers.Contract(addresses.staking, abis.staking, library);\r\n    let yieldFarmingPUSH = new ethers.Contract(\r\n      addresses.yieldFarmPUSH,\r\n      abis.yieldFarming,\r\n      library\r\n    );\r\n\r\n    let yieldFarmingLP = new ethers.Contract(\r\n      addresses.yieldFarmLP,\r\n      abis.yieldFarming,\r\n      library\r\n    );\r\n\r\n    let uniswapV2Router02Instance = new ethers.Contract(\r\n      addresses.uniswapV2Router02,\r\n      abis.uniswapV2Router02,\r\n      library\r\n    );\r\n\r\n    setEpnsToken(epnsToken);\r\n    setStaking(staking);\r\n    setYieldFarmingPUSH(yieldFarmingPUSH);\r\n    setYieldFarmingLP(yieldFarmingLP);\r\n    setUniswapV2Router02(uniswapV2Router02Instance)\r\n\r\n    if (!!(library && account)) {\r\n      var signer = library.getSigner(account);\r\n\r\n      let epnsToken = new ethers.Contract(\r\n        addresses.epnsToken,\r\n        abis.epnsToken,\r\n        signer\r\n      );\r\n      let staking = new ethers.Contract(\r\n        addresses.staking,\r\n        abis.staking,\r\n        signer\r\n      );\r\n      let yieldFarmingPUSH = new ethers.Contract(\r\n        addresses.yieldFarmPUSH,\r\n        abis.yieldFarming,\r\n        signer\r\n      );\r\n      let yieldFarmingLP = new ethers.Contract(\r\n        addresses.yieldFarmLP,\r\n        abis.yieldFarming,\r\n        signer\r\n      );\r\n\r\n      let uniswapV2Router02Instance = new ethers.Contract(\r\n        addresses.uniswapV2Router02,\r\n        abis.uniswapV2Router02,\r\n        signer\r\n      );\r\n\r\n      setEpnsToken(epnsToken);\r\n      setStaking(staking);\r\n      setYieldFarmingPUSH(yieldFarmingPUSH);\r\n      setYieldFarmingLP(yieldFarmingLP);\r\n      setUniswapV2Router02(uniswapV2Router02Instance);\r\n  }\r\n  }, [account]);\r\n\r\n  React.useEffect(() => {\r\n    if (epnsToken != null && staking != null && yieldFarmingPUSH != null) {\r\n      // Instantiate Data Stores\r\n      YieldFarmingDataStore.instance.init(\r\n        account,\r\n        epnsToken,\r\n        staking,\r\n        yieldFarmingPUSH,\r\n        yieldFarmingLP,\r\n        uniswapV2Router02\r\n      );\r\n\r\n      getPoolStats();\r\n\r\n      // setpoolStats(YieldFarmingDataStore.instance.state);\r\n    }\r\n  }, [getPoolStats]);\r\n\r\n  React.useEffect(() => {\r\n    if (poolStats) {\r\n      syncData(poolStats);\r\n    }\r\n\r\n  }, [poolStats]);\r\n\r\n  const syncData = async (poolStats) => {\r\n    getPUSHPoolStats();\r\n    getLPPoolStats(poolStats);\r\n\r\n    getUserDataPUSH();\r\n    getUserDataLP();\r\n  }\r\n\r\n  function numberWithCommas(x) {\r\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n    <Section>\r\n      {poolStats ? (\r\n        <>\r\n          <Content themes={themes.yieldBg}>\r\n            <ItemH margin=\"0px 15px 0px 15px\" align=\"stretch\">\r\n              <StatsCard\r\n                bg={themes.mainBg} \r\n              >\r\n                <StatsHeading bg=\"#e20880\">Total Value Locked</StatsHeading>\r\n                <StatsContent>\r\n                  <StatsInnerTitle>{`$ ${numberWithCommas(poolStats.totalValueLocked.toFixed(2))}`}</StatsInnerTitle>\r\n                </StatsContent>\r\n                <StatsPreview color=\"#e20880\">TVL</StatsPreview>\r\n              </StatsCard>\r\n\r\n              <StatsCard\r\n                bg={themes.mainBg}\r\n              >\r\n                <StatsHeading bg=\"#35c5f3\">PUSH Rewards Given</StatsHeading>\r\n                <StatsContent>\r\n                  <StatsInnerTitle>{numberWithCommas(formatTokens(poolStats.pushRewardsDistributed))}</StatsInnerTitle>\r\n                  <StatsInnerSub>out of {numberWithCommas(formatTokens(poolStats.totalDistributedAmount))}</StatsInnerSub>\r\n                </StatsContent>\r\n                <StatsPreview color=\"#35c5f3\">Rewarded</StatsPreview>\r\n              </StatsCard>\r\n\r\n              <StatsCard\r\n                bg={themes.mainBg}\r\n              >\r\n                <StatsHeading bg=\"#674c9f\">Time Left</StatsHeading>\r\n                <StatsContent>\r\n                  <StatsInnerTitle>{formattedDuration}</StatsInnerTitle>\r\n                  <StatsInnerSub>until next epoch</StatsInnerSub>\r\n                </StatsContent>\r\n                <StatsPreview color=\"#674c9f\">time left</StatsPreview>\r\n              </StatsCard>\r\n\r\n              <StatsCard\r\n                bg={themes.mainBg}\r\n              >\r\n                <StatsHeading bg={themes.pushPriceBg}>PUSH Price</StatsHeading>\r\n                <StatsContent>\r\n                  <StatsInnerTitle>{`$ ${poolStats.pushPrice.toFixed(2)}`}</StatsInnerTitle>\r\n                  <StatsInnerSub>\r\n                    <a target=\"_blank\" href={`https://app.uniswap.org/#/swap?inputCurrency=${addresses.epnsToken}`}>Uniswap</a>\r\n                  </StatsInnerSub>\r\n                </StatsContent>\r\n                <StatsPreview color=\"#000\">UNISWAP</StatsPreview>\r\n              </StatsCard>\r\n            </ItemH>\r\n          </Content>\r\n\r\n          {!(lpPoolStats && userDataLP) && !(pushPoolStats && userDataPUSH)\r\n            ? <Item padding=\"20px\">\r\n                <Loader type=\"Oval\" color=\"#35c5f3\" height={40} width={40} />\r\n              </Item>\r\n            : <Content padding=\"25px 0px\">\r\n              <ItemH margin=\"0px 10px 0px 10px\" align=\"stretch\">\r\n                {\r\n                  lpPoolStats && userDataLP ? (\r\n                    <PoolCard\r\n                      poolName={'Uniswap LP Pool (UNI-V2)'}\r\n                      poolAddress={addresses.yieldFarmLP}\r\n                      tokenAddress={addresses.epnsLPToken}\r\n                      getPoolStats={getPoolStats}\r\n                      getPUSHPoolStats={getLPPoolStats}\r\n                      getUserData={getUserDataLP}\r\n                      pushPoolStats={lpPoolStats}\r\n                      userData={userDataLP}\r\n                    />\r\n                  ) : null\r\n                }\r\n                {\r\n                  pushPoolStats && userDataPUSH ? (\r\n                    <PoolCard\r\n                      poolName={'Staking Pool (PUSH)'}\r\n                      poolAddress={addresses.yieldFarmPUSH}\r\n                      tokenAddress={addresses.epnsToken}\r\n                      getPoolStats={getPoolStats}\r\n                      getPUSHPoolStats={getPUSHPoolStats}\r\n                      getUserData={getUserDataPUSH}\r\n                      pushPoolStats={pushPoolStats}\r\n                      userData={userDataPUSH}\r\n                    />\r\n                  ) : null\r\n                }\r\n              </ItemH>\r\n            </Content>\r\n          }\r\n        </>\r\n      ) : (\r\n        <Item padding=\"20px\">\r\n          <Loader type=\"Oval\" color=\"#e20880\" height={40} width={40} />\r\n        </Item>\r\n      )}\r\n    </Section>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: block;\r\n  flex-direction: column;\r\n  min-height: calc(100vh - 100px);\r\n`\r\n\r\nconst StatsCard = styled(Item)`\r\n  overflow: hidden;\r\n  min-width: 180px;\r\n\r\n  border-radius: 12px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  margin: 0px 15px;\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n  }\r\n`;\r\n\r\nconst CenterHeading = styled.h2`\r\n  text-align: center;\r\n`;\r\n\r\nconst PoolContainer = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst StatsHeading = styled(Item)`\r\n  flex: 0;\r\n  align-self: stretch;\r\n  color: #fff;\r\n  top: 0px;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.1em;\r\n  font-size: 15px;\r\n  text-align: center;\r\n  padding: 10px 5px;\r\n  right: 0;\r\n  left: 0;\r\n`\r\n\r\nconst StatsContent = styled(Item)`\r\n  padding: 20px 20px;\r\n`\r\n\r\nconst StatsPreview = styled(Span)`\r\n  position: absolute;\r\n  bottom: 5px;\r\n  right: 10px;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  opacity: 0.25;\r\n  letter-spacing:0.1em;\r\n  text-transform: uppercase;\r\n  color: ${props => props.color || '#000'};\r\n  z-index: -1;\r\n`\r\n\r\nconst StatsInnerTitle = styled.span`\r\n  font-weight: bold;\r\n  font-size: 22px;\r\n  letter-spacing: 0.1em;\r\n`;\r\n\r\nconst StatsInnerSub = styled.span`\r\n  font-size: 12px;\r\n  color: #999;\r\n  font-weight: 600;\r\n  align-self: flex-end;\r\n`;\r\n\r\n// Export Default\r\nexport default YieldFarmingPage;\r\n","import React from \"react\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { ethers } from \"ethers\";\r\nimport { parseEther, bigNumber } from 'ethers/utils'\r\n\r\n// FeedDB Helper Function\r\nconst NFTHelper = {\r\n  getNFTBalance: async (user, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      if(contract){\r\n        contract.balanceOf(user)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getNFTBalance() --> %o\", response);\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getNFTBalance() --> %o\", err);\r\n          reject(err);\r\n        });\r\n\r\n      }\r\n      \r\n    })\r\n  },\r\n\r\n  getTotalSupply: async (contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.totalSupply()\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getNFTBalance() --> %o\", response);\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getNFTBalance() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n\r\n  getOwnerOfTokenId: async (tokenId, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.ownerOf(tokenId)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getOwnerOfTokenId() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getOwnerOfTokenId() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n\r\n  getTokenOfOwnerByIndex: async (user, index, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.tokenOfOwnerByIndex(user, index)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getTokenOfOwnerByIndex() --> %o\", response);\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getTokenOfOwnerByIndex() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n\r\n  getTokenByIndex: async (index, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.tokenByIndex(index)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getTokenByIndex() --> %o\", response);\r\n          resolve(response.toNumber());\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getTokenByIndex() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n\r\n  getTokenMetadata: async (tokenId, contract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.tokenURI(tokenId)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getTokenMetadata() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getTokenMetadata() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n\r\n  getTokenMetadatasOfOwner: async (owner, nftContract, rewardsContract) => {\r\n    const enableLogs = 1;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      NFTHelper.getNFTBalance(owner, nftContract)\r\n      .then(async (balance) => {\r\n        // const balance = await res\r\n        let NFTDetails = []\r\n        let promises = []\r\n      \r\n      for(let i=0; i<balance; i++){\r\n        promises.push(NFTHelper.getTokenOfOwnerByIndex(owner, i, nftContract)\r\n        .then(async tokenId => {\r\n            await NFTHelper.getClaimable(tokenId, rewardsContract)\r\n            .then(async claimable => {\r\n              console.log(\" ~ file: NFTHelper.js ~ line 102 ~ .then ~ claimable\", claimable)\r\n\r\n              await NFTHelper.getTokenMetadata(tokenId, nftContract)\r\n              .then(async metadata => {\r\n                if(tokenId != null && metadata != null && claimable != null )\r\n                NFTDetails.push({id: tokenId, metadata, claimable})\r\n\r\n              })\r\n            })\r\n            .catch(err => {\r\n              console.log(\"!!!Error, getClaimable() --> %o\", err);\r\n              reject(err);\r\n            });\r\n        }))\r\n      }\r\n      // // wait until all promises are resolved\r\n      await Promise.all(promises);\r\n      console.log(\" ~ file: NFTHelper.js ~ line 83 ~ .then ~ NFTDetails\", NFTDetails)\r\n      resolve(NFTDetails);\r\n\r\n      })\r\n      .catch(err => {\r\n        console.log(\"!!!Error, getTokenMetadatasOfOwner() --> %o\", err);\r\n        reject(err);\r\n      });\r\n        \r\n    })\r\n  },\r\n\r\n  getAllTokenDatas: async (nftContract, rewardsContract) => {\r\n    const enableLogs = 1;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      NFTHelper.getNFTBalance(nftContract)\r\n      .then(async (totalSupply) => {\r\n        let NFTDetails = []\r\n        let promises = []\r\n      \r\n      for(let i=0; i<totalSupply; i++){\r\n        promises.push(NFTHelper.getTokenByIndex(i, nftContract)\r\n        .then(async tokenId => {\r\n            await NFTHelper.getClaimable(tokenId, rewardsContract)\r\n            .then(async claimable => {\r\n              await NFTHelper.getTokenMetadata(tokenId, nftContract)\r\n              .then(async metadata => {\r\n                await NFTHelper.getOwnerOfTokenId(tokenId, nftContract)\r\n                .then(async owner => {\r\n                  if(tokenId != null && metadata != null && claimable != null && owner != null )\r\n                  NFTDetails.push({id: tokenId, metadata, owner, claimable})\r\n                })\r\n                .catch(err => {\r\n                  console.log(\"!!!Error, getAllTokenDatas::getOwnerOfTokenId() --> %o\", err);\r\n                  reject(err);\r\n                })\r\n              })\r\n              .catch(err => {\r\n                console.log(\"!!!Error, getAllTokenDatas::getTokenMetadata() --> %o\", err);\r\n                reject(err);\r\n              })\r\n            })\r\n            .catch(err => {\r\n              console.log(\"!!!Error, getAllTokenDatas::getClaimable() --> %o\", err);\r\n              reject(err);\r\n            });\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getAllTokenDatas::getTokenByIndex() --> %o\", err);\r\n          reject(err);\r\n        })\r\n        )\r\n      }\r\n      // // wait until all promises are resolved\r\n      await Promise.all(promises);\r\n      console.log(\" ~ file: NFTHelper.js ~ line 83 ~ .then ~ NFTDetails\", NFTDetails)\r\n      resolve(NFTDetails);\r\n\r\n      })\r\n      .catch(err => {\r\n        console.log(\"!!!Error, getAllTokenDatas() --> %o\", err);\r\n        reject(err);\r\n      });\r\n        \r\n    })\r\n  },\r\n\r\n  getTokenData: async (tokenId, nftContract, rewardsContract) => {\r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n             NFTHelper.getClaimable(tokenId, rewardsContract)\r\n            .then(async claimable => {\r\n              await NFTHelper.getTokenMetadata(tokenId, nftContract)\r\n              .then(async metadata => {\r\n                await NFTHelper.getOwnerOfTokenId(tokenId, nftContract)\r\n                .then(async owner => {\r\n                  if(tokenId != null && metadata != null && claimable != null && owner != null )\r\n                  resolve({id: tokenId, metadata, owner, claimable});\r\n                })\r\n              })\r\n            })\r\n            .catch(err => {\r\n              console.log(\"!!!Error, getTokenData() --> %o\", err);\r\n              reject(err);\r\n            });\r\n    })\r\n  },\r\n\r\n  transferNFT: async (from, to, tokenId, contract) => {\r\n    const enableLogs = 1;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      contract.safeTransferFrom(from, to, tokenId)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"transferNFT() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, transferNFT() --> %o\", err);\r\n          reject(err);\r\n        });\r\n    })\r\n  },\r\n\r\n  getClaimable: async (tokenId, contract) => {\r\n    \r\n    const enableLogs = 0;\r\n\r\n    return new Promise ((resolve, reject) => {\r\n      if(contract){\r\n        contract.getClaimRewardStatus(tokenId)\r\n        .then(response => {\r\n          if (enableLogs) console.log(\"getClaimable() --> %o\", response);\r\n          resolve(response);\r\n        })\r\n        .catch(err => {\r\n          console.log(\"!!!Error, getClaimable() --> %o\", err);\r\n          reject(err);\r\n        });\r\n\r\n      }\r\n      \r\n    })\r\n  },\r\n\r\n}\r\n\r\nexport default NFTHelper;\r\n","import React from \"react\";\r\n\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\n\r\nimport { Device } from 'assets/Device';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport Skeleton from '@yisheng90/react-loading';\r\nimport { IoIosGift } from 'react-icons/io';\r\nimport { GiTwoCoins } from 'react-icons/gi';\r\n\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { ethers } from \"ethers\";\r\nimport { keccak256, arrayify, hashMessage, recoverPublicKey } from 'ethers/utils';\r\n\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport NFTHelper from 'helpers/NFTHelper';\r\n\r\n// Create Header\r\nfunction ViewNFTItem({ NFTObject, nftReadProvider, nftWriteProvider, controlAt, setControlAt, setTokenId}) {\r\n  const { account, library } = useWeb3React();\r\n\r\n  const [NFTRewardsContract, setNFTRewardsContract] = React.useState(null);\r\n  const [ loading, setLoading ] = React.useState(true);\r\n  const [ txInProgress, setTxInProgress ] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (!!(library && account)) {\r\n      let signer = library.getSigner(account);\r\n      const NFTRewardsInstance = new ethers.Contract(addresses.NFTRewards, abis.NFTRewards, signer);\r\n      setNFTRewardsContract(NFTRewardsInstance);\r\n    }\r\n  }, [account,library]);\r\n\r\n  React.useEffect(() => {\r\n    if(NFTObject){\r\n      setLoading(false);\r\n    }\r\n  }, [account, NFTObject]);\r\n\r\n  // to claim\r\n  const handleClaim = async (tokenId) => {\r\n    if(NFTRewardsContract){\r\n      setTxInProgress(true)\r\n      let sendWithTxPromise\r\n      sendWithTxPromise = await NFTRewardsContract.claimReward(tokenId)\r\n      const tx = await sendWithTxPromise;\r\n\r\n      console.log(tx);\r\n      console.log(\"waiting for tx to finish\");\r\n      let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\r\n        position: \"bottom-right\",\r\n        autoClose: false,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      try {\r\n        await library.waitForTransaction(tx.hash);\r\n\r\n        toast.update(txToast, {\r\n          render: \"Transaction Completed!\",\r\n          type: toast.TYPE.SUCCESS,\r\n          autoClose: 5000\r\n        });\r\n\r\n        setTxInProgress(false);\r\n      }\r\n      catch(e) {\r\n        toast.update(txToast, {\r\n          render: \"Transaction Failed! (\" + e.name + \")\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000\r\n        });\r\n\r\n        setTxInProgress(false);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // toast customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n    <Toaster>\r\n      <Loader\r\n       type=\"Oval\"\r\n       color={color}\r\n       height={30}\r\n       width={30}\r\n      />\r\n      <ToasterMsg>{msg}</ToasterMsg>\r\n    </Toaster>\r\n  )\r\n\r\n  // render\r\n  return (\r\n    <Item\r\n      key={NFTObject.id}\r\n    >\r\n      <ChannelLogo\r\n        theme={\r\n          !!account && !!library && account == NFTObject.owner ?\r\n            \"#e20880\" :\r\n            !!account && !!library && NFTObject.owner != 0xFbA7Df351ADD4E79099f63E33b2679EDFDD5e2aB ?\r\n              \"#eee\" :\r\n              \"#fff\"\r\n        }\r\n      >\r\n        <ChannelLogoOuter>\r\n          <ChannelLogoInner>\r\n            {loading &&\r\n              <Skeleton color=\"#eee\" width=\"100%\" height=\"100%\" />\r\n            }\r\n            {!loading &&\r\n              <ReactPlayer url={`https://ipfs.io/ipfs/${NFTObject.metadata}`} controls={true} playing={false} loop={true}/>\r\n            }\r\n            {!!account && !!library && NFTObject.owner != 0xFbA7Df351ADD4E79099f63E33b2679EDFDD5e2aB &&\r\n              <NFTStatus>\r\n                <IoIosGift size={20} color=\"#fff\"/>\r\n                <NFTStatusTitle>\r\n                  Gifted\r\n                </NFTStatusTitle>\r\n              </NFTStatus>\r\n            }\r\n\r\n            {!!account && !!library && NFTObject.claimable &&\r\n              <NFTClaim>\r\n                <NFTClaimTitle>\r\n                  2400 $PUSH\r\n                </NFTClaimTitle>\r\n              </NFTClaim>\r\n            }\r\n          </ChannelLogoInner>\r\n        </ChannelLogoOuter>\r\n\r\n      {!!account && !!library &&\r\n        <ItemH>\r\n\r\n          <ChannelActions>\r\n            {loading &&\r\n              <SkeletonButton>\r\n                <Skeleton />\r\n              </SkeletonButton>\r\n            }\r\n            {!!account && !!library && account == NFTObject.owner && !loading &&\r\n              <UnsubscribeButton >\r\n                <ActionTitle onClick={() => {\r\n                  setTokenId(NFTObject.id)\r\n                  setControlAt(2)\r\n                }}\r\n                  >Transfer</ActionTitle>\r\n              </UnsubscribeButton>\r\n            }\r\n            {!!account && !!library && account == NFTObject.owner && !loading &&\r\n                <UnsubscribeButton disabled = {!NFTObject.claimable}>\r\n                  {txInProgress &&\r\n                    <ActionLoader>\r\n                      <Loader\r\n                       type=\"Oval\"\r\n                       color=\"#FFF\"\r\n                       height={16}\r\n                       width={16}\r\n                      />\r\n                    </ActionLoader>\r\n                  }\r\n                  {NFTObject.claimable &&\r\n                    <ActionTitle hideit={txInProgress} onClick={() => {handleClaim(NFTObject.id)}}>Claim $PUSH</ActionTitle>\r\n                  }\r\n                  {!NFTObject.claimable &&\r\n                    <ActionTitle hideit={txInProgress} >Rewards Claimed</ActionTitle>\r\n                  }\r\n                </UnsubscribeButton>\r\n            }\r\n          </ChannelActions>\r\n        </ItemH>\r\n      }\r\n      </ChannelLogo>\r\n    </Item>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst NFTTextStyle = styled.label`\r\n  margin: 0px 5px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  padding: 2px 8px;\r\n  border-radius: 10px;\r\n  font-size: 11px;\r\n`\r\n\r\nconst NFTStatus = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n\r\n  position: absolute;\r\n  bottom: 10px;\r\n  right: 10px;\r\n`\r\n\r\nconst NFTStatusTitle = styled(NFTTextStyle)`\r\n  background: #35c4f3;\r\n`\r\n\r\nconst NFTClaim = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n\r\n  position: absolute;\r\n  bottom: 10px;\r\n  left: 10px;\r\n`\r\n\r\nconst NFTClaimTitle = styled(NFTTextStyle)`\r\n  background: #e20880;\r\n`\r\n\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  // display: inline;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n  background: #fff;\r\n  border-radius: 10px;\r\n  border: 1px solid rgb(237, 237, 237);\r\n\r\n  margin: 15px 0px;\r\n  justify-content: center;\r\n  padding: 10px;\r\n`\r\n\r\nconst SkeletonWrapper = styled.div`\r\n  overflow: hidden;\r\n  width: ${props => props.atW + '%' || '100%'};\r\n  height: ${props => props.atH}px;\r\n  border-radius: ${props => props.borderRadius || 10}px;\r\n  margin-bottom: ${props => props.marginBottom || 5}px;\r\n  margin-right: ${props => props.marginRight || 0}px;\r\n`\r\n\r\nconst ChannelLogo = styled.div`\r\n  background: ${props => props.theme || '#fff'};\r\n  max-width: 25%;\r\n  min-width: 200px;\r\n  flex: 1;\r\n  margin: 5px;\r\n  padding: 10px;\r\n  border: 2px solid #fafafa;\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-self: center;\r\n`\r\n\r\nconst ChannelLogoOuter = styled.div`\r\n  padding-top: 100%;\r\n  position: relative;\r\n`\r\n\r\nconst ChannelLogoInner = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst ChannelLogoImg = styled.img`\r\n  object-fit: contain;\r\n  width: 100%;\r\n  border-radius: 20px;\r\n  overflow: hidden;\r\n`\r\n\r\nconst ChannelInfo = styled.div`\r\n  flex: 1;\r\n  margin: 5px 10px;\r\n  min-width: 120px;\r\n  flex-grow: 4;\r\n  flex-direction: column;\r\n  display: flex;\r\n`\r\n\r\nconst ChannelTitle = styled.div`\r\n  margin-bottom: 5px;\r\n`\r\n\r\nconst ChannelTitleLink = styled.div`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n  &:hover {\r\n    text-decoration: underline;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\n\r\nconst ChannelDesc = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  font-size: 14px;\r\n  color: rgba(0, 0, 0, 0.75);\r\n  font-weight: 400;\r\n  flex-direction: column;\r\n`\r\n\r\nconst ChannelDescLabel = styled.label`\r\n  flex: 1;\r\n`\r\n\r\nconst ChannelMeta = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 13px;\r\n`\r\n\r\nconst ChannelMetaBox = styled.label`\r\n  margin: 0px 5px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  padding: 2px 8px;\r\n  border-radius: 10px;\r\n  font-size: 11px;\r\n`\r\n\r\nconst Subscribers = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`\r\n\r\nconst SubscribersCount = styled(ChannelMetaBox)`\r\n  background: #35c4f3;\r\n`\r\n\r\nconst Pool = styled.div`\r\n  margin: 0px 10px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`\r\n\r\nconst PoolShare = styled(ChannelMetaBox)`\r\n  background: #674c9f;\r\n`\r\n\r\nconst LineBreak = styled.div`\r\n  display: none;\r\n  flex-basis: 100%;\r\n  height: 0;\r\n\r\n  @media ${Device.tablet} {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ChannelActions = styled.div`\r\n  margin: 5px;\r\n  flex-grow: 1;\r\n  max-width: 120px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst ChannelActionButton = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${ props => props.disabled && css`\r\n    background: #e20880;\r\n    &:hover {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n    &:active {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n  `}\r\n`\r\n\r\nconst ActionTitle = styled.span`\r\n  font-size: 12px;\r\n  ${ props => props.hideit && css`\r\n    visibility: hidden;\r\n  `};\r\n`\r\n\r\nconst ActionLoader = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst SkeletonButton = styled.div`\r\n  border: 0;\r\n  outline: 0;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 10px;\r\n  border-radius: 5px;\r\n  flex: 1;\r\n`\r\n\r\nconst SubscribeButton = styled(ChannelActionButton)`\r\n  background: #e20880;\r\n`\r\n\r\nconst UnsubscribeButton = styled(ChannelActionButton)`\r\n  background: #000;\r\n`\r\n\r\nconst OwnerButton = styled(ChannelActionButton)`\r\n  background: #35c5f3;\r\n`\r\n\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`\r\n\r\n// Export Default\r\nexport default ViewNFTItem;\r\n","import React from \"react\";\r\nimport styled, { css } from 'styled-components';\r\nimport Loader from 'react-loader-spinner'\r\nimport { Waypoint } from \"react-waypoint\";\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport NFTHelper from 'helpers/NFTHelper';\r\nimport { ethers } from \"ethers\";\r\n\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport ViewNFTItem from \"components/ViewNFTItem\";\r\n\r\n\r\n// Create Header\r\nfunction MyNFTs({controlAt, setControlAt, setTokenId}) {\r\n  const { account, library } = useWeb3React();\r\n\r\n  const [nftReadProvider, setNftReadProvider] = React.useState(null);\r\n  const [nftWriteProvider, setNftWriteProvider] = React.useState(null);\r\n  const [NFTRewardsContract, setNFTRewardsContract] = React.useState(null);\r\n  const [NFTObjects, setNFTObjects] = React.useState([]);\r\n\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n\r\n    if (!!(library && account)) {\r\n      const contractInstance = new ethers.Contract(addresses.rockstar, abis.rockstar, library);\r\n      setNftReadProvider(contractInstance);\r\n      let signer = library.getSigner(account);\r\n      const signerInstance = new ethers.Contract(addresses.rockstar, abis.rockstar, signer);\r\n      setNftWriteProvider(signerInstance);\r\n      const NFTRewardsInstance = new ethers.Contract(addresses.NFTRewards, abis.NFTRewards, signer);\r\n      setNFTRewardsContract(NFTRewardsInstance);\r\n    }\r\n  }, [account,library]);\r\n\r\n  React.useEffect(() => {\r\n    if(nftReadProvider && NFTRewardsContract){\r\n      fetchNFTDetails();\r\n    }\r\n  }, [account, nftReadProvider, nftWriteProvider, NFTRewardsContract]);\r\n\r\n  // to fetch NFT Details\r\n  const fetchNFTDetails = async () => {\r\n    let balance = await NFTHelper.getNFTBalance(account, nftReadProvider);\r\n    setLoading(false);\r\n    for(let i=0; i<balance; i++){\r\n      let tokenId = await NFTHelper.getTokenOfOwnerByIndex(account, i, nftReadProvider)\r\n      let NFTObject = await NFTHelper.getTokenData(tokenId, nftReadProvider, NFTRewardsContract)\r\n      await setNFTObjects(prev => [...prev, NFTObject])\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading &&\r\n        <ContainerInfo>\r\n          <Loader\r\n           type=\"Oval\"\r\n           color=\"#35c5f3\"\r\n           height={40}\r\n           width={40}\r\n          />\r\n        </ContainerInfo>\r\n      }\r\n\r\n      {!loading && NFTObjects.length == 0 &&\r\n        <ContainerInfo>\r\n          <DisplayNotice\r\n            title=\"No ROCKSTAR tokens are available in your account\"\r\n            theme=\"primary\"\r\n          />\r\n        </ContainerInfo>\r\n      }\r\n\r\n\r\n      {!loading && NFTObjects.length != 0 &&\r\n        <Items id=\"scrollstyle-secondary\">\r\n\r\n          {Object.keys(NFTObjects).map(index => {\r\n            if (NFTObjects[index].id) {\r\n              return (\r\n                <ViewNFTItem\r\n                  key={NFTObjects[index].id}\r\n                  NFTObject={NFTObjects[index]}\r\n                  nftReadProvider={nftReadProvider}\r\n                  nftWriteProvider={nftWriteProvider}\r\n                  controlAt={controlAt}\r\n                  setControlAt={setControlAt}\r\n                  setTokenId={setTokenId}\r\n                />\r\n              );\r\n            }\r\n\r\n          })}\r\n        </Items>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 80vh;\r\n`\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  background: #fafafa;\r\n`\r\n\r\n// Export Default\r\nexport default MyNFTs;\r\n","import React from \"react\";\r\n\r\nimport styled, { css } from 'styled-components';\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\n\r\nimport StackGrid, { transitions } from \"react-stack-grid\";\r\n\r\nimport Loader from 'react-loader-spinner'\r\nimport { Waypoint } from \"react-waypoint\";\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport NFTHelper from 'helpers/NFTHelper';\r\nimport { ethers } from \"ethers\";\r\n\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport ViewNFTItem from \"components/ViewNFTItem\";\r\n\r\n\r\nconst { scaleDown } = transitions;\r\n\r\n// Create Header\r\nfunction AllNFTs({controlAt, setControlAt, setTokenId}) {\r\n  const { account, library } = useWeb3React();\r\n\r\n  const [nftReadProvider, setNftReadProvider] = React.useState(null);\r\n  const [nftWriteProvider, setNftWriteProvider] = React.useState(null);\r\n  const [NFTRewardsContract, setNFTRewardsContract] = React.useState(null);\r\n  const [NFTObjects, setNFTObjects] = React.useState([]);\r\n\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    if (!!(library && account)) {\r\n      const contractInstance = new ethers.Contract(addresses.rockstar, abis.rockstar, library);\r\n      setNftReadProvider(contractInstance);\r\n      let signer = library.getSigner(account);\r\n      const signerInstance = new ethers.Contract(addresses.rockstar, abis.rockstar, signer);\r\n      setNftWriteProvider(signerInstance);\r\n      const NFTRewardsInstance = new ethers.Contract(addresses.NFTRewards, abis.NFTRewards, signer);\r\n      setNFTRewardsContract(NFTRewardsInstance);\r\n    }\r\n  }, [account, library]);\r\n\r\n  React.useEffect(() => {\r\n    if(nftReadProvider && NFTRewardsContract){\r\n      fetchNFTDetails();\r\n    }\r\n  }, [account, nftReadProvider, nftWriteProvider, NFTRewardsContract]);\r\n\r\n  // to fetch all minted NFT Details\r\n  const fetchNFTDetails = async () => {\r\n    let totalSupply = await NFTHelper.getTotalSupply(nftReadProvider);\r\n    setLoading(false);\r\n    for(let i=0; i<totalSupply; i++){\r\n      let tokenId = await NFTHelper.getTokenByIndex(i, nftReadProvider)\r\n      let NFTObject = await NFTHelper.getTokenData(tokenId, nftReadProvider, NFTRewardsContract)\r\n      await setNFTObjects(prev => [...prev, NFTObject])\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Section align=\"center\">\r\n      {loading &&\r\n        <ContainerInfo>\r\n          <Loader\r\n           type=\"Oval\"\r\n           color=\"#674c9f\"\r\n           height={40}\r\n           width={40}\r\n          />\r\n        </ContainerInfo>\r\n      }\r\n\r\n      {/* {!loading && NFTObjects.length == 0 &&\r\n        <ContainerInfo>\r\n          <Loader\r\n           type=\"Oval\"\r\n           color=\"#674c9f\"\r\n           height={40}\r\n           width={40}\r\n          />\r\n        </ContainerInfo>\r\n      } */}\r\n\r\n      {!loading && NFTObjects.length != 0 &&\r\n        <ItemH id=\"scrollstyle-secondary\">\r\n          {Object.keys(NFTObjects).map(index => {\r\n            if (NFTObjects) {\r\n              return (\r\n                <>\r\n                <ViewNFTItem\r\n                  key={NFTObjects[index].id}\r\n                  NFTObject={NFTObjects[index]}\r\n                  nftReadProvider={nftReadProvider}\r\n                  nftWriteProvider={nftWriteProvider}\r\n                  controlAt={controlAt}\r\n                  setControlAt={setControlAt}\r\n                  setTokenId={setTokenId}\r\n                />\r\n                </>\r\n              );\r\n            }\r\n          })}\r\n        </ItemH>\r\n      }\r\n    </Section>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 80vh;\r\n`\r\n\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  background: #fafafa;\r\n`\r\n\r\n// Export Default\r\nexport default AllNFTs;\r\n","import React from \"react\";\r\n\r\nimport styled, { css } from 'styled-components';\r\nimport {Section, Content, Item, ItemH, ItemBreak, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\n\r\nimport { FiLink } from 'react-icons/fi';\r\n\r\nimport 'react-dropzone-uploader/dist/styles.css'\r\nimport Dropzone from 'react-dropzone-uploader'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nimport Loader from 'react-loader-spinner';\r\nimport { bigNumberify, parseUnits } from 'ethers/utils'\r\n\r\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport NFTHelper from 'helpers/NFTHelper';\r\nconst ethers = require('ethers');\r\n\r\nconst ipfs = require('ipfs-api')()\r\n\r\nconst minStakeFees = 50;\r\n\r\n// Create Header\r\nfunction TransferNFT({tokenId}) {\r\n  const { active, error, account, library, chainId } = useWeb3React();\r\n\r\n  const [nftWriteProvider, setNftWriteProvider] = React.useState(null);\r\n  const [toAddress, setToAddress] = React.useState('');\r\n\r\n  const [processing, setProcessing] = React.useState(0);\r\n  const [processingInfo, setProcessingInfo] = React.useState('');\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (!!(library && account)) {\r\n      let signer = library.getSigner(account);\r\n      const signerInstance = new ethers.Contract(addresses.rockstar, abis.rockstar, signer);\r\n      setNftWriteProvider(signerInstance);\r\n    }\r\n  }, [account]);\r\n\r\n  const handleTransferNFT = async(e) => {\r\n    if(nftWriteProvider){\r\n    console.log(\" ~ file: TransferNFT.js ~ line 64 ~ handleTransferNFT ~ nftWriteProvider\", nftWriteProvider)\r\n    e.preventDefault();\r\n\r\n    if (isEmpty(toAddress)) {\r\n      setProcessing(3);\r\n      setProcessingInfo(\"Recipient address field is empty! Please retry!\");\r\n\r\n      return false;\r\n    }\r\n    setProcessing(1);\r\n    setProcessingInfo(\"Transferring NFT...\")\r\n    let signer = library.getSigner(account);\r\n    const signerInstance = new ethers.Contract(addresses.rockstar, abis.rockstar, signer)\r\n    var txPromise = nftWriteProvider['safeTransferFrom(address,address,uint256)'](account, toAddress, tokenId);\r\n    const tx = await txPromise;\r\n    console.log(tx);\r\n    console.log(\"waiting for tx to finish\");\r\n    setProcessingInfo(\"Waiting for Transfer tx to finish...\");\r\n    await library.waitForTransaction(tx.hash);\r\n    setProcessingInfo(\"Transfer successfull! \");\r\n    setProcessing(3);\r\n    }\r\n  }\r\n\r\n  const isEmpty = (field) => {\r\n    if (field.trim().length == 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Section>\r\n        <Content padding=\"10px 20px 20px\">\r\n          <Item align=\"flex-start\">\r\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n              <Span weight=\"200\">Transfer Your NFT!</Span>\r\n            </H2>\r\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n              <Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Token #{tokenId}</Span>\r\n            </H2>\r\n          </Item>\r\n        </Content>\r\n      </Section>\r\n\r\n      <Section>\r\n        <Content padding=\"50px 0px 0px 0px\">\r\n          <FormSubmision\r\n            flex=\"1\"\r\n            direction=\"column\"\r\n            margin=\"0px\"\r\n            justify=\"center\"\r\n            size=\"1.1rem\"\r\n            onSubmit={handleTransferNFT}\r\n          >\r\n\r\n          <Item margin=\"-10px 20px 15px 20px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\r\n            <Input\r\n              required\r\n              placeholder=\"Recipient Address\"\r\n              maxlength = \"40\"\r\n              padding=\"12px\"\r\n              borderBottom=\"1px solid #000\"\r\n              weight=\"400\"\r\n              size=\"1.2em\"\r\n              bg=\"#fff\"\r\n              value={toAddress}\r\n              onChange={(e) => {setToAddress(e.target.value)}}\r\n            />\r\n            {toAddress.trim().length == 0 &&\r\n                <Span\r\n                  padding=\"4px 10px\"\r\n                  right=\"0px\"\r\n                  top=\"0px\"\r\n                  pos=\"absolute\"\r\n                  color=\"#fff\"\r\n                  bg=\"#000\"\r\n                  size=\"0.7rem\"\r\n                  z=\"1\"\r\n                >\r\n                  Recipient Address\r\n                </Span>\r\n              }\r\n          </Item>\r\n          <Item margin=\"15px 0px 0px 0px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\r\n            <Button\r\n              bg='#674c9f'\r\n              color='#fff'\r\n              flex=\"1\"\r\n              radius=\"0px\"\r\n              padding=\"20px 10px\"\r\n              disabled={processing == 1 ? true : false}\r\n            >\r\n              {processing == 1 &&\r\n                <Loader\r\n                    type=\"Oval\"\r\n                    color=\"#fff\"\r\n                    height={24}\r\n                    width={24}\r\n                  />\r\n              }\r\n              {processing != 1 &&\r\n                <Input cursor=\"hand\" textTransform=\"uppercase\" color=\"#fff\" weight=\"400\" size=\"0.8em\" spacing=\"0.2em\" type=\"submit\" value=\"Transfer\" />\r\n              }\r\n            </Button>\r\n          </Item>\r\n          </FormSubmision>\r\n        </Content>\r\n      </Section>\r\n\r\n      {(processing == 1 || processing == 3) &&\r\n        <Section>\r\n          <Content padding=\"0px 0px 0px 0px\">\r\n            <Item\r\n              color=\"#fff\"\r\n              bg={processing == 1 ? \"#e1087f\" : \"#000\"}\r\n              padding=\"10px 15px\"\r\n              margin = \"15px 0px\"\r\n            >\r\n              <Span\r\n                color=\"#fff\"\r\n                textTransform=\"uppercase\"\r\n                spacing=\"0.1em\"\r\n                weight=\"400\"\r\n                size=\"1em\"\r\n              >\r\n                {processingInfo}\r\n              </Span>\r\n            </Item>\r\n\r\n          </Content>\r\n        </Section>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Step = styled.div`\r\n  height: 12px;\r\n  width: 12px;\r\n  background: ${props => props.bg || \"#fff\"};\r\n  border: 4px solid ${props => props.activeBG || \"#000\"};\r\n  border-radius: 100%;\r\n\r\n  ${({ type }) => type == \"active\" && css`\r\n    background: ${props => props.activeBG || \"#ddd\"};\r\n    border: 4px solid #00000022;\r\n  `};\r\n`\r\nconst Info = styled.label`\r\n  padding-bottom: 20px;\r\n  font-size: 14px;\r\n  color: #000;\r\n`\r\n\r\nconst ChannelMetaBox = styled.label`\r\n  margin: 0px 5px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  padding: 10px 20px;\r\n  border-radius: 10px;\r\n  font-size: 15px;\r\n  // font-size: 11px;\r\n`\r\nconst Pool = styled.div`\r\n  margin: 0px 10px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`\r\n\r\nconst PoolShare = styled(ChannelMetaBox)`\r\n  background: #e20880;\r\n  // background: #674c9f;\r\n`\r\n\r\n\r\n// Export Default\r\nexport default TransferNFT;\r\n","import React, { useState } from \"react\";\r\n\r\nimport styled, { css, useTheme } from 'styled-components';\r\nimport {Section, Content, Item, ItemH, ItemBreak, A, B, H1, H2, H3, Para, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\n\r\nimport { BsChevronExpand } from 'react-icons/bs';\r\n\r\nimport Loader from 'react-loader-spinner'\r\nimport { Waypoint } from \"react-waypoint\";\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport NFTHelper from 'helpers/NFTHelper';\r\nimport { ethers } from \"ethers\";\r\n\r\nimport DisplayNotice from \"components/DisplayNotice\";\r\nimport ViewNFTItem from \"components/ViewNFTItem\";\r\nimport MyNFTs from \"components/MyNFTs\";\r\nimport AllNFTs from \"components/AllNFTs\";\r\nimport TransferNFT from \"components/TransferNFT\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\n\r\n// Create Header\r\nfunction NFTPage({ epnsReadProvider, epnsWriteProvide }) {\r\n  const { account, library } = useWeb3React();\r\n\r\n  const themes = useTheme();\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const [tokenId, setTokenId] = React.useState(null);\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  const [showAnswers, setShowAnswers] = React.useState([]);\r\n\r\n  const toggleShowAnswer = (id) => {\r\n    let newShowAnswers = [...showAnswers];\r\n    newShowAnswers[id] = !newShowAnswers[id];\r\n\r\n    setShowAnswers(newShowAnswers);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    userClickedAt(1);\r\n  }, [account]);\r\n\r\n  // handle user action at control center\r\n  const userClickedAt = (controlIndex) => {\r\n    setControlAt(controlIndex);\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n      <Section>\r\n        <Content padding=\"20px 20px 0px\">\r\n          <Item align=\"flex-start\" margin=\"0px 20px 0px 20px\">\r\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n              <Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">$ROCKSTAR</Span><Span weight=\"200\" color={themes.color}> of </Span><Span bg=\"#e20880\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">EPNS</Span>\r\n            </H2>\r\n            <H3 color={themes.greyText}>Thank you <B color={themes.color}>community</B> for all your support. Over the next year, we are excited to continue returning our gratitude!</H3>\r\n          </Item>\r\n\r\n          <Item align=\"stretch\" justify=\"flex-start\" margin=\"0px 20px 0px 20px\">\r\n\r\n            {/* Question */}\r\n            <Item align=\"stretch\" margin=\"0px 0px 20px 0px\">\r\n              <QnAItem>\r\n                <Question\r\n                  onClick={() => {toggleShowAnswer(1)}}\r\n                  hover=\"#e20880\"\r\n                >\r\n                  <Span color={themes.color}>\r\n                    Does $ROCKSTAR of EPNS NFTs carry something along with NFTs?\r\n                  </Span>\r\n                  <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n                </Question>\r\n\r\n                {showAnswers[1] &&\r\n                  <Answer>\r\n                    <Span>\r\n                      Yes, Each <B>$ROCKSTAR</B> contains <B>2400 $PUSH</B> tokens that can be claimed instantly!!! <AMod href=\"https://medium.com/ethereum-push-notification-service/push-token-economics-d7f566c29b1a\" target=\"_blank\" title=\"Read more about $PUSH tokeneconomics\">Learn about $PUSH Token Economics.</AMod>\r\n                    </Span>\r\n                  </Answer>\r\n                }\r\n              </QnAItem>\r\n\r\n              <QnAItem>\r\n                <Question\r\n                  onClick={() => {toggleShowAnswer(2)}}\r\n                  hover=\"#e20880\"\r\n                >\r\n                  <Span color={themes.color}>\r\n                    How to get $ROCKSTAR of EPNS?\r\n                  </Span>\r\n                  <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n                </Question>\r\n\r\n                {showAnswers[2] &&\r\n                  <Answer>\r\n                    <Span>\r\n                      Well be distributing one NFT a week (every Monday) to one community member who does something to help us push the envelope forward. <AMod href=\"https://medium.com/ethereum-push-notification-service/kicking-off-the-epns-nft-community-drops-6a5c49808cf\" target=\"_blank\" title=\"Read how to get $ROCKSTAR of EPNS\">Here are some ways by which you can get one!</AMod>\r\n                    </Span>\r\n                  </Answer>\r\n                }\r\n              </QnAItem>\r\n\r\n            </Item>\r\n          </Item>\r\n        </Content>\r\n\r\n        <Content padding=\"0px 20px 20px\" bg=\"#eee\">\r\n          <Item align=\"flex-start\" margin=\"0px 20px 0px 20px\">\r\n            \r\n            <Controls>\r\n              <SubscribeButton index={0} active={controlAt == 0 ? 1 : 0} onClick={() => {userClickedAt(0)}} >\r\n                <ActionTitle >My NFTs</ActionTitle>\r\n              </SubscribeButton>\r\n              <SubscribeButton index={1} active={controlAt == 1 ? 1 : 0} onClick={() => {userClickedAt(1)}}>\r\n                <ActionTitle >All NFTs</ActionTitle>\r\n              </SubscribeButton>\r\n            </Controls>\r\n           \r\n\r\n            {controlAt === 0 &&\r\n              <MyNFTs\r\n                controlAt={controlAt}\r\n                setControlAt={setControlAt}\r\n                setTokenId={setTokenId}\r\n              />\r\n            }\r\n            {controlAt === 1 &&\r\n              <AllNFTs\r\n                controlAt={controlAt}\r\n                setControlAt={setControlAt}\r\n                setTokenId={setTokenId}\r\n              />\r\n            }\r\n            {controlAt === 2 && tokenId &&\r\n              <TransferNFT tokenId={tokenId}/>\r\n            }\r\n          </Item>\r\n        </Content>\r\n      </Section>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 80vh;\r\n`\r\n\r\nconst Controls = styled.div`\r\n  flex: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n`\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  display: block;\r\n  align-self: stretch;\r\n  padding: 10px 20px;\r\n  overflow-y: scroll;\r\n  background: #fafafa;\r\n`\r\n\r\nconst ChannelActionButton = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: left;\r\n  // align-items: center;\r\n  justify-content: flex-end;\r\n  // justify-content: center;\r\n  padding: 8px 15px;\r\n  margin: 10px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  position: relative;\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n  ${ props => props.disabled && css`\r\n    &:hover {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n    &:active {\r\n      opacity: 1;\r\n      cursor: default;\r\n      pointer: default;\r\n    }\r\n  `}\r\n`\r\n\r\nconst SubscribeButton = styled(ChannelActionButton)`\r\n  background: #e20880;\r\n`\r\n\r\nconst ActionTitle = styled.span`\r\n  ${ props => props.hideit && css`\r\n    visibility: hidden;\r\n  `};\r\n`\r\n\r\nconst Question = styled(Button)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n`\r\n\r\nconst Answer = styled(Item)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n\r\n`\r\n\r\nconst QnAItem = styled(Item)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n  flex: auto;\r\n  margin: 15px 0px;\r\n  border: 1px solid #fafafa;\r\n  border-radius: 10px;\r\n  box-shadow: 0px 5px 20px -10px rgb(0 0 0 / 0.20);\r\n  overflow: hidden;\r\n\r\n  & ${Question} {\r\n    background: transparent;\r\n    justify-content: flex-start;\r\n    text-transform: uppercase;\r\n\r\n    & ${Span} {\r\n      font-weight: 400;\r\n      letter-spacing: 0.2em;\r\n      margin-left: 10px;\r\n      flex: 1;\r\n    }\r\n\r\n    &:hover {\r\n      & ${Span} {\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n\r\n  & ${Answer} {\r\n    border: 1px solid #e6e6e6;\r\n    border-top: 1px solid #e6e6e6;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    padding: 10px 15px;\r\n    align-items: flex-start;\r\n    background: #fff;\r\n\r\n    & ${Span} {\r\n      line-height: 1.5em;\r\n      margin: 10px;\r\n      color: #000 ;\r\n      font-size: 1.05em;\r\n    }\r\n  }\r\n`\r\n\r\nconst AMod = styled(A)`\r\n  color: #e20880;\r\n  font-weight: 500;\r\n`\r\n\r\n// Export Default\r\nexport default NFTPage;\r\n","import React, { useState } from \"react\";\r\n\r\nimport styled, { css, useTheme } from 'styled-components';\r\nimport {Section, Content, Item, ItemH, ItemBreak, Para, A, B, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\r\n\r\nimport { AiFillHeart } from 'react-icons/ai';\r\nimport { BsChevronExpand } from 'react-icons/bs';\r\n\r\nimport Loader from 'react-loader-spinner'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { ethers } from \"ethers\";\r\n\r\nimport AirdropHelper from 'helpers/AirdropHelper';\r\n\r\nimport ViewInfoItem from \"components/ViewInfoItem\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\n\r\nimport * as dotenv from \"dotenv\";\r\nimport UsersDataStore from \"singletons/UsersDataStore\";\r\ndotenv.config();\r\n\r\n// Other Information section\r\nfunction AirdropPage() {\r\n  const themes = useTheme();\r\n\r\n  const { account, library } = useWeb3React();\r\n\r\n  const [controlAt, setControlAt] = React.useState(0);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [ txInProgress, setTxInProgress ] = React.useState(false);\r\n  const [distributorContract, setDistributorContract] = React.useState(null);\r\n  const [user, setUser] = React.useState(null);\r\n\r\n  const [showAnswers, setShowAnswers] = React.useState([]);\r\n\r\n  const toggleShowAnswer = (id) => {\r\n    let newShowAnswers = [...showAnswers];\r\n    newShowAnswers[id] = !newShowAnswers[id];\r\n\r\n    setShowAnswers(newShowAnswers);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (!!(library && account)) {\r\n      let signer = library.getSigner(account);\r\n      console.log(abis.distributor)\r\n      const signerInstance = new ethers.Contract(addresses.distributor, abis.distributor, signer);\r\n      setDistributorContract(signerInstance);\r\n      // const NFTRewardsInstance = new ethers.Contract(addresses.NFTRewards, abis.NFTRewards, signer);\r\n      // setNFTRewardsContract(NFTRewardsInstance);\r\n    }\r\n  }, [account,library]);\r\n\r\n  React.useEffect(() => {\r\n    if(distributorContract){\r\n      checkClaim();\r\n    }\r\n  }, [account, distributorContract]);\r\n\r\n  // to check wh\r\n  const checkClaim = async () => {\r\n    let user = await AirdropHelper.verifyAddress(account, distributorContract);\r\n    setUser(user)\r\n    if(user)\r\n    setLoading(false)\r\n  }\r\n\r\n  // to claim\r\n  const handleClaim = async (user) => {\r\n    if(distributorContract){\r\n      setTxInProgress(true)\r\n      let sendWithTxPromise\r\n      sendWithTxPromise = await distributorContract.claim(user.index, user.account, user.amount, user.proof)\r\n      const tx = await sendWithTxPromise;\r\n      console.log(tx);\r\n      console.log(\"waiting for tx to finish\");\r\n      let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\r\n        position: \"bottom-right\",\r\n        autoClose: false,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      try {\r\n        await library.waitForTransaction(tx.hash);\r\n\r\n        toast.update(txToast, {\r\n          render: \"Transaction Completed!\",\r\n          type: toast.TYPE.SUCCESS,\r\n          autoClose: 5000\r\n        });\r\n\r\n        setTxInProgress(false);\r\n      }\r\n      catch(e) {\r\n        toast.update(txToast, {\r\n          render: \"Transaction Failed! (\" + e.name + \")\",\r\n          type: toast.TYPE.ERROR,\r\n          autoClose: 5000\r\n        });\r\n\r\n        setTxInProgress(false);\r\n      }\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // toast customize\r\n  const LoaderToast = ({ msg, color }) => (\r\n    <Toaster>\r\n      <Loader\r\n       type=\"Oval\"\r\n       color={color}\r\n       height={30}\r\n       width={30}\r\n      />\r\n      <ToasterMsg>{msg}</ToasterMsg>\r\n    </Toaster>\r\n  )\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n      <Section margin=\"20px\">\r\n        <Content padding=\"0px 20px 0px\">\r\n          <Item align=\"flex-start\">\r\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n              <Span bg=\"#35c5f3\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Gratitude</Span><Span weight=\"200\" color={themes.color}> Drop!</Span>\r\n            </H2>\r\n            <H3 color={themes.color}>We would never be here without you! Thanks for the <b color={themes.color}>#PUSH</b>!!!</H3>\r\n          </Item>\r\n        </Content>\r\n\r\n        <Content padding=\"0px 20px 0px 20px\">\r\n          <Item align=\"flex-start\">\r\n            <Para margin=\"10px 0px 0px 0px\" color={themes.color}>Thanks for the ton of support, feedback, encouragement and helping us out in every step! As a small token of our gratitude, we are dropping <B color={themes.color}>1200 $PUSH</B> to anyone who:</Para>\r\n\r\n            <Para margin=\"20px 0px 0px 20px\" color={themes.color}>- Donated to us on <B color={themes.color}>Gitcoin grants round 6 or 7</B></Para>\r\n            <Para margin=\"10px 0px 0px 20px\" color={themes.color}>- Used our dApp on or before <B color={themes.color}>20th March, 2021</B>: <AMod href=\"https://app.epns.io\" target=\"_blank\" title=\"Visit our dApp\">EPNS dApp</AMod></Para>\r\n          </Item>\r\n\r\n          <Item padding=\"40px 0px 20px 0px\">\r\n            {loading &&\r\n              <Loader\r\n               type=\"Oval\"\r\n               color=\"#35c5f3\"\r\n               height={40}\r\n               width={40}\r\n              />\r\n            }\r\n\r\n            {!loading && controlAt == 0 &&\r\n              <>\r\n              {user.verified && user.claimable &&\r\n                <EpicButton\r\n                  onClick={() => {handleClaim(user)}}\r\n                >\r\n                  Claim $PUSH Tokens\r\n                </EpicButton>\r\n              }\r\n              {user.verified && !user.claimable &&\r\n\r\n                <EpicButton\r\n                  theme=\"claimed\"\r\n                  disabled={true}\r\n                >\r\n                  $PUSH Tokens Claimed\r\n                </EpicButton>\r\n              }\r\n              {!user.verified &&\r\n                  <EpicButton\r\n                    theme=\"noteligible\"\r\n                    disabled={true}\r\n                  >\r\n                    Not eligible for Gratitude Drop\r\n                  </EpicButton>\r\n              }\r\n              </>\r\n            }\r\n          </Item>\r\n\r\n        </Content>\r\n      </Section>\r\n\r\n      {/* FAQs */}\r\n      <Section themes={themes.mainBg} padding=\"0px 0px 0px 0px\">\r\n        <Content className=\"contentBox\">\r\n          <Item align=\"stretch\" justify=\"flex-start\" margin=\"-10px 20px 0px 20px\">\r\n\r\n            {/* Question */}\r\n            <Item align=\"stretch\" margin=\"0px 0px 0px 0px\">\r\n              <QnAItem>\r\n                <Question\r\n                  onClick={() => {toggleShowAnswer(1)}}\r\n                  hover=\"#e20880\"\r\n                >\r\n                  <Span color={themes.color}>\r\n                    What is $PUSH contract address?\r\n                  </Span>\r\n                  <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n                </Question>\r\n\r\n                {showAnswers[1] &&\r\n                  <Answer>\r\n                    <Span>$PUSH token contract address is <B>0xf418588522d5dd018b425E472991E52EBBeEEEEE</B></Span>\r\n                  </Answer>\r\n                }\r\n              </QnAItem>\r\n\r\n              <QnAItem>\r\n                <Question\r\n                  onClick={() => {toggleShowAnswer(2)}}\r\n                  hover=\"#e20880\"\r\n                >\r\n                  <Span color={themes.color}>\r\n                    What is EPNS?\r\n                  </Span>\r\n                  <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n                </Question>\r\n\r\n                {showAnswers[2] &&\r\n                  <Answer>\r\n                    <Span>Ethereum Push Notification Service (EPNS) is a decentralized protocol allowing Ethereum users to receive notifications for on-chain or off-chain activity.</Span>\r\n\r\n                    <Span>EPNS allows Web3 actors (users, dapps, service providers) to create notifications that are triggered if and when a smart contract reaches certain conditions. Other Web3 participants can search, browse, and subscribe to specific notifications and more confidently interact with dapps.</Span>\r\n                  </Answer>\r\n                }\r\n              </QnAItem>\r\n\r\n              <QnAItem>\r\n                <Question\r\n                  onClick={() => {toggleShowAnswer(3)}}\r\n                  hover=\"#e20880\"\r\n                >\r\n                  <Span color={themes.color}>\r\n                    Why are push notifications important for Web3?\r\n                  </Span>\r\n                  <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n                </Question>\r\n\r\n                {showAnswers[3] &&\r\n                  <Answer>\r\n                    <Span>Push notifications have transformed the Web2 ecosystem. They have enabled applications to have more direct relationships with users and have yielded fundamental strategies about marketing, product fit, user behavior, and more. </Span>\r\n\r\n                    <Span>The problem with Web2 notifications, however, is that they are entirely created and prescribed by the applications themselves, and are not always net-useful to the end user. Users rarely have a choice about what kinds of notifications they wish to receive, and more often than not, notifications are purely marketing vehicles to drive revenue for the applications.</Span>\r\n\r\n                    <Span><i><B>Decentralized notifications</B></i>, on the other hand, provide the emerging Web3 ecosystem with the benefits of a robust notification ecosystem without the exploitative or centralized drawbacks of Web2 notifications.</Span>\r\n\r\n                    <Span>Applications need ways to communicate with users in more immediate and event-initiated ways than through Twitter, Discord, or email. Users deserve to control what notifications they receive, and should benefit from the open source nature of Web3 by requesting notifications about protocol behavior.</Span>\r\n                  </Answer>\r\n                }\r\n              </QnAItem>\r\n\r\n              <QnAItem>\r\n                <Question\r\n                  onClick={() => {toggleShowAnswer(4)}}\r\n                  hover=\"#e20880\"\r\n                >\r\n                  <Span color={themes.color}>\r\n                    How can I keep up with EPNS?\r\n                  </Span>\r\n                  <BsChevronExpand size={20} color={\"#ddd\"}/>\r\n                </Question>\r\n\r\n                {showAnswers[4] &&\r\n                  <Answer>\r\n                    <Span>Join our <AMod href=\"https://t.me/epnsproject\" target=\"_blank\" title=\"Join our EPNS's Telegram channel\">Telegram</AMod>, follow us on <AMod href=\"https://twitter.com/epnsproject\" target=\"_blank\" title=\"Join our EPNS's Twitter channel\">Twitter</AMod>, and sign up for our 5 minute <AMod href=\"https://epns.substack.com/\" target=\"_blank\" title=\"Join our EPNS's Twitter channel\">weekly product updates</AMod>.</Span>\r\n                  </Answer>\r\n                }\r\n              </QnAItem>\r\n\r\n\r\n            </Item>\r\n          </Item>\r\n        </Content>\r\n      </Section>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n\r\n  font-weight: 200;\r\n  align-content: center;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-height: 80vh;\r\n`\r\n\r\nconst ContainerInfo = styled.div`\r\n  padding: 20px;\r\n`\r\nconst InfoBox = styled.div`\r\n  padding: 10px 20px;\r\n  display: block;\r\n  align-self: stretch;\r\n  background: #fafafa;\r\n`\r\nconst Continue = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  background: ${props => props.theme || '#674c9f'};\r\n  margin: 30px 0px 0px 0px;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n`\r\n\r\nconst ChannelTitleLink = styled.a`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n  &:hover {\r\n    text-decoration: underline;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\nconst AppLink = styled.a`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n  &:hover {\r\n    text-decoration: underline;\r\n    cursor: pointer;\r\n    pointer: hand;\r\n  }\r\n`\r\nconst AppLinkText = styled.div`\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n  color: #e20880;\r\n  font-size: 20px;\r\n`\r\nconst ChannelInfo = styled.div`\r\n  flex: 1;\r\n  margin: 5px 10px;\r\n  min-width: 120px;\r\n  flex-grow: 4;\r\n  flex-direction: column;\r\n  display: flex;\r\n`\r\n\r\nconst ChannelTitle = styled.div`\r\n  margin-bottom: 5px;\r\n`\r\n\r\nconst Toaster = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin: 0px 10px;\r\n`\r\n\r\nconst ToasterMsg = styled.div`\r\n  margin: 0px 10px;\r\n`\r\nconst Question = styled(Button)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n`\r\n\r\nconst Answer = styled(Item)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n\r\n`\r\n\r\nconst QnAItem = styled(Item)`\r\n  align-items: stretch;\r\n  align-self: stretch;\r\n  flex: auto;\r\n  margin: 15px 0px;\r\n  border: 1px solid #fafafa;\r\n  border-radius: 10px;\r\n  box-shadow: 0px 5px 20px -10px rgb(0 0 0 / 0.20);\r\n  overflow: hidden;\r\n\r\n  & ${Question} {\r\n    background: transparent;\r\n    justify-content: flex-start;\r\n    text-transform: uppercase;\r\n\r\n    & ${Span} {\r\n      font-weight: 400;\r\n      letter-spacing: 0.2em;\r\n      margin-left: 10px;\r\n      flex: 1;\r\n    }\r\n\r\n    &:hover {\r\n      & ${Span} {\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n\r\n  & ${Answer} {\r\n    border: 1px solid #e6e6e6;\r\n    border-top: 1px solid #e6e6e6;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    padding: 10px 15px;\r\n    align-items: flex-start;\r\n    background: #fff;\r\n\r\n    & ${Span} {\r\n      line-height: 1.5em;\r\n      margin: 10px;\r\n      color: #000 ;\r\n      font-size: 1.05em;\r\n    }\r\n  }\r\n`\r\n\r\nconst AMod = styled(A)`\r\n  color: #e20880;\r\n  font-weight: 500;\r\n`\r\n\r\nconst EpicButton = styled(A)`\r\n  padding: 15px 15px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  border-radius: 8px;\r\n  background: ${prop => prop.theme===('claimed' || 'noteligible') ? '#000' : 'linear-gradient(273deg, #674c9f 0%, rgba(226,8,128,1) 100%)'};\r\n`\r\n\r\n// Export Default\r\nexport default AirdropPage;\r\n","import React from \"react\";\r\n\r\nimport styled, { useTheme } from 'styled-components';\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport { Section, Content, Item } from 'components/SharedStyling';\r\n\r\nfunction ComingSoonPage(props) {\r\n  const themes = useTheme();\r\n\r\n  // Render\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n      <Section style={{minHeight: '60vh'}}>\r\n        <Content padding=\"0px 20px 0px\">\r\n          <Item align=\"center\">\r\n            {console.log(props.theme)}\r\n            <Heading color=\"#333\" spacing=\"0.05em\" size=\"4rem\" weight={700}>\r\n             Coming soon.\r\n            </Heading>\r\n          </Item>\r\n        </Content>\r\n      </Section>\r\n      </ThemeProvider>\r\n  );\r\n}\r\n\r\nconst Heading = styled.h2`\r\n  color: ${props => props.theme.scheme === \"dark\" ? props.theme.color : props.color || \"#000\"};\r\n  text-shadow: 2px 0 ${props => props.theme.scheme === \"dark\" ? props.theme.color : props.color || \"#000\"};\r\n  font-weight: ${props => props.weight || 600};\r\n  font-size: ${props => props.size || \"2rem\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  margin: ${props => props.margin || \"20px 0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"inherit\"};\r\n  font-family: ${props => props.family || \"'Source Sans Pro', Helvetica, sans-serif\"};\r\n  text-align: ${props => props.textAlign || \"inherit\"};\r\n\r\n  @media (max-width: 768px) {\r\n\t\tfont-size: 2.8rem;\r\n\t}\r\n`\r\n\r\n// Export Default\r\nexport default ComingSoonPage;","import React, { useState } from \"react\";\r\n\r\nimport {\r\n  Section,\r\n  Content,\r\n  Item,\r\n  ItemH,\r\n  WaveOuter,\r\n  WaveInner,\r\n  H2,\r\n  H3,\r\n  Span,\r\n  Button,\r\n  FormSubmision,\r\n  Input,\r\n  TextField,\r\n} from \"components/SharedStyling\";\r\nimport Wave from \"react-wavify\";\r\nimport Dropdown from \"react-dropdown\";\r\nimport styled, { useTheme } from \"styled-components\";\r\nimport { FaCheckCircle } from \"react-icons/fa\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\n// HELPER METHODS\r\nconst validateEmail = (email) => {\r\n  const re =\r\n    /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return re.test(String(email).toLowerCase());\r\n};\r\n\r\nconst isEmpty = (field) => {\r\n  if (field.trim().length === 0) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst SupportPage = () => {\r\n  const contactFormTopics = [\"Support\", \"Integrate\", \"Others\"];\r\n\r\n  const [contactFormProcessing, setContactFormProcessing] = React.useState(0);\r\n  const [contactFormName, setContactFormName] = React.useState(\"\");\r\n  const [contactFormEmail, setContactFormEmail] = React.useState(\"\");\r\n  const [contactFormTopic, setContactFormTopic] = React.useState(\r\n    contactFormTopics[0]\r\n  );\r\n  const [contactFormSub, setContactFormSub] = React.useState(\"\");\r\n  const [contactFormMsg, setContactFormMsg] = React.useState(\"\");\r\n  const [contactFormError, setContactFormError] = React.useState(\"\");\r\n\r\n  const themes = useTheme();\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const handleContactFormSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\r\n\t\t// Check everything in order\r\n\t\tif (validateEmail(contactFormEmail)) {\r\n\t\t\tif (isEmpty(contactFormName)) {\r\n\t\t\t\tsetContactFormError(\"Name can't be empty\");\r\n\t\t\t\tsetContactFormProcessing(0);\r\n\t\t\t} else if (isEmpty(contactFormSub)) {\r\n\t\t\t\tsetContactFormError(\"Subject can't be empty\");\r\n\t\t\t\tsetContactFormProcessing(0);\r\n\t\t\t} else if (isEmpty(contactFormMsg)) {\r\n\t\t\t\tsetContactFormError(\"Message can't be empty\");\r\n\t\t\t\tsetContactFormProcessing(0);\r\n\t\t\t} else {\r\n\t\t\t\tsetContactFormProcessing(1);\r\n\t\r\n\t\t\t\tconst requestOptions = {\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\tfrom: contactFormEmail,\r\n\t\t\t\t\t\tname: contactFormName,\r\n\t\t\t\t\t\ttopic: contactFormTopic,\r\n\t\t\t\t\t\tsub: contactFormSub,\r\n\t\t\t\t\t\tmsg: contactFormMsg,\r\n\t\t\t\t\t}),\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tfetch(\r\n\t\t\t\t\t\"https://backend-kovan.epns.io/apis/mailing/send_mail\",\r\n\t\t\t\t\trequestOptions\r\n\t\t\t\t)\r\n\t\t\t\t\t.then((response) => response.json())\r\n\t\t\t\t\t.then((jsondata) => {\r\n\t\t\t\t\t\t// console.log(jsondata);\r\n\t\t\t\t\t\tsetContactFormProcessing(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t// console.log(err);\r\n\t\t\t\t\t\tsetContactFormError(\r\n\t\t\t\t\t\t\t\"Mayday! Mayday! something went wrong. Please retry...\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tsetContactFormProcessing(0);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetContactFormError(\"Incorrect e-mail, please check and retry!\");\r\n\t\t\tsetContactFormProcessing(0);\r\n\t\t}\r\n\t};\r\n\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n    <Section id=\"contact\" theme={themes.mainBg}>\r\n      <Content className=\"contentBox\" padding=\"10px 0\">\r\n        <Item align=\"stretch\" justify=\"flex-start\" margin=\"0px 20px\">\r\n            <Item align=\"stretch\" align=\"flex-end\" tabletAlign=\"flex-start\" margin=\"0px 16px 0px 0px\" textAlign=\"right\" tabletTextAlign=\"left\">\r\n              <H2 textTransform=\"uppercase\" spacing=\"0.1em\" bg=\"#fff\">\r\n                <Span color={themes.color} weight=\"600\" padding=\"0px\">Contact US!</Span>\r\n                {/* <Span weight=\"200\" color=\"#000\"> Us!</Span> */}\r\n              </H2>\r\n              <H3 bg=\"#fff\" color={themes.color}>Get in Touch</H3>\r\n            </Item>\r\n          <Item self=\"stretch\">\r\n            <FormSubmision\r\n              flex=\"1\"\r\n              direction=\"row\"\r\n              justify=\"stretch\"\r\n              margin=\"10px\"\r\n              size=\"1.1rem\"\r\n              onSubmit={handleContactFormSubmit}\r\n            >\r\n              <Item align=\"stretch\" justify=\"stretch\" margin=\"10px -15px\">\r\n                {contactFormProcessing === 0 && (\r\n                  <>\r\n                    <ItemH align=\"stretch\">\r\n                      <Item\r\n                        flex=\"1\"\r\n                        margin=\"15px\"\r\n                        justify=\"flex-start\"\r\n                        align=\"stretch\"\r\n                        minWidth=\"280px\"\r\n                      >\r\n                        <ContactInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n                          radius=\"4px\"\r\n                          padding=\"12px\"\r\n                          bg=\"#fff\"\r\n                          border=\"12px\"\r\n                          placeholder=\"John Wick\"\r\n                          value={contactFormName}\r\n                          onChange={(e) => {\r\n                            setContactFormName(e.target.value);\r\n                          }}\r\n                          autocomplete=\"name\"\r\n                          style={{\r\n                          }}\r\n                        />\r\n                        {contactFormName.trim().length === 0 && (\r\n                          <Span\r\n                            padding=\"4px 10px\"\r\n                            right=\"0px\"\r\n                            top=\"0px\"\r\n                            pos=\"absolute\"\r\n                            color=\"#fff\"\r\n                            bg=\"#000\"\r\n                            size=\"0.7rem\"\r\n                            z=\"1\"\r\n                          >\r\n                            Name\r\n                          </Span>\r\n                        )}\r\n                      </Item>\r\n\r\n                      <Item\r\n                        flex=\"5\"\r\n                        margin=\"15px\"\r\n                        justify=\"flex-start\"\r\n                        align=\"stretch\"\r\n                        minWidth=\"280px\"\r\n                      >\r\n                        <ContactInput\r\n                          required\r\n                          placeholder=\"john@wick.com\"\r\n                          radius=\"4px\"\r\n                          padding=\"12px\"\r\n                          bg=\"#fff\"\r\n                          value={contactFormEmail}\r\n                          onChange={(e) => {\r\n                            setContactFormEmail(e.target.value);\r\n                          }}\r\n                          autocomplete=\"email\"\r\n                        />\r\n                        {contactFormEmail.trim().length === 0 && (\r\n                          <Span\r\n                            padding=\"4px 10px\"\r\n                            right=\"0px\"\r\n                            top=\"0px\"\r\n                            pos=\"absolute\"\r\n                            color=\"#fff\"\r\n                            bg=\"#000\"\r\n                            size=\"0.7rem\"\r\n                            z=\"1\"\r\n                          >\r\n                            E-mail\r\n                          </Span>\r\n                        )}\r\n                      </Item>\r\n                    </ItemH>\r\n\r\n                    <Item\r\n                      flex=\"5\"\r\n                      justify=\"flex-start\"\r\n                      align=\"stretch\"\r\n                      minWidth=\"280px\"\r\n                      margin=\"15px\"\r\n                    >\r\n                      <DropdownStyled\r\n                        options={contactFormTopics}\r\n                        onChange={(option) => setContactFormTopic(option.value)}\r\n                        value={contactFormTopic}\r\n                        placeholder=\"Select an option\"\r\n                      />\r\n                    </Item>\r\n\r\n                    <Item\r\n                      justify=\"center\"\r\n                      align=\"stretch\"\r\n                      minWidth=\"280px\"\r\n                      margin=\"15px\"\r\n                    >\r\n                      <ContactInput\r\n                        required\r\n                        placeholder=\"I want to tell you guys a secret!\"\r\n                        radius=\"4px\"\r\n                        padding=\"12px\"\r\n                        bg=\"#fff\"\r\n                        value={contactFormSub}\r\n                        onChange={(e) => {\r\n                          setContactFormSub(e.target.value);\r\n                        }}\r\n                        autocomplete=\"on\"\r\n                      />\r\n                      {contactFormSub.trim().length === 0 && (\r\n                        <Span\r\n                          padding=\"4px 10px\"\r\n                          right=\"0px\"\r\n                          top=\"0px\"\r\n                          pos=\"absolute\"\r\n                          color=\"#fff\"\r\n                          bg=\"#000\"\r\n                          size=\"0.7rem\"\r\n                          z=\"1\"\r\n                        >\r\n                          Subject\r\n                        </Span>\r\n                      )}\r\n                    </Item>\r\n\r\n                    <Item\r\n                      justify=\"center\"\r\n                      align=\"stretch\"\r\n                      minWidth=\"280px\"\r\n                      margin=\"15px\"\r\n                    >\r\n                      <ContactTextArea\r\n                        required\r\n                        placeholder=\"This is where you will tell us that secret, or a bug or whatever is on your mind.\"\r\n                        rows=\"6\"\r\n                        radius=\"4px\"\r\n                        padding=\"12px\"\r\n                        bg=\"#fff\"\r\n                        value={contactFormMsg}\r\n                        onChange={(e) => {\r\n                          setContactFormMsg(e.target.value);\r\n                        }}\r\n                        autocomplete=\"off\"\r\n                      />\r\n                    </Item>\r\n                  </>\r\n                )}\r\n\r\n                {contactFormProcessing === 2 && (\r\n                  <Item align=\"center\" margin=\"0px 10px\">\r\n                    <ItemH\r\n                      color=\"#e20880\"\r\n                      bg=\"#000\"\r\n                      padding=\"10px 15px\"\r\n                      columnGap=\"0px\"\r\n                      rowGap=\"0px\"\r\n                    >\r\n                      <FaCheckCircle size={24} color=\"#fff\" />\r\n                      <Span\r\n                        padding=\"0px 0px 0px 8px\"\r\n                        color=\"#fff\"\r\n                        textTransform=\"uppercase\"\r\n                        spacing=\"0.1em\"\r\n                      >\r\n                        Message Sent! We will be in Touch :)\r\n                      </Span>\r\n                    </ItemH>\r\n                  </Item>\r\n                )}\r\n\r\n                {contactFormError && contactFormProcessing === 0 && (\r\n                  <Item align=\"center\" margin=\"0px 10px\">\r\n                    <Item\r\n                      color=\"#e20880\"\r\n                      bg=\"#000\"\r\n                      padding=\"10px 15px\"\r\n                      margin=\"15px\"\r\n                    >\r\n                      <Span\r\n                        color=\"#fff\"\r\n                        textTransform=\"uppercase\"\r\n                        spacing=\"0.1em\"\r\n                      >\r\n                        {contactFormError}\r\n                      </Span>\r\n                    </Item>\r\n                  </Item>\r\n                )}\r\n\r\n                <Item\r\n                  justify=\"stretch\"\r\n                  self=\"stretch\"\r\n                  align=\"stretch\"\r\n                  minWidth=\"280px\"\r\n                >\r\n                  {contactFormProcessing !== 2 && (\r\n                    <Button\r\n                      bg=\"#000\"\r\n                      color=\"#fff\"\r\n                      border={themes.buttonBd}\r\n                      flex=\"1\"\r\n                      radius=\"4px\"\r\n                      disabled={contactFormProcessing}\r\n                      margin=\"15px\"\r\n                      padding=\"12px 15px\"\r\n                    >\r\n                      {contactFormProcessing === 1 && (\r\n                        <Loader\r\n                          type=\"Oval\"\r\n                          color=\"#fff\"\r\n                          height={24}\r\n                          width={24}\r\n                        />\r\n                      )}\r\n                      {contactFormProcessing === 0 && (\r\n                        <Input\r\n                          cursor=\"hand\"\r\n                          color=\"#fff\"\r\n                          weight=\"400\"\r\n                          size=\".9em\"\r\n                          spacing=\"0.2em\"\r\n                          type=\"submit\"\r\n                          value=\"Submit\"\r\n                        />\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </Item>\r\n              </Item>\r\n            </FormSubmision>\r\n          </Item>\r\n        </Item>\r\n      </Content>\r\n    </Section>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\n// CSS Styles\r\nconst DropdownStyled = styled(Dropdown)`\r\n  .Dropdown-control {\r\n    background-color: #000;\r\n    color: #fff;\r\n    padding: 12px 52px 12px 10px;\r\n    border: 1px solid ${props => props.theme.buttonBd};\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .Dropdown-placeholder {\r\n    text-transform: uppercase;\r\n    font-weight: 400;\r\n    letter-spacing: 0.2em;\r\n    font-size: 0.8em;\r\n\t\tpadding-left: 6px\r\n  }\r\n\r\n  .Dropdown-arrow {\r\n    top: 18px;\r\n    bottom: 0;\r\n    border-color: #fff transparent transparent;\r\n  }\r\n\r\n  .Dropdown-menu {\r\n    border: 1px solid #000;\r\n    box-shadow: none;\r\n    background-color: #000;\r\n    border-radius: 0px;\r\n    margin-top: -3px;\r\n    border-bottom-right-radius: 4px;\r\n    border-bottom-left-radius: 4px;\r\n  }\r\n\r\n  .Dropdown-option {\r\n    background-color: rgb(35 35 35);\r\n    color: #ffffff99;\r\n\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.2em;\r\n    font-size: 0.7em;\r\n    padding: 15px 20px;\r\n  }\r\n\r\n  .Dropdown-option:hover {\r\n    background-color: #000000;\r\n    color: #fff;\r\n  }\r\n`;\r\n\r\nconst ContactInput = styled(Input)`\r\n\tbackground: #FFFFFF;\r\n\tborder: 1px solid #D4D4D4;\r\n\tbox-sizing: border-box;\r\n\tborder-radius: 4px;\r\n`\r\n\r\nconst ContactTextArea = styled(TextField)`\r\n\tbackground: #FFFFFF;\r\n\tborder: 1px solid #D4D4D4;\r\n\tbox-sizing: border-box;\r\n\tborder-radius: 4px;\r\n`\r\n\r\nexport { SupportPage };","import React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\nimport { Navigate, Routes, Route, Link } from \"react-router-dom\";\r\n\r\nimport styled from \"styled-components\";\r\nimport { Item, ItemH, Span, H2, B, A } from \"components/SharedStyling\";\r\n\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.min.css\";\r\n\r\nimport InboxPage from \"pages/InboxPage\";\r\nimport SpamPage from \"pages/SpamPage\";\r\nimport ViewChannelsPage from \"pages/ViewChannelsPage\";\r\nimport ChannelDashboardPage from \"pages/ChannelDashboardPage\";\r\nimport ReceiveNotifsPage from \"pages/ReceiveNotifsPage\";\r\n\r\nimport GovernancePage from \"pages/GovernancePage\";\r\n\r\nimport YieldFarmingPage from \"pages/YieldFarmingPage\";\r\nimport NFTPage from \"pages/NFTPage\";\r\nimport AirdropPage from \"pages/AirdropPage\";\r\nimport ComingSoonPage from \"pages/ComingSoonPage\";\r\n\r\nimport {SupportPage} from \"pages/SupportPage\";\r\n\r\nimport GLOBALS from \"config/Globals\";\r\n\r\n// Create Header\r\nfunction MasterInterfacePage() {\r\n  // Render\r\n  return (\r\n    <Container>\r\n      <Interface>\r\n        <Routes>\r\n          <Route path=\"inbox\" element={<InboxPage />} />\r\n          <Route path=\"channels\" element={<ViewChannelsPage />} />\r\n          <Route path=\"dashboard\" element={<ChannelDashboardPage />} />\r\n          <Route path=\"spam\" element={<SpamPage />} />\r\n          <Route path=\"receive\" element={<ReceiveNotifsPage />} />\r\n\r\n          <Route path=\"govern\" element={<GovernancePage />} />\r\n\r\n          <Route path=\"yield\" element={<YieldFarmingPage />} />\r\n          <Route path=\"rockstar\" element={<NFTPage />} />\r\n          <Route path=\"gratitude\" element={<AirdropPage />} />\r\n          <Route path=\"comingsoon\" element={<ComingSoonPage />} />\r\n          <Route\r\n              path=\"/\"\r\n              element={<Navigate to=\"/channels\" />}\r\n          />\r\n          <Route path=\"support\" element={<SupportPage/>}/>\r\n        </Routes>\r\n      </Interface>\r\n\r\n      {/* For Channels Opt-in / Opt-out */}\r\n      <ToastContainer\r\n        position=\"bottom-right\"\r\n        autoClose={false}\r\n        newestOnTop\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\n// css style\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  flex-direction: column;\r\n  min-height: calc(100vh - ${GLOBALS.CONSTANTS.HEADER_HEIGHT}px - 20px - ${props => props.theme.interfaceTopPadding});\r\n  padding: ${props => props.theme.interfaceTopPadding} 20px 20px 20px;\r\n  align-items: stretch;\r\n`;\r\n\r\nconst Interface = styled(Item)`\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: stretch;\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 20px;\r\n  border: 1px solid ${props => props.theme.interfaceBorder};\r\n\r\n  margin: 15px 15px 15px 0px;\r\n  overflow: hidden;\r\n\r\n  @media (max-width: 992px) {\r\n    margin: 15px 0px;\r\n  }\r\n`\r\n\r\n// Export Default\r\nexport default MasterInterfacePage;\r\n","import React, {useState} from \"react\";\r\nimport ReactGA from \"react-ga\";\r\n\r\nimport { Web3Provider } from \"ethers/providers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { AbstractConnector } from \"@web3-react/abstract-connector\";\r\nimport { useEagerConnect, useInactiveListener } from \"hooks\";\r\nimport { injected, walletconnect, portis, ledger } from \"connectors\";\r\n\r\nimport styled, {useTheme} from \"styled-components\";\r\nimport { Item, ItemH, Span, H2, B, A } from \"components/SharedStyling\";\r\n\r\nimport Header from \"sections/Header\";\r\nimport Navigation from \"sections/Navigation\";\r\n\r\nimport NavigationContextProvider from \"contexts/NavigationContext\";\r\n\r\nimport MasterInterfacePage from \"pages/MasterInterfacePage\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\nimport GLOBALS from \"config/Globals\";\r\n\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\n// define the different type of connectors which we use\r\nconst web3Connectors = {\r\n  Injected: {\r\n    obj: injected,\r\n    logo: \"./svg/login/metamask.svg\",\r\n    title: \"MetaMask\",\r\n  },\r\n  WalletConnect: {\r\n    obj: walletconnect,\r\n    logo: \"./svg/login/walletconnect.svg\",\r\n    title: \"Wallet Connect\",\r\n  },\r\n  // Trezor: {obj: trezor, logo: './svg/login/trezor.svg', title: 'Trezor'},\r\n  Ledger: { obj: ledger, logo: \"./svg/login/ledger.svg\", title: \"Ledger\" },\r\n  Portis: { obj: portis, logo: \"./svg/login/portis.svg\", title: \"Portis\" },\r\n};\r\n\r\nexport default function App() {\r\n  const { connector, activate, active, error } = useWeb3React<Web3Provider>();\r\n  const [activatingConnector, setActivatingConnector] = React.useState<\r\n    AbstractConnector\r\n  >();\r\n  const [currentTime,setcurrentTime]=React.useState(0);\r\n\r\n    const themes = useTheme();\r\n\r\n\r\n  React.useEffect(()=>{\r\n    const now = Date.now()/ 1000;\r\n    setcurrentTime(now)\r\n  },[])\r\n  React.useEffect(() => {\r\n    if (activatingConnector && activatingConnector === connector) {\r\n      setActivatingConnector(undefined);\r\n    }\r\n  }, [activatingConnector, connector]);\r\n\r\n  // handle logic to eagerly connect to the injected ethereum provider, if it exists and has granted access already\r\n  const triedEager = useEagerConnect();\r\n  // handle logic to connect in reaction to certain events on the injected ethereum provider, if it exists\r\n  useInactiveListener(!triedEager || !!activatingConnector);\r\n\r\n  // Initialize GA\r\n  ReactGA.initialize(\"UA-165415629-5\");\r\n  ReactGA.pageview(\"/login\");\r\n  // Initialize GA\r\n\r\n  // Initialize Theme\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const toggleDarkMode = () => {\r\n    setDarkMode(!darkMode);\r\n  }\r\n\r\n\r\n  React.useEffect(() => {\r\n    const data = localStorage.getItem('theme')\r\n    if(data){\r\n      setDarkMode(JSON.parse(data))\r\n    }\r\n  },[])\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem('theme', JSON.stringify(darkMode))\r\n  })\r\n\r\n  React.useEffect(()=>{\r\n    document.body.style.backgroundColor = darkMode ? \"#000\" : \"#fff\";\r\n  },[darkMode])\r\n\r\n\r\n  React.useEffect(()=>{\r\n    window?.Olvy?.init({\r\n      organisation: \"epns\",\r\n    target: \"#olvy-target\",\r\n    type: \"sidebar\",\r\n    view: {\r\n      showSearch: false,\r\n      compact: false,\r\n      showHeader: true, // only applies when widget type is embed. you cannot hide header for modal and sidebar widgets\r\n      showUnreadIndicator: true,\r\n      unreadIndicatorColor: \"#cc1919\",\r\n      unreadIndicatorPosition: \"top-right\"\r\n    }\r\n    });\r\n    return function cleanup() {\r\n      window?.Olvy?.teardown();\r\n    };\r\n  });\r\n\r\n  return (\r\n    <ThemeProvider theme={darkMode ? themeDark : themeLight }>\r\n      <NavigationContextProvider>\r\n        <HeaderContainer>\r\n          <Header\r\n            isDarkMode={darkMode}\r\n            darkModeToggle={toggleDarkMode}\r\n          />  \r\n        </HeaderContainer>\r\n\r\n        <ParentContainer\r\n          headerHeight={GLOBALS.CONSTANTS.HEADER_HEIGHT}\r\n        >\r\n\r\n          {(active) && !error && (\r\n            <>\r\n              <LeftBarContainer\r\n                leftBarWidth={GLOBALS.CONSTANTS.LEFT_BAR_WIDTH}\r\n              >\r\n                <Navigation />\r\n              </LeftBarContainer>\r\n\r\n              <ContentContainer\r\n                leftBarWidth={GLOBALS.CONSTANTS.LEFT_BAR_WIDTH}\r\n              >\r\n                {/* Shared among all pages, load universal things here */}\r\n                <MasterInterfacePage />\r\n              </ContentContainer>\r\n            </>\r\n          )}\r\n\r\n          {(!active) && (\r\n            <Item\r\n              justify=\"flex-start\"\r\n            >\r\n              <ProviderLogo\r\n                src=\"./epnshomelogo.png\"\r\n                srcSet={\"./epnshomelogo@2x.png 2x, ./epnshomelogo@2x.png 3x\"}\r\n              />\r\n              \r\n              <Item\r\n                bg={darkMode ? themeDark : themeLight}\r\n                border=\"1px solid #ddd\"\r\n                padding=\"15px\"\r\n                radius=\"12px\"\r\n                flex=\"initial\"\r\n              >\r\n                <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n                  <Span bg=\"#e20880\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">\r\n                    Connect\r\n                  </Span>\r\n                  <Span weight=\"200\" color={darkMode ? themeDark : themeLight}> Your Wallet</Span>\r\n                </H2>\r\n\r\n                <ItemH maxWidth=\"700px\" align=\"stretch\">\r\n                  {Object.keys(web3Connectors).map((name) => {\r\n                    const currentConnector = web3Connectors[name].obj;\r\n                    const connected = currentConnector === connector;\r\n                    const disabled =\r\n                      !triedEager ||\r\n                      !!activatingConnector ||\r\n                      connected ||\r\n                      !!error;\r\n                    const image = web3Connectors[name].logo;\r\n                    const title = web3Connectors[name].title;\r\n\r\n                    return (\r\n                      <ProviderButton\r\n                        disabled={disabled}\r\n                        key={name}\r\n                        onClick={() => {\r\n                          setActivatingConnector(currentConnector);\r\n                          activate(currentConnector);\r\n                        }}\r\n                        border=\"#35c5f3\"\r\n                      >\r\n                        <ProviderImage src={image} />\r\n\r\n                        <Span\r\n                          spacing=\"0.1em\"\r\n                          textTransform=\"uppercase\"\r\n                          size=\"12px\"\r\n                          weight=\"600\"\r\n                          padding=\"20px\"\r\n                          background={darkMode ? themeDark : themeLight}\r\n                          color={darkMode ? themeDark : themeLight}\r\n\r\n                        >\r\n                          {title}\r\n                        </Span>\r\n                      </ProviderButton>\r\n                    );\r\n                  })}\r\n                </ItemH>\r\n              </Item>\r\n\r\n              <Span margin=\"10px\" size=\"14px\" color={darkMode ? themeDark.fontColor : themeLight.fontColor }>\r\n                By unlocking your wallet, <B>You agree</B> to our{\" \"}\r\n                <A href=\"https://epns.io/tos\" target=\"_blank\">\r\n                  Terms of Service\r\n                </A>{\" \"}\r\n                and our{\" \"}\r\n                <A href=\"https://epns.io/privacy\" target=\"_blank\">\r\n                  Privacy Policy\r\n                </A>\r\n                .\r\n              </Span>\r\n            </Item>\r\n          )}\r\n        </ParentContainer>\r\n      </NavigationContextProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// CSS STYLES\r\nconst HeaderContainer = styled.header`\r\n  left: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  position: fixed;\r\n  top: 0;\r\n  z-index: 999;\r\n`;\r\n\r\nconst ParentContainer = styled.div`\r\n  flex-wrap: wrap;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  flex: 1;\r\n  background: ${props => props.theme.backgroundBG};\r\n  margin: ${props => props.headerHeight}px 0px 0px 0px;\r\n  min-height: calc(100vh - ${GLOBALS.CONSTANTS.HEADER_HEIGHT}px);\r\n`;\r\n\r\nconst LeftBarContainer = styled.div`\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: ${props => props.leftBarWidth}px;\r\n  position: fixed;\r\n\r\n  @media (max-width: 992px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst ContentContainer = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  align-self: center;\r\n  width: 100%;\r\n\r\n\r\n\r\n  margin: 0px 0px 0px ${props => props.leftBarWidth}px;\r\n\r\n  @media (max-width: 992px) {\r\n    margin: 0px;\r\n  }\r\n`;\r\n\r\nconst ProviderLogo = styled.img`\r\n  width: 15vw;\r\n  align-self: center;\r\n  display: flex;\r\n  margin: 10px 20px 20px 20px;\r\n  min-width: 200px;\r\n`;\r\n\r\nconst ProviderButton = styled.button`\r\n  flex: 1 1 0;\r\n  min-width: 280px;\r\n  background: ${props => props.theme.mainBg};\r\n  outline: 0;ProviderButton\r\n\r\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\r\n  border-radius: 15px;\r\n  border: 1px solid rgb(225, 225, 225);\r\n\r\n  margin: 20px;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  display: flex;\r\n  flex-direction: row;\r\n  padding: 10px;\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    border: 1px solid ${(props) => props.border};\r\n  }\r\n  &:active {\r\n    opacity: 0.75;\r\n    cursor: pointer;\r\n    border: 1px solid ${(props) => props.border};\r\n  }\r\n`;\r\n\r\nconst ProviderImage = styled.img`\r\n  width: 32px;\r\n  max-height: 32px;\r\n  padding: 10px;\r\n`;","import {configureStore, combineReducers, getDefaultMiddleware} from '@reduxjs/toolkit';\r\nimport contractReducer from './slices/contractSlice';\r\nimport channelReducer from './slices/channelSlice';\r\nimport adminReducer from './slices/adminSlice';\r\nimport notificationReducer from './slices/notificationSlice';\r\nimport spamReducer from './slices/spamSlice';\r\n\r\nconst rootReducer = combineReducers({\r\n\tcontracts: contractReducer,\r\n    channels: channelReducer,\r\n    admin: adminReducer,\r\n\tnotifications: notificationReducer,\r\n\tspam: spamReducer\r\n});\r\n\r\nconst store = configureStore({\r\n\treducer: rootReducer,\r\n\tmiddleware: getDefaultMiddleware({\r\n\t\tserializableCheck: false,\r\n\t\timmutableCheck: false\r\n\t})\r\n});\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\r\n\r\nimport { ethers } from \"ethers\";\r\nimport { Provider } from \"react-redux\";\r\nimport { Web3ReactProvider } from \"@web3-react/core\";\r\nimport { ApolloClient, ApolloProvider, InMemoryCache } from \"@apollo/client\";\r\n\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport * as dotenv from \"dotenv\";\r\n\r\nimport App from \"./App\";\r\nimport store from \"./redux/store\";\r\nimport \"./index.css\";\r\n\r\n// enable environmental variables across the entire application\r\ndotenv.config();\r\n// You should replace this uri with your own and put it into a .env file\r\nconst client = new ApolloClient({\r\n  uri: \"https://api.thegraph.com/subgraphs/name/epnsproject/epnsstaging\",\r\n  cache: new InMemoryCache(),\r\n});\r\n\r\n/**\r\n * A utility function used to get the provider\r\n */\r\nfunction getLibrary(provider) {\r\n  const gottenProvider = new ethers.providers.Web3Provider(provider, \"any\");\r\n  // adding this is important to deal with changing networks\r\n  gottenProvider.on(\"network\", (_, oldNetwork) => {\r\n    if (oldNetwork) {\r\n      // when network has been changed, refresh the page\r\n      window.location.reload();\r\n    }\r\n  });\r\n  return gottenProvider;\r\n}\r\n\r\nReactDOM.render(\r\n  <HashRouter>\r\n    <Provider store={store}>\r\n      <ApolloProvider client={client}>\r\n        <Web3ReactProvider getLibrary={getLibrary}>\r\n          <App />\r\n        </Web3ReactProvider>\r\n      </ApolloProvider>\r\n    </Provider>\r\n  </HashRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import EthCrypto from 'eth-crypto';\r\nimport {encrypt, decrypt} from 'eccrypto';\r\nimport { publicKeyConvert, publicKeyVerify } from 'secp256k1-v4';\r\n\r\nvar CryptoJS = require(\"crypto-js\");\r\n\r\nconst CryptoHelper = {\r\n  // To Encrypt with AES\r\n  encryptWithAES: function(message, key) {\r\n    return CryptoJS.AES.encrypt(message, key).toString();\r\n  },\r\n  // To Decrypt with AES\r\n  decryptWithAES: function(message, key) {\r\n    let bytes  = CryptoJS.AES.decrypt(message, key);\r\n    return bytes.toString(CryptoJS.enc.Utf8);\r\n  },\r\n  // To Form Encryted Secret, no more than 15 characters supported\r\n  encryptWithECIES: async function(message, publicKey) {\r\n    const compressedKey = EthCrypto.publicKey.compress(publicKey);\r\n\r\n    const encryptedSecret = await this.encryptWithPublicKey(message, compressedKey);\r\n\r\n    // Not using it since sqlite2 has some error with this\r\n    // const compressedEncryptedSecret = EthCrypto.hex.compress(encryptedSecret);\r\n\r\n    return encryptedSecret;\r\n  },\r\n  // To Form Decrypted Secret, no more than 15 characters supported\r\n  decryptWithECIES: async function(message, privateKey) {\r\n    // Message is always compressed, not using because sqlite2 has some error with this\r\n    //const uncompressedMessage = EthCrypto.hex.decompress(message).substr(2); // to remove 0x\r\n\r\n    return await this.decryptWithPrivateKey(message, privateKey);\r\n  },\r\n  // Encryption with public key\r\n  encryptWithPublicKey: async function(message, publicKey) {\r\n    // Convert compressed public key, starts with 03 or 04\r\n    const pubKeyUint8Array = Uint8Array.from(\r\n      new Buffer(publicKey, 'hex')\r\n    );\r\n    //console.log(\"[ENCRYPTION] Public Key Uint8Array: \" + pubKeyUint8Array);\r\n\r\n    const convertedKeyAsUint8Array = publicKeyConvert(pubKeyUint8Array, false);\r\n    //console.log(\"[ENCRYPTION] Public Key Converted: \" + convertedKeyAsUint8Array);\r\n\r\n    const convertedPublicKeyHex = new Buffer(convertedKeyAsUint8Array);\r\n    //console.log(\"[ENCRYPTION] Converted Public Key Buffer: \" + convertedPublicKeyHex);\r\n\r\n    const pubKey = new Buffer(convertedPublicKeyHex, 'hex');\r\n    //console.log(\"[ENCRYPTION] pubkey getting sentout for encrypt: \" + pubKey);\r\n\r\n    return encrypt(\r\n        pubKey,\r\n        Buffer(message)\r\n    ).then(encryptedBuffers => {\r\n      const cipher = {\r\n          iv: encryptedBuffers.iv.toString('hex'),\r\n          ephemPublicKey: encryptedBuffers.ephemPublicKey.toString('hex'),\r\n          ciphertext: encryptedBuffers.ciphertext.toString('hex'),\r\n          mac: encryptedBuffers.mac.toString('hex')\r\n      };\r\n      // use compressed key because it's smaller\r\n      // const compressedKey = new Buffer.from(publicKeyConvert(Web3Helper.getUint8ArrayFromHexStr(cipher.ephemPublicKey), true)).toString('hex')\r\n      const input = Uint8Array.from(\r\n        new Buffer(cipher.ephemPublicKey, 'hex')\r\n      );\r\n      const keyConvert = publicKeyConvert(input, true)\r\n      // console.log(\"[ENCRYPTION] Coverted key: \" + keyConvert);\r\n\r\n      const keyConvertBuffer = new Buffer(keyConvert);\r\n      // console.log(\"[ENCRYPTION] Coverted key in buffer : \" + keyConvertBuffer);\r\n      // console.log(keyConvertBuffer);\r\n\r\n      //console.log(keyConvert);\r\n      const compressedKey = keyConvertBuffer.toString('hex')\r\n      // console.log(\"[ENCRYPTION] Compressed key in buffer : \");\r\n      // console.log(compressedKey);\r\n\r\n      const ret = Buffer.concat([\r\n        new Buffer(cipher.iv, 'hex'), // 16bit\r\n        new Buffer(compressedKey, 'hex'), // 33bit\r\n        new Buffer(cipher.mac, 'hex'), // 32bit\r\n        new Buffer(cipher.ciphertext, 'hex') // var bit\r\n      ]).toString('hex')\r\n\r\n      return ret\r\n    });\r\n  },\r\n  // Decryption with public key\r\n  decryptWithPrivateKey: async function(message, privateKey) {\r\n    let encrypted = message;\r\n    const buf = new Buffer(encrypted, 'hex');\r\n    // console.log(\"[DECRYPTION] Buffer Passed: \" + buf);\r\n\r\n    encrypted = {\r\n      iv: buf.toString('hex', 0, 16),\r\n      ephemPublicKey: buf.toString('hex', 16, 49),\r\n      mac: buf.toString('hex', 49, 81),\r\n      ciphertext: buf.toString('hex', 81, buf.length)\r\n    };\r\n    // decompress publicKey\r\n    // encrypted.ephemPublicKey = new Buffer.from(publicKeyConvert(Web3Helper.getUint8ArrayFromHexStr(encrypted.ephemPublicKey), true)).toString('hex')\r\n    const input = Uint8Array.from(new Buffer(encrypted.ephemPublicKey, 'hex'));\r\n    const keyConvert = publicKeyConvert(input, false)\r\n    // console.log(\"[DECRYPTION] Coverted key: \" + keyConvert);\r\n\r\n    const keyConvertBuffer = new Buffer(keyConvert);\r\n    // console.log(\"[DECRYPTION] Coverted key in buffer : \" + keyConvertBuffer);\r\n    // console.log(keyConvertBuffer);\r\n\r\n    //console.log(keyConvert);\r\n    const uncompressedKey = keyConvertBuffer.toString('hex')\r\n    // console.log(\"[DECRYPTION] Uncompressed key in buffer : \");\r\n    // console.log(uncompressedKey);\r\n\r\n    encrypted.ephemPublicKey = uncompressedKey;\r\n    const twoStripped = privateKey.substring(2)\r\n\r\n    const encryptedBuffer = {\r\n      iv: new Buffer(encrypted.iv, 'hex'),\r\n      ephemPublicKey: new Buffer(encrypted.ephemPublicKey, 'hex'),\r\n      ciphertext: new Buffer(encrypted.ciphertext, 'hex'),\r\n      mac: new Buffer(encrypted.mac, 'hex')\r\n    };\r\n\r\n    return decrypt(\r\n      new Buffer(twoStripped, 'hex'),\r\n      encryptedBuffer\r\n    ).then(decryptedBuffer => decryptedBuffer.toString());\r\n  },\r\n  // Testing of Encryption and Decryption from Public to Private key\r\n  encryptionDecryptionPublicToPrivateTest: async function(privateKey) {\r\n    const startTime = new Date();\r\n    console.log(\"[ENCRYPTION / DECRYPTION TEST STARTED] - \" + startTime);\r\n\r\n    const publicKey = EthCrypto.publicKeyByPrivateKey(privateKey);\r\n    const compressedKey = EthCrypto.publicKey.compress(publicKey); // is String\r\n    //console.log(compressedKey);\r\n\r\n    // const bytesCompKey = Uint8Array.from(compressedKey);\r\n    //console.log(bytesCompKey);\r\n\r\n    const msgToEncrypt = \"PartialStringAS\";\r\n    const msg = await this.encryptWithPublicKey(msgToEncrypt, compressedKey);\r\n    console.log(\"Encryped Message With compressed public key:\" + msg);\r\n\r\n    const encryptionTime = new Date().getTime() - startTime.getTime();\r\n    console.log(\"[ENCRYPTION / DECRYPTION ENCRYPTION DONE] - \" + encryptionTime / 1000 + \" secs\");\r\n\r\n    // Decrypt this message\r\n    const decryptMsg = await this.decryptWithPrivateKey(msg, privateKey);\r\n    console.log(\"[ENCRYPTION / DECRYPTION DECRYPTED MESSAGE] - '\" + decryptMsg + \"'\");\r\n\r\n    const decryptionTime = new Date().getTime() - startTime.getTime() - encryptionTime;\r\n    console.log(\"[ENCRYPTION / DECRYPTION DECRYPTION DONE] - \" + decryptionTime / 1000 + \" secs\");\r\n  },\r\n  // To output messge payload if required\r\n  outputMsgPayload: async function(secret, subject, message, calltoaction, imageurl, pkey) {\r\n    // Output AES\r\n    console.log(\"[AES ENCRYTED FORMAT (\" + new Date() + \")\");\r\n    console.log(\"---------------------\");\r\n    console.log(\"secret --> \");\r\n    const secretEncrypted = await this.encryptWithECIES(secret, pkey);\r\n    const asubE = this.encryptWithAES(subject, secret);\r\n    const amsgE = this.encryptWithAES(message, secret);\r\n    const actaE = this.encryptWithAES(calltoaction, secret);\r\n    const aimgE = this.encryptWithAES(imageurl, secret);\r\n\r\n    console.log(secretEncrypted);\r\n    console.log(\"asub --> \");\r\n    console.log(asubE);\r\n    console.log(\"amsg --> \");\r\n    console.log(amsgE);\r\n    console.log(\"acta --> \");\r\n    console.log(actaE);\r\n    console.log(\"aimg --> \");\r\n    console.log(aimgE);\r\n    console.log(\"decrypted secret --> \");\r\n    console.log(await this.decryptWithECIES(secretEncrypted, pkey));\r\n    console.log(\"decrypted asub --> \");\r\n    console.log(this.decryptWithAES(asubE, secret));\r\n    console.log(\"decrypted amsg --> \");\r\n    console.log(this.decryptWithAES(amsgE, secret));\r\n    console.log(\"decrypted acta --> \");\r\n    console.log(this.decryptWithAES(actaE, secret));\r\n    console.log(\"decrypted aimg --> \");\r\n    console.log(this.decryptWithAES(aimgE, secret));\r\n  },\r\n  makeid: function (length) {\r\n     var result           = '[' + new Date().toISOString() + '] ';\r\n     var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n     var charactersLength = characters.length;\r\n     for ( var i = 0; i < length; i++ ) {\r\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n     }\r\n     return result;\r\n  }\r\n};\r\n\r\nexport default CryptoHelper;\r\n","// Define what props.theme will look like\r\nconst themeLight = {\r\n  scheme : \"light\",\r\n  // Section Theme\r\n  sectionBorderBg: 'transparent',\r\n\r\n  // Header Theme\r\n  headerBg: '#fff',\r\n  headerTagBg: '#000',\r\n  headerTagFg: '#fff',\r\n\r\n  headerIconsBg: '#000',\r\n\r\n  // Nav Menu \r\n  navMenuBg: '#00000066',\r\n\r\n  // Left Bar Theme\r\n  leftBarLoaderBg: '#ddd',\r\n\r\n  leftBarBg: '#fff',\r\n  leftBarButtonBg: '#fff',\r\n  leftBarHoverColor: '#5c5c5c',\r\n  leftBarFontColor: '#000',\r\n\r\n  leftBarSocialBg: '#eee',\r\n  leftBarSocialIconBg: '#ddd',\r\n\r\n  // Interface Theme\r\n  interfaceTopPadding: '0px',\r\n  interfaceBorder: '#f1f1f1',\r\n\r\n  interfaceSkeleton: '#eee',\r\n\r\n  // Main Theme\r\n  backgroundBG: '#fff',\r\n  mainBg: '#fff',\r\n  fontColor: '#000',\r\n  scrollBg: '#eee',\r\n\r\n  // View Channels Theme\r\n\r\n  // -- View Channel Header Theme\r\n  // -- -- Search Bar\r\n  viewChannelSearchBg: '#fff',\r\n  viewChannelSearchBorder: '#f1f1f1',\r\n  viewChannelSearchText: '#000',\r\n  viewChannelSearchIcon: '#333',\r\n\r\n  // -- -- Faucet Theme\r\n  faucetBg: '#fff',\r\n  faucetBorder: '#ededed',\r\n  faucetIcon: '#674c9f',\r\n  faucetHeader: '#e20880',\r\n\r\n  // -- View Channel Main Theme\r\n  viewChannelOuterBorder: '#ededed',\r\n  viewChannelLink: '#e20880',\r\n  viewChannelVerifiedBadge: '#ec008c',\r\n  viewChannelIconBorder: '#fafafa',\r\n  viewChannelSecondaryBG: '#35c5f3',\r\n  viewChannelSecondaryIcon: '#ccc',\r\n\r\n\r\n  yieldBg: \"#f3f3f3\",\r\n\r\n  pushPriceBg: \"#000\",\r\n\r\n  greyText: \"#818589\",\r\n\r\n  color: \"#000\",\r\n\r\n  channelBg: \"#fafafa\",\r\n\r\n  button: \"#000\",\r\n  \r\n  buttonColor: \"#fff\",\r\n\r\n  createColor: \"#808080\",\r\n\r\n};\r\n\r\nconst themeDark = {\r\n  scheme : \"dark\",\r\n  // Section Theme\r\n  sectionBorderBg: '#333',\r\n\r\n  // Header Theme\r\n  headerBg: '#000',\r\n  headerTagBg: '#fff',\r\n  headerTagFg: '#000',\r\n\r\n  headerIconsBg: '#fff',\r\n\r\n  // Nav Menu \r\n  navMenuBg: '#000',\r\n\r\n  // Left Bar Theme\r\n  leftBarLoaderBg: '#ddd',\r\n\r\n  leftBarBg: '#000',\r\n  leftBarButtonBg: '#000',\r\n  leftBarHoverColor: '#fff',\r\n  leftBarFontColor: '#fff',\r\n\r\n  leftBarSocialBg: '#222',\r\n  leftBarSocialIconBg: '#000',\r\n\r\n  // Interface Theme\r\n  interfaceTopPadding: '20px',\r\n  interfaceBorder: '#333',\r\n  interfaceSkeleton: '#414141',\r\n\r\n  // Main Theme\r\n  backgroundBG: '#222',\r\n  mainBg: '#000',\r\n  fontColor: '#fff',\r\n  scrollBg: '#333',\r\n\r\n  // View Channels Theme\r\n  // -- View Channel Header Theme\r\n  // -- -- Search Bar\r\n  viewChannelSearchBg: '#222',\r\n  viewChannelSearchBorder: '#333',\r\n  viewChannelSearchText: '#fff',\r\n  viewChannelSearchIcon: '#414141',\r\n\r\n  // -- -- Faucet Theme\r\n  faucetBg: '#222',\r\n  faucetBorder: '#333',\r\n  faucetIcon: '#414141',\r\n  faucetHeader: '#414141',\r\n\r\n  // -- View Channel Main Theme\r\n  viewChannelOuterBorder: '#444',\r\n  viewChannelLink: '#35c5f3',\r\n  viewChannelVerifiedBadge: '#ccc',\r\n  viewChannelIconBorder: '#222',\r\n  viewChannelSecondaryBG: '#222',\r\n  viewChannelSecondaryIcon: '#414141',\r\n\r\n  color: \"#fff\",\r\n\r\n  yieldBg: \"#ddd\",\r\n\r\n  questionBg: \"#000\",\r\n\r\n  pushPriceBg: \"teal\",\r\n\r\n  greyText: \"#818589\",\r\n\r\n  channelBg: \"#000\",\r\n\r\n  button: \"#fff\",\r\n  \r\n  buttonColor: \"#000\",\r\n\r\n  buttonBd: \"1px solid #fff\",\r\n\r\n  createColor: \"#fff\",\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = {\r\n    themeLight: themeLight,\r\n    themeDark: themeDark\r\n}\r\n","import styled, { css } from 'styled-components';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const Section = styled.section`\r\n  display: flex;\r\n  align-self: stretch;\r\n  justify-content: center;\r\n  align-items: ${props => props.align || 'initial'};\r\n  flex-direction: ${props => props.direction || 'column'};\r\n  background: ${props => props.theme || 'transparent'};\r\n  background: ${props => props.gradient || 'undefined'};\r\n  margin: ${props => props.margin || '0px'};\r\n  padding: ${props => props.padding || '0px'};\r\n  overflow: ${props => props.overflow || 'initial'};\r\n  flex: 1;\r\n  position: relative;\r\n`\r\n\r\nexport const SectionFS = styled(Section)`\r\n  min-height: 100vh;\r\n`\r\n\r\nexport const SectionFSHero = styled(Section)`\r\n  min-height: 100vh;\r\n  background: rgb(31,23,47);\r\n  background: linear-gradient(283deg, rgba(31,23,47,1) 0%, rgba(62,9,40,1) 45%, rgba(17,58,72,1) 100%);\r\n`\r\n\r\nexport const SectionHero = styled(Section)`\r\n  background: rgb(31,23,47);\r\n  background: linear-gradient(283deg, rgba(31,23,47,1) 0%, rgba(62,9,40,1) 45%, rgba(17,58,72,1) 100%);\r\n`\r\n\r\nexport const Content = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: ${props => props.padding || \"40px 0px\"};\r\n  background: ${props => props.theme || 'transparent'};\r\n  background: ${props => props.gradient || 'undefined'};\r\n  position: relative;\r\n`\r\n\r\nexport const ItemBreak = styled.div`\r\n  flex-basis: 100%;\r\n`\r\n\r\nexport const Item = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-wrap: ${props => props.wrap || 'wrap'};\r\n  position: ${props => props.position || 'relative'};\r\n  justify-content: center;\r\n  background: ${props => props.bg || 'transparent'};\r\n  flex: ${props => props.flex || '1'};\r\n  flex-direction: ${props => props.direction || 'column'};\r\n  flex-basis: ${props => props.flexBasis || 'auto'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  margin: ${props => props.margin || '0px'};\r\n  min-width: ${props => props.minWidth || 'auto'};\r\n  max-width: ${props => props.maxWidth || 'initial'};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  text-align: ${props => props.textAlign || \"inherit\"};\r\n  filter: ${props => props.filter || \"none\"};\r\n\r\n  top: ${props => props.top || 'auto'};\r\n  bottom: ${props => props.bottom || 'auto'};\r\n  left: ${props => props.left || 'auto'};\r\n  right: ${props => props.right || 'auto'};\r\n\r\n  width: ${props => props.width || \"auto\" };\r\n  height: ${props => props.height || \"auto\" };\r\n\r\n  border: ${props => props.border || \"none\"};\r\n\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  overflow: ${props => props.overflow || \"initial\"};\r\n\r\n  z-index: ${props => props.zIndex || \"auto\"};\r\n\r\n  &:hover & {\r\n    filter: ${props => (props.filterHover ? props.filterHover : (props.hover ? props.hover : \"none\")) || \"none\"};\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    align-items: ${props => (props.tabletAlign ? props.tabletAlign : (props.align ? props.align : \"center\")) || \"center\"};\r\n    text-align: ${props => (props.tabletTextAlign ? props.tabletTextAlign : (props.textAlign ? props.textAlign : \"inherit\")) || \"inherit\"};\r\n  }\r\n\r\n  ${ItemBreak} {\r\n    width: 0;\r\n  }\r\n`\r\n\r\nexport const ItemH = styled(Item)`\r\n  flex-direction: row;\r\n  flex: ${props => props.flex || '1'};\r\n\r\n  ${ItemBreak} {\r\n    width: auto;\r\n    height: 0;\r\n  }\r\n`\r\n\r\nexport const WaveOuter = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  left: 0;\r\n  bottom: ${props => props.bottom || '-70px'};\r\n  top: ${props => props.top || 'auto'};\r\n  transform: ${props => props.transform || 'initial'};\r\n`;\r\n\r\nexport const WaveInner = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  transform: ${props => props.transform || 'initial'};\r\n`;\r\n\r\nexport const Arc = styled.div`\r\n  position: absolute;\r\n\toverflow: hidden;\r\n\twidth: 100%;\r\n\theight: 300px;\r\n\r\n  bottom: ${props => props.bottom || 'auto'};\r\n  top: ${props => props.top || 'auto'};\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n  \twidth: 300%;\r\n  \theight: 300%;\r\n  \ttop: -25%;\r\n  \tleft: -100%;\r\n\r\n\r\n    ${ props => props.arcRGB && css`\r\n      \tbackground: radial-gradient(ellipse at center, ${props.arcRGB}00 0%, ${props.arcRGB}00 50%, ${props.arcRGB}ff 50%, ${props.arcRGB}ff 100%);\r\n    `};\r\n  }\r\n`\r\n\r\nexport const H1 = styled.h1`\r\n  @media (max-width: 480px) {\r\n    font-size: 2.1rem;\r\n  }\r\n`\r\n\r\nexport const H2 = styled.h2`\r\n  color: ${props => props.color || '#000'};\r\n  font-weight: ${props => props.weight || 600};\r\n  font-size: ${props => props.size || \"2rem\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  margin: ${props => props.margin || \"20px 0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"inherit\"};\r\n  font-family: ${props => props.family || \"'Source Sans Pro', Helvetica, sans-serif\"};\r\n  text-align: ${props => props.textAlign || \"inherit\"};\r\n`\r\n\r\nexport const H3 = styled.h3`\r\n  color: ${props => props.color || 'rgb(0 0 0 / 0.5)'};\r\n  font-weight: ${props => props.weight || 300};\r\n  font-size: ${props => props.size || \"1rem\"};\r\n  text-transform: ${props => props.textTransform || \"uppercase\"};\r\n  margin: ${props => props.margin || \"-15px 0px 20px 0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"0.1em\"};\r\n  font-family: ${props => props.family || \"'Source Sans Pro', Helvetica, sans-serif\"};\r\n  text-align: ${props => props.textAlign || \"inherit\"};\r\n  max-width: ${props => props.maxWidth || 'initial'};\r\n`\r\n\r\nexport const Image = styled.img`\r\n  width: 100%;\r\n  height: auto;\r\n  display: flex;\r\n`\r\n\r\nexport const P = styled.p`\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n\r\n  color: ${props => props.color || '#000'};\r\n  background: ${props => props.bg || 'transparent'};\r\n  font-weight: ${props => props.weight || 300};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  margin: ${props => props.margin || \"20px 0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"inherit\"};\r\n  text-align: ${props => props.textAlign || \"initial\"};\r\n`\r\n\r\nexport const Para = styled(P)`\r\n  font-weight: ${props => props.weight || 300};\r\n  letter-spacing: ${props => props.spacing || \"0.02em\"};\r\n  font-size: ${props => props.size || \"1.1em\"};\r\n  color: ${props => props.color || \"#000000ee\"};\r\n`\r\n\r\nexport const Span = styled.span`\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n\r\n  color: ${props => props.color || '#000'};\r\n  background: ${props => props.bg || 'transparent'};\r\n  font-weight: ${props => props.weight || 300};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  margin: ${props => props.margin || \"0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"inherit\"};\r\n  text-align: ${props => props.textAlign || \"initial\"};\r\n\r\n  position: ${props => props.pos || 'initial'};\r\n  right: ${props => props.right || 'auto'};\r\n  left: ${props => props.left || 'auto'};\r\n  bottom: ${props => props.bottom || 'auto'};\r\n  top: ${props => props.top || 'auto'};\r\n\r\n  z-index: ${props => props.z || 'auto'};\r\n`\r\n\r\nexport const B = styled.span`\r\n  color: ${props => props.color || 'inherit'};\r\n  font-weight: ${props => props.weight || 'bold'};\r\n`\r\n\r\nexport const UL = styled.ul`\r\n\r\n`\r\n\r\nexport const LI = styled.li`\r\n  margin: 10px 0px;\r\n`\r\n\r\nexport const Anchor = styled.a`\r\n  display: flex;\r\n  flex-direction: ${props => props.direction || 'row'};\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  font-weight: ${props => props.weight || 400};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  color: ${props => props.color || \"#fff\"};\r\n  background: ${props => props.bg || \"transparent\"};\r\n  margin: ${props => props.margin || \"0\"};\r\n  padding: ${props => props.padding || \"10px 15px\"};\r\n  letter-spacing: ${props => props.spacing || \"0.2em\"};\r\n  border: ${props => props.border || \"none\"};\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  width: ${props => props.width || \"initial\" };\r\n\r\n  position: relative;\r\n  text-decoration: none;\r\n  overflow: ${props => props.overflow || \"hidden\"};\r\n  z-index: 3;\r\n\r\n  filter: ${props => props.filter || \"none\"};\r\n\r\n  cursor: pointer;\r\n  pointer: hand;\r\n\r\n  &:hover & {\r\n    filter: ${props => (props.filterHover ? props.filterHover : (props.hover ? props.hover : \"none\")) || \"none\"};\r\n  }\r\n\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.hover || (props.bg ? props.bg : \"transparent\")};\r\n    display: none;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.hoverBG || \"#000\"};\r\n    opacity: 0;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:hover:before {\r\n    display: block;\r\n  }\r\n\r\n  &:hover:after {\r\n    opacity: 0.08;\r\n  }\r\n  &:active:after {\r\n    opacity: 0.15;\r\n  }\r\n`\r\n\r\nexport const RouterLink = styled(Link)`\r\n  display: flex;\r\n  flex-direction: ${props => props.direction || 'row'};\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  font-weight: ${props => props.weight || 400};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  color: ${props => props.color || \"#fff\"};\r\n  background: ${props => props.bg || \"transparent\"};\r\n  margin: ${props => props.margin || \"0\"};\r\n  padding: ${props => props.padding || \"10px 15px\"};\r\n  letter-spacing: ${props => props.spacing || \"0.2em\"};\r\n  border: ${props => props.border || \"none\"};\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  width: ${props => props.width || \"initial\" };\r\n\r\n  position: relative;\r\n  text-decoration: none;\r\n  overflow: ${props => props.overflow || \"hidden\"};\r\n  z-index: 3;\r\n\r\n  filter: ${props => props.filter || \"none\"};\r\n\r\n  cursor: pointer;\r\n  pointer: hand;\r\n\r\n  &:hover & {\r\n    filter: ${props => (props.filterHover ? props.filterHover : (props.hover ? props.hover : \"none\")) || \"none\"};\r\n  }\r\n\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.hover || (props.bg ? props.bg : \"transparent\")};\r\n    display: none;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.hoverBG || \"#000\"};\r\n    opacity: 0;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:hover:before {\r\n    display: block;\r\n  }\r\n\r\n  &:hover:after {\r\n    opacity: 0.08;\r\n  }\r\n  &:active:after {\r\n    opacity: 0.15;\r\n  }\r\n`\r\n\r\nexport const A = styled(Anchor)`\r\n  display: inline;\r\n  color: #e1087f;\r\n  background: transparent;\r\n  padding: 0px;\r\n  letter-spacing: inherit;\r\n  text-transform: initial;\r\n`\r\n\r\nexport const Button = styled.button`\r\n  display: flex;\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  font-weight: ${props => props.weight || 400};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  color: ${props => props.color || \"#fff\"};\r\n  background: ${props => props.bg || \"tranparent\"};\r\n  margin: ${props => props.margin || \"0\"};\r\n  padding: ${props => props.padding || \"10px 15px\"};\r\n  letter-spacing: ${props => props.spacing || \"initial\"};\r\n  border: ${props => props.border || \"none\"};\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  text-transform: ${props => props.textTransform || \"initial\"};\r\n\r\n  position: relative;\r\n  text-decoration: none;\r\n  overflow: ${props => props.overflow || \"hidden\"};\r\n  z-index: 3;\r\n\r\n  cursor: pointer;\r\n  pointer: hand;\r\n\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.hover || (props.bg ? props.bg : \"transparent\")};\r\n    display: none;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${props => props.hoverBG || \"#000\"};\r\n    opacity: 0;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:hover:before {\r\n    display: block;\r\n  }\r\n\r\n  &:hover:after {\r\n    opacity: 0.08;\r\n  }\r\n  &:active:after {\r\n    opacity: 0.15;\r\n  }\r\n\r\n  & > div {\r\n    display: flex;\r\n  }\r\n`\r\n\r\nexport const Showoff = styled.div`\r\n  position: absolute;\r\n  right: ${props => props.right || 'auto'};\r\n  left: ${props => props.left || 'auto'};\r\n  bottom: ${props => props.bottom || 'auto'};\r\n  top: ${props => props.top || 'auto'};\r\n  transform: ${props => props.transform || 'initial'};\r\n  opacity: ${props => props.opacity || 'initial'};\r\n\r\n  @media (max-width: 768px) {\r\n    align-items: ${props => (props.tabletAlign ? props.tabletAlign : (props.align ? props.align : \"center\")) || \"center\"};\r\n\r\n    right: ${props => (props.tabletRight ? props.tabletRight : (props.right ? props.right : \"auto\")) || \"auto\"};\r\n    left: ${props => (props.tabletLeft ? props.tabletLeft : (props.left ? props.left : \"auto\")) || \"auto\"};\r\n    top: ${props => (props.tabletTop ? props.tabletTop : (props.top ? props.top : \"auto\")) || \"auto\"};\r\n    bottom: ${props => (props.tabletBottom ? props.tabletBottom : (props.bottom ? props.bottom : \"auto\")) || \"auto\"};\r\n\r\n    transform: ${props => (props.tabletTransform ? props.tabletTransform : (props.transform ? props.transform : \"auto\")) || \"auto\"};\r\n\r\n    opacity: ${props => (props.tabletOpacity ? props.tabletOpacity : (props.opacity ? props.opacity : \"auto\")) || \"initial\"};\r\n  }\r\n`\r\n\r\nexport const FormSubmision = styled.form`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  flex-direction: column;\r\n\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  font-weight: ${props => props.weight || 400};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  color: ${props => props.color || \"#fff\"};\r\n  background: ${props => props.bg || \"transparent\"};\r\n  margin: ${props => props.margin || \"0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  border: ${props => props.border || \"none\"};\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  position: relative;\r\n`\r\n\r\nexport const Input = styled.input`\r\n  display: ${props => props.display || 'flex'};\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  font-weight: ${props => props.weight || 300};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  color: ${props => props.color || \"#000\"};\r\n  background: ${props => props.bg || \"transparent\"};\r\n  margin: ${props => props.margin || \"0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"inherit\"};\r\n  border: ${props => props.border || \"none\"};\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  outline: ${props => props.outline || \"none\"};\r\n  overflow: ${props => props.overflow || \"hidden\"};\r\n  position: relative;\r\n\r\n  cursor: ${props => props.cursor || \"initial\"};\r\n  pointer: ${props => props.hand || \"initial\"};\r\n\r\n  &:focus + span {\r\n    opacity: 0;\r\n\r\n    -webkit-transition: all 0.2s ease-in-out;\r\n    -moz-transition: all 0.2s ease-in-out;\r\n    -o-transition: all 0.2s ease-in-out;\r\n    transition: all 0.2s ease-in-out;\r\n  }\r\n`\r\n\r\nexport const TextField = styled.textarea`\r\n  display: flex;\r\n  flex: ${props => props.flex || 'initial'};\r\n  align-self: ${props => props.self || 'auto'};\r\n  align-items: ${props => props.align || 'center'};\r\n  justify-content: ${props => props.justify || 'center'};\r\n  font-weight: ${props => props.weight || 300};\r\n  font-size: ${props => props.size || \"inherit\"};\r\n  text-transform: ${props => props.textTransform || \"inherit\"};\r\n  color: ${props => props.color || \"#000\"};\r\n  background: ${props => props.bg || \"transparent\"};\r\n  margin: ${props => props.margin || \"0px\"};\r\n  padding: ${props => props.padding || \"0px\"};\r\n  letter-spacing: ${props => props.spacing || \"inherit\"};\r\n  border: ${props => props.border || \"none\"};\r\n  border-radius: ${props => props.radius || \"0px\"};\r\n  outline: ${props => props.outline || \"none\"};\r\n  overflow: ${props => props.overflow || \"hidden\"};\r\n  position: relative;\r\n  resize: vertical;\r\n\r\n  &:focus + span {\r\n    opacity: 0;\r\n\r\n    -webkit-transition: all 0.2s ease-in-out;\r\n    -moz-transition: all 0.2s ease-in-out;\r\n    -o-transition: all 0.2s ease-in-out;\r\n    transition: all 0.2s ease-in-out;\r\n  }\r\n`\r\n","import React, { useState } from \"react\";\r\nimport Select from \"react-select\";\r\nimport styled, { css, useTheme } from \"styled-components\";\r\nimport {\r\n  Section,\r\n  Content,\r\n  Item,\r\n  ItemH,\r\n  ItemBreak,\r\n  H1,\r\n  H2,\r\n  H3,\r\n  Image,\r\n  P,\r\n  Span,\r\n  Anchor,\r\n  Button,\r\n  Showoff,\r\n  FormSubmision,\r\n  Input,\r\n  TextField,\r\n} from \"components/SharedStyling\";\r\n\r\nimport { FiLink } from \"react-icons/fi\";\r\n\r\nimport \"react-dropzone-uploader/dist/styles.css\";\r\nimport Dropzone from \"react-dropzone-uploader\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\n\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport { useWeb3React, UnsupportedChainIdError } from \"@web3-react/core\";\r\n\r\nimport {ThemeProvider} from \"styled-components\";\r\n\r\nimport { themeLight, themeDark } from \"config/Themization\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nconst ethers = require(\"ethers\");\r\n\r\nconst ipfs = require(\"ipfs-api\")();\r\n\r\nconst minStakeFees = 50;\r\nconst ALIAS_CHAINS = [{ value: \"POLYGON_TEST_MUMBAI:80001\", label: \"Polygon\" }];\r\n\r\n// Create Header\r\nfunction CreateChannel() {\r\n  const { active, error, account, library, chainId } = useWeb3React();\r\n\r\n  const themes = useTheme();\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const [processing, setProcessing] = React.useState(0);\r\n  const [processingInfo, setProcessingInfo] = React.useState(\"\");\r\n\r\n  const [uploadDone, setUploadDone] = React.useState(false);\r\n  const [stakeFeesChoosen, setStakeFeesChoosen] = React.useState(false);\r\n  const [channelInfoDone, setChannelInfoDone] = React.useState(false);\r\n\r\n  const [chainDetails, setChainDetails] = React.useState(\"\");\r\n  const [channelName, setChannelName] = React.useState(\"\");\r\n  const [channelAlias, setChannelAlias] = React.useState(\"\");\r\n  const [channelInfo, setChannelInfo] = React.useState(\"\");\r\n  const [channelURL, setChannelURL] = React.useState(\"\");\r\n  const [channelFile, setChannelFile] = React.useState(undefined);\r\n  const [channelStakeFees, setChannelStakeFees] = React.useState(minStakeFees);\r\n\r\n  const [stepFlow, setStepFlow] = React.useState(1);\r\n\r\n  React.useEffect(() => {});\r\n\r\n  // called every time a file's `status` changes\r\n  const handleChangeStatus = ({ meta, file }, status) => {\r\n    console.log(status, meta, file);\r\n  };\r\n\r\n  const onDropHandler = (files) => {\r\n    //   var file = files[0]\r\n    //   const reader = new FileReader();\r\n    //   reader.onload = (event) => {\r\n    //     console.log(event.target.result);\r\n    //   };\r\n    //   reader.readAsDataURL(file);\r\n    // setChannelFile(file);\r\n    // console.log(\"Drop Handler\");\r\n    // console.log(file);\r\n  };\r\n\r\n  // receives array of files that are done uploading when submit button is clicked\r\n  const handleLogoSubmit = (files, allFiles) => {\r\n    // console.log(files.map(f => f.meta))\r\n    allFiles.forEach((f) => {\r\n      var file = f.file;\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      // console.log(f.file);\r\n\r\n      reader.onloadend = function(e) {\r\n        // console.log(reader.result);\r\n        const response = handleLogoSizeLimitation(reader.result);\r\n        if (response.success) {\r\n          setStepFlow(2);\r\n          setProcessing(0);\r\n          setUploadDone(true);\r\n          setChannelFile(reader.result);\r\n        } else {\r\n          setProcessing(3);\r\n          setProcessingInfo(response.info);\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleLogoSizeLimitation = (base64) => {\r\n    // Setup Error on higher size of 128px\r\n    var sizeOf = require(\"image-size\");\r\n    var base64Data = base64.split(\";base64,\").pop();\r\n    var img = Buffer.from(base64Data, \"base64\");\r\n    var dimensions = sizeOf(img);\r\n\r\n    // Only proceed if image is equal to or less than 128\r\n    if (dimensions.width > 128 || dimensions.height > 128) {\r\n      console.log(\"Image size check failed... returning\");\r\n      return {\r\n        success: 0,\r\n        info: \"Image size check failed, Image should be 128X128PX\",\r\n      };\r\n    }\r\n\r\n    // only proceed if png or jpg\r\n    // This is brilliant: https://stackoverflow.com/questions/27886677/javascript-get-extension-from-base64-image\r\n    // char(0) => '/' : jpg\r\n    // char(0) => 'i' : png\r\n    let fileext;\r\n    console.log(base64Data.charAt(0));\r\n    if (base64Data.charAt(0) == \"/\") {\r\n      return {\r\n        success: 1,\r\n        info: \"Image checks passed\",\r\n      };\r\n    } else if (base64Data.charAt(0) == \"i\") {\r\n      return {\r\n        success: 1,\r\n        info: \"Image checks passed\",\r\n      };\r\n    } else {\r\n      return {\r\n        success: 0,\r\n        info: \"Image extension should be jpg or png\",\r\n      };\r\n    }\r\n  };\r\n\r\n  const handleCreateChannel = async (e) => {\r\n    // Check everything in order\r\n    // skip this for now\r\n    e.preventDefault();\r\n\r\n    if (\r\n      isEmpty(channelName) ||\r\n      isEmpty(channelInfo) ||\r\n      isEmpty(channelURL) ||\r\n      isEmpty(channelFile) ||\r\n      channelAlias\r\n        ? isEmpty(chainDetails)\r\n        : chainDetails\r\n        ? isEmpty(channelAlias)\r\n        : false\r\n    ) {\r\n      setProcessing(3);\r\n      setProcessingInfo(\"Channel Fields are Empty! Please retry!\");\r\n\r\n      return false;\r\n    }\r\n\r\n    // Check complete, start logic\r\n    setChannelInfoDone(true);\r\n    setProcessing(1);\r\n\r\n    console.log({\r\n      chainDetails,\r\n      channelAlias,\r\n    });\r\n    var chainDetailsSplit = chainDetails.split(\":\");\r\n    var blockchain = chainDetailsSplit[0];\r\n    var chain_id = chainDetailsSplit[1];\r\n    var address = channelAlias;\r\n\r\n    const input = JSON.stringify({\r\n      name: channelName,\r\n      info: channelInfo,\r\n      url: channelURL,\r\n      icon: channelFile,\r\n      blockchain: blockchain,\r\n      chain_id: chain_id,\r\n      address: address,\r\n    });\r\n\r\n    const ipfs = require(\"nano-ipfs-store\").at(\"https://ipfs.infura.io:5001\");\r\n\r\n    setProcessingInfo(\"Uploading Payload...\");\r\n    const storagePointer = await ipfs.add(input);\r\n    console.log(\"IPFS storagePointer:\", storagePointer);\r\n    setProcessingInfo(\"Payload Uploaded, Approval to transfer DAI...\");\r\n    //console.log(await ipfs.cat(storagePointer));\r\n\r\n    // Send Transaction\r\n    // First Approve DAI\r\n    var signer = library.getSigner(account);\r\n\r\n    let daiContract = new ethers.Contract(addresses.dai, abis.erc20, signer);\r\n\r\n    // Pick between 50 DAI AND 25K DAI\r\n    const fees = ethers.utils.parseUnits(channelStakeFees.toString(), 18);\r\n\r\n    var sendTransactionPromise = daiContract.approve(addresses.epnscore, fees);\r\n    const tx = await sendTransactionPromise;\r\n\r\n    console.log(tx);\r\n    console.log(\"waiting for tx to finish\");\r\n    setProcessingInfo(\"Waiting for Approval TX to finish...\");\r\n\r\n    await library.waitForTransaction(tx.hash);\r\n\r\n    let contract = new ethers.Contract(\r\n      addresses.epnscore,\r\n      abis.epnscore,\r\n      signer\r\n    );\r\n\r\n    const channelType = 2; // Open Channel\r\n    const identity = \"1+\" + storagePointer; // IPFS Storage Type and HASH\r\n    const identityBytes = ethers.utils.toUtf8Bytes(identity);\r\n\r\n    var anotherSendTxPromise = contract.createChannelWithFees(\r\n      channelType,\r\n      identityBytes,\r\n      fees\r\n    );\r\n\r\n    setProcessingInfo(\"Creating Channel TX in progress\");\r\n    anotherSendTxPromise\r\n    .then(async function (tx) {\r\n      console.log(tx);\r\n      console.log(\"Check: \" + account);\r\n      await library.waitForTransaction(tx.hash);\r\n      setProcessing(3);\r\n      setProcessingInfo(\"Channel Created! Reloading...\");\r\n\r\n      setTimeout(() => {\r\n          window.location.reload();\r\n      }, 2000);\r\n  })\r\n      .catch((err) => {\r\n        console.log(\"Error --> %o\", err);\r\n        console.log({ err });\r\n        setProcessing(3);\r\n        setProcessingInfo(\r\n          \"!!!PRODUCTION ENV!!! Contact support@epns.io to whitelist your wallet\"\r\n        );\r\n      });\r\n  };\r\n\r\n  const isEmpty = (field) => {\r\n    if (field.trim().length == 0) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  //mind Dai\r\n  const mintDai = async () => {\r\n    try {\r\n      var signer = library.getSigner(account);\r\n      let daiContract = new ethers.Contract(addresses.dai, abis.dai, signer);\r\n      console.log({\r\n        daiContract,\r\n      });\r\n      console.log(1);\r\n      let daiAmount = 1000;\r\n      const amount = ethers.utils.parseUnits(daiAmount.toString(), 18);\r\n      console.log(2);\r\n      var mintTransactionPromise = daiContract.mint(amount);\r\n      console.log(3);\r\n      const tx = await mintTransactionPromise;\r\n      console.log(tx);\r\n      await library.waitForTransaction(tx.hash);\r\n      console.log(4);\r\n      setProcessingInfo(\"1000 Dai minted successfully!\");\r\n      console.log(\"Transaction Completed\");\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider theme={themes}>\r\n      <Section>\r\n        <Content padding=\"10px 20px 20px\">\r\n          <Item align=\"flex-start\">\r\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\r\n              <Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">\r\n                Create\r\n              </Span>\r\n              <Span weight=\"200\" color={themes.color}> Your Channel!</Span>\r\n            </H2>\r\n            <H3 color={themes.createColor}>\r\n              <b color={themes.createColor}>Ethereum Push Notification Service</b> (EPNS) makes it\r\n              extremely easy to open and maintain a genuine channel of\r\n              communication with your users.\r\n            </H3>\r\n          </Item>\r\n        </Content>\r\n      </Section>\r\n\r\n      <Section>\r\n        <Content padding=\"0px 20px 20px\">\r\n          <ItemH justify=\"space-between\">\r\n            <Step\r\n              bg=\"#fff\"\r\n              activeBG=\"#e20880\"\r\n              type={stepFlow >= 1 ? \"active\" : \"inactive\"}\r\n            />\r\n            <Step\r\n              bg=\"#fff\"\r\n              activeBG=\"#e20880\"\r\n              type={stepFlow >= 2 ? \"active\" : \"inactive\"}\r\n            />\r\n            <Step\r\n              bg=\"#fff\"\r\n              activeBG=\"#e20880\"\r\n              type={stepFlow >= 3 ? \"active\" : \"inactive\"}\r\n            />\r\n            <Line />\r\n          </ItemH>\r\n        </Content>\r\n      </Section>\r\n\r\n      {/* Image Upload Section */}\r\n      {!uploadDone && (\r\n        <Section>\r\n          <Content padding=\"50px 20px 20px\">\r\n            <Item align=\"flex-start\">\r\n              <H3 color=\"#e20880\">\r\n                Upload Channel Logo to start the process. Make sure image is\r\n                128x128px.\r\n              </H3>\r\n            </Item>\r\n\r\n            <Item margin=\"-10px 0px 20px 0px\">\r\n              <Dropzone\r\n                onChangeStatus={handleChangeStatus}\r\n                onSubmit={handleLogoSubmit}\r\n                onDrop={onDropHandler}\r\n                maxFiles={1}\r\n                multiple={false}\r\n                accept=\"image/jpeg,image/png\"\r\n              />\r\n            </Item>\r\n            {\r\n              chainId != 1 ? (\r\n              <Item align=\"flex-end\">\r\n                <Minter\r\n                  onClick={() => {\r\n                    mintDai();\r\n                  }}\r\n                >\r\n                  <Pool>\r\n                    <br></br>\r\n                    <PoolShare>Get Free DAI for Channel</PoolShare>\r\n                  </Pool>\r\n                </Minter>\r\n              </Item>\r\n              ): <></>\r\n            }\r\n          </Content>\r\n        </Section>\r\n      )}\r\n\r\n      {/* Stake Fees Section */}\r\n      {uploadDone && !stakeFeesChoosen && (\r\n        <Section>\r\n          <Content padding=\"50px 0px 0px 0px\">\r\n            {/* <Item align=\"flex-start\" margin=\"0px 20px\">\r\n              <H3 color=\"#e20880\">Set your staking fees in DAI</H3>\r\n            </Item> */}\r\n\r\n            <Item\r\n              margin=\"-10px 20px 20px 20px\"\r\n              padding=\"20px 20px 10px 20px\"\r\n              bg=\"#f1f1f1\"\r\n            >\r\n              {/* <Slider\r\n                defaultValue={minStakeFees}\r\n                onChangeCommitted={(event, value) => setChannelStakeFees(value)}\r\n                aria-labelledby=\"discrete-slider\"\r\n                valueLabelDisplay=\"auto\"\r\n                step={minStakeFees}\r\n                marks\r\n                min={minStakeFees}\r\n                max={25000}\r\n              /> */}\r\n              <Span\r\n                weight=\"400\"\r\n                size=\"1.0em\"\r\n                textTransform=\"uppercase\"\r\n                spacing=\"0.2em\"\r\n              >\r\n                Amount Staked: {channelStakeFees} DAI\r\n              </Span>\r\n            </Item>\r\n\r\n            <Item self=\"stretch\" align=\"stretch\" margin=\"20px 0px 0px 0px\">\r\n              <Button\r\n                bg=\"#e20880\"\r\n                color=\"#fff\"\r\n                flex=\"1\"\r\n                radius=\"0px\"\r\n                padding=\"20px 10px\"\r\n                onClick={() => {\r\n                  setStakeFeesChoosen(true);\r\n                  setStepFlow(3);\r\n                }}\r\n              >\r\n                <Span\r\n                  color=\"#fff\"\r\n                  weight=\"400\"\r\n                  textTransform=\"uppercase\"\r\n                  spacing=\"0.1em\"\r\n                >\r\n                  Continue\r\n                </Span>\r\n              </Button>\r\n            </Item>\r\n          </Content>\r\n        </Section>\r\n      )}\r\n\r\n      {/* Channel Entry */}\r\n      {uploadDone && stakeFeesChoosen && !channelInfoDone && (\r\n        <Section>\r\n          <Content padding=\"50px 0px 0px 0px\">\r\n            <Item align=\"flex-start\" margin=\"0px 20px\">\r\n              <H3 color=\"#e20880\">Setup your Channel Info</H3>\r\n            </Item>\r\n\r\n            <FormSubmision\r\n              flex=\"1\"\r\n              direction=\"column\"\r\n              margin=\"0px\"\r\n              justify=\"center\"\r\n              size=\"1.1rem\"\r\n              onSubmit={handleCreateChannel}\r\n            >\r\n              <Item\r\n                margin=\"-10px 20px 15px 20px\"\r\n                flex=\"1\"\r\n                self=\"stretch\"\r\n                align=\"stretch\"\r\n              >\r\n                <Input\r\n                  required\r\n                  placeholder=\"Your Channel Name\"\r\n                  maxlength=\"40\"\r\n                  padding=\"12px\"\r\n                  border=\"1px solid #000\"\r\n                  weight=\"400\"\r\n                  size=\"1.2em\"\r\n                  bg=\"#fff\"\r\n                  value={channelName}\r\n                  onChange={(e) => {\r\n                    setChannelName(e.target.value);\r\n                  }}\r\n                />\r\n                {channelName.trim().length == 0 && (\r\n                  <Span\r\n                    padding=\"4px 10px\"\r\n                    right=\"0px\"\r\n                    top=\"0px\"\r\n                    pos=\"absolute\"\r\n                    color=\"#fff\"\r\n                    bg=\"#000\"\r\n                    size=\"0.7rem\"\r\n                    z=\"1\"\r\n                  >\r\n                    Name of Channel\r\n                  </Span>\r\n                )}\r\n              </Item>\r\n\r\n              <Item\r\n                margin=\"15px 20px 15px 20px\"\r\n                flex=\"1\"\r\n                self=\"stretch\"\r\n                align=\"stretch\"\r\n                style={{ position: \"relative\" }}\r\n              >\r\n                <Select\r\n                  className=\"basic-single\"\r\n                  classNamePrefix=\"select\"\r\n                  placeholder=\"Alias network\"\r\n                  name=\"color\"\r\n                  options={ALIAS_CHAINS}\r\n                  theme={(theme) => ({\r\n                    ...theme,\r\n                    borderRadius: 0,\r\n                    colors: {\r\n                      ...theme.colors,\r\n                      primary25: \"#e20880\",\r\n                      primary: \"#e20880\",\r\n                    },\r\n                  })}\r\n                  onChange={(selectedOption) => {\r\n                    setChainDetails(selectedOption.value);\r\n                  }}\r\n                />\r\n                <Input\r\n                  placeholder=\"Your Channel's Alias address\"\r\n                  maxlength=\"40\"\r\n                  padding=\"12px\"\r\n                  style={{ paddingLeft: \"22%\" }}\r\n                  border=\"1px solid #000\"\r\n                  weight=\"400\"\r\n                  size=\"1rem\"\r\n                  bg=\"#fff\"\r\n                  value={channelAlias}\r\n                  onChange={(e) => {\r\n                    setChannelAlias(e.target.value);\r\n                  }}\r\n                />\r\n              </Item>\r\n              <Item\r\n                margin=\"15px 20px 15px 20px\"\r\n                flex=\"1\"\r\n                self=\"stretch\"\r\n                align=\"stretch\"\r\n              >\r\n                <TextField\r\n                  required\r\n                  placeholder=\"Your Channel's Short Description (200 Characters)\"\r\n                  rows=\"4\"\r\n                  maxlength=\"200\"\r\n                  radius=\"4px\"\r\n                  padding=\"12px\"\r\n                  weight=\"400\"\r\n                  border=\"1px solid #000\"\r\n                  bg=\"#fff\"\r\n                  value={channelInfo}\r\n                  onChange={(e) => {\r\n                    setChannelInfo(e.target.value);\r\n                  }}\r\n                  autocomplete=\"off\"\r\n                />\r\n              </Item>\r\n\r\n              <ItemH\r\n                margin=\"15px 20px 15px 20px\"\r\n                flex=\"1\"\r\n                self=\"stretch\"\r\n                align=\"center\"\r\n              >\r\n                <Item flex=\"0\" margin=\"0px 5px 0px 0px\">\r\n                  <FiLink size={24} color={themes.color} />\r\n                </Item>\r\n                <Item flex=\"1\" margin=\"0px 0px 0px 5px\" align=\"stretch\">\r\n                  <Input\r\n                    required\r\n                    placeholder=\"Call to Action Link\"\r\n                    padding=\"12px\"\r\n                    border=\"1px solid #000\"\r\n                    radius=\"4px\"\r\n                    weight=\"400\"\r\n                    bg=\"#f1f1f1\"\r\n                    value={channelURL}\r\n                    onChange={(e) => {\r\n                      setChannelURL(e.target.value);\r\n                    }}\r\n                  />\r\n                  {channelURL.trim().length == 0 && (\r\n                    <Span\r\n                      padding=\"4px 10px\"\r\n                      right=\"0px\"\r\n                      top=\"0px\"\r\n                      pos=\"absolute\"\r\n                      color=\"#fff\"\r\n                      bg=\"#000\"\r\n                      size=\"0.7rem\"\r\n                      z=\"1\"\r\n                    >\r\n                      Channel's Website URL\r\n                    </Span>\r\n                  )}\r\n                </Item>\r\n              </ItemH>\r\n\r\n              <Item\r\n                margin=\"15px 0px 0px 0px\"\r\n                flex=\"1\"\r\n                self=\"stretch\"\r\n                align=\"stretch\"\r\n              >\r\n                <Button\r\n                  bg=\"#e20880\"\r\n                  color=\"#fff\"\r\n                  flex=\"1\"\r\n                  radius=\"0px\"\r\n                  padding=\"20px 10px\"\r\n                  disabled={processing == 1 ? true : false}\r\n                >\r\n                  {processing == 1 && (\r\n                    <Loader type=\"Oval\" color=\"#fff\" height={24} width={24} />\r\n                  )}\r\n                  {processing != 1 && (\r\n                    <Input\r\n                      cursor=\"hand\"\r\n                      textTransform=\"uppercase\"\r\n                      color=\"#fff\"\r\n                      weight=\"400\"\r\n                      size=\"0.8em\"\r\n                      spacing=\"0.2em\"\r\n                      type=\"submit\"\r\n                      value=\"Setup Channel\"\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </Item>\r\n            </FormSubmision>\r\n          </Content>\r\n        </Section>\r\n      )}\r\n\r\n      {/* Channel Setup Progress */}\r\n      {(processing == 1 || processing == 3) && (\r\n        <Section>\r\n          <Content padding=\"0px 0px 0px 0px\">\r\n            {processing == 1 && (\r\n              <Item margin=\"20px 0px 10px 0px\">\r\n                <Loader type=\"Oval\" color=\"#000\" height={24} width={24} />\r\n              </Item>\r\n            )}\r\n\r\n            <Item\r\n              color=\"#fff\"\r\n              bg={processing == 1 ? \"#e1087f\" : \"#000\"}\r\n              padding=\"10px 15px\"\r\n              margin=\"15px 0px\"\r\n            >\r\n              <Span\r\n                color=\"#fff\"\r\n                textTransform=\"uppercase\"\r\n                spacing=\"0.1em\"\r\n                weight=\"400\"\r\n                size=\"1em\"\r\n              >\r\n                {processingInfo}\r\n              </Span>\r\n            </Item>\r\n          </Content>\r\n        </Section>\r\n      )}\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n// css styles\r\nconst Step = styled.div`\r\n  height: 12px;\r\n  width: 12px;\r\n  background: ${(props) => props.bg || \"#fff\"};\r\n  border: 4px solid ${(props) => props.activeBG || \"#000\"};\r\n  border-radius: 100%;\r\n\r\n  ${({ type }) =>\r\n    type == \"active\" &&\r\n    css`\r\n      background: ${(props) => props.activeBG || \"#ddd\"};\r\n      border: 4px solid #00000022;\r\n    `};\r\n`;\r\n\r\nconst Line = styled.div`\r\n  position: absolute;\r\n  height: 5px;\r\n  background: #f1f1f1;\r\n  right: 0;\r\n  left: 0;\r\n  margin: 0px 10px;\r\n  z-index: -1;\r\n`;\r\n\r\nconst Channel = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1;\r\n`;\r\n\r\nconst Notice = styled.div`\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  color: #674c9f;\r\n  font-size: 30px;\r\n  font-weight: 300;\r\n  margin-top: 0px;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst Info = styled.label`\r\n  padding-bottom: 20px;\r\n  font-size: 14px;\r\n  color: #000;\r\n`;\r\n\r\nconst Info2 = styled(Info)``;\r\nconst Name = styled(Input)`\r\n  border-bottom: 1px solid #e20880;\r\n  font-size: 24px;\r\n`;\r\n\r\nconst ShortInfo = styled.textarea`\r\n  outline: 0;\r\n  border: 0;\r\n  border-bottom: 1px solid #35c5f3;\r\n  margin: 10px;\r\n  font-size: 18px;\r\n  min-height: 80px;\r\n  color: #111;\r\n`;\r\n\r\nconst Url = styled(Input)`\r\n  border-bottom: 1px solid #674c9f;\r\n  font-size: 1=8px;\r\n`;\r\n\r\nconst Text = styled.span``;\r\n\r\nconst Continue = styled.button`\r\n  border: 0;\r\n  outline: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  background: ${(props) => props.theme || \"#674c9f\"};\r\n  margin: 30px 0px 0px 0px;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n`;\r\nconst Minter = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 13px;\r\n`;\r\n\r\nconst ChannelMetaBox = styled.label`\r\n  margin: 0px 5px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  padding: 10px 20px;\r\n  border-radius: 10px;\r\n  font-size: 15px;\r\n  // font-size: 11px;\r\n`;\r\nconst Pool = styled.div`\r\n  margin: 0px 10px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst PoolShare = styled(ChannelMetaBox)`\r\n  background: #e20880;\r\n  // background: #674c9f;\r\n`;\r\n\r\n// Export Default\r\nexport default CreateChannel;\r\n","(function() {\r\n\t// The random number is a js implementation of the Xorshift PRNG\r\n\tvar randseed = new Array(4); // Xorshift: [x, y, z, w] 32 bit values\r\n\r\n\tfunction seedrand(seed) {\r\n\t\tfor (var i = 0; i < randseed.length; i++) {\r\n\t\t\trandseed[i] = 0;\r\n\t\t}\r\n\t\tfor (var i = 0; i < seed.length; i++) {\r\n\t\t\trandseed[i%4] = ((randseed[i%4] << 5) - randseed[i%4]) + seed.charCodeAt(i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction rand() {\r\n\t\t// based on Java's String.hashCode(), expanded to 4 32bit values\r\n\t\tvar t = randseed[0] ^ (randseed[0] << 11);\r\n\r\n\t\trandseed[0] = randseed[1];\r\n\t\trandseed[1] = randseed[2];\r\n\t\trandseed[2] = randseed[3];\r\n\t\trandseed[3] = (randseed[3] ^ (randseed[3] >> 19) ^ t ^ (t >> 8));\r\n\r\n\t\treturn (randseed[3]>>>0) / ((1 << 31)>>>0);\r\n\t}\r\n\r\n\tfunction createColor() {\r\n\t\t//saturation is the whole color spectrum\r\n\t\tvar h = Math.floor(rand() * 360);\r\n\t\t//saturation goes from 40 to 100, it avoids greyish colors\r\n\t\tvar s = ((rand() * 60) + 40) + '%';\r\n\t\t//lightness can be anything from 0 to 100, but probabilities are a bell curve around 50%\r\n\t\tvar l = ((rand()+rand()+rand()+rand()) * 25) + '%';\r\n\r\n\t\tvar color = 'hsl(' + h + ',' + s + ',' + l + ')';\r\n\t\treturn color;\r\n\t}\r\n\r\n\tfunction createImageData(size) {\r\n\t\tvar width = size; // Only support square icons for now\r\n\t\tvar height = size;\r\n\r\n\t\tvar dataWidth = Math.ceil(width / 2);\r\n\t\tvar mirrorWidth = width - dataWidth;\r\n\r\n\t\tvar data = [];\r\n\t\tfor(var y = 0; y < height; y++) {\r\n\t\t\tvar row = [];\r\n\t\t\tfor(var x = 0; x < dataWidth; x++) {\r\n\t\t\t\t// this makes foreground and background color to have a 43% (1/2.3) probability\r\n\t\t\t\t// spot color has 13% chance\r\n\t\t\t\trow[x] = Math.floor(rand()*2.3);\r\n\t\t\t}\r\n\t\t\tvar r = row.slice(0, mirrorWidth);\r\n\t\t\tr.reverse();\r\n\t\t\trow = row.concat(r);\r\n\r\n\t\t\tfor(var i = 0; i < row.length; i++) {\r\n\t\t\t\tdata.push(row[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction buildOpts(opts) {\r\n\t\tvar newOpts = {};\r\n\r\n\t\tnewOpts.seed = opts.seed || Math.floor((Math.random()*Math.pow(10,16))).toString(16);\r\n\r\n\t\tseedrand(newOpts.seed);\r\n\r\n\t\tnewOpts.size = opts.size || 8;\r\n\t\tnewOpts.scale = opts.scale || 4;\r\n\t\tnewOpts.color = opts.color || createColor();\r\n\t\tnewOpts.bgcolor = opts.bgcolor || createColor();\r\n\t\tnewOpts.spotcolor = opts.spotcolor || createColor();\r\n\r\n\t\treturn newOpts;\r\n\t}\r\n\r\n\tfunction renderIcon(opts, canvas) {\r\n\t\topts = buildOpts(opts || {});\r\n\t\tvar imageData = createImageData(opts.size);\r\n\t\tvar width = Math.sqrt(imageData.length);\r\n\r\n\t\tcanvas.width = canvas.height = opts.size * opts.scale;\r\n\r\n\t\tvar cc = canvas.getContext('2d');\r\n\t\tcc.fillStyle = opts.bgcolor;\r\n\t\tcc.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\tcc.fillStyle = opts.color;\r\n\r\n\t\tfor(var i = 0; i < imageData.length; i++) {\r\n\r\n\t\t\t// if data is 0, leave the background\r\n\t\t\tif(imageData[i]) {\r\n\t\t\t\tvar row = Math.floor(i / width);\r\n\t\t\t\tvar col = i % width;\r\n\r\n\t\t\t\t// if data is 2, choose spot color, if 1 choose foreground\r\n\t\t\t\tcc.fillStyle = (imageData[i] == 1) ? opts.color : opts.spotcolor;\r\n\r\n\t\t\t\tcc.fillRect(col * opts.scale, row * opts.scale, opts.scale, opts.scale);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn canvas;\r\n\t}\r\n\r\n\tfunction createIcon(opts) {\r\n\t\tvar canvas = document.createElement('canvas');\r\n\r\n\t\trenderIcon(opts, canvas);\r\n\r\n\t\treturn canvas;\r\n\t}\r\n\r\n\tvar api = {\r\n\t\tcreate: createIcon,\r\n\t\trender: renderIcon\r\n\t};\r\n\r\n\tif (typeof module !== \"undefined\") {\r\n\t\tmodule.exports = api;\r\n\t}\r\n\tif (typeof window !== \"undefined\") {\r\n\t\t window.blockies = api;\r\n\t}\r\n\r\n})();\r\n","import React from \"react\";\r\n\r\nimport { addresses, abis } from \"@project/contracts\";\r\nimport { ethers, utils, BigNumber} from \"ethers\";\r\nimport { parseEther, bigNumber } from 'ethers/utils'\r\nconst claims = require(\"config/airdrop/claims.json\")\r\n\r\n// Airdrop Helper Functions\r\nconst AirdropHelper = {\r\n    combinedHash : (first, second) => {\r\n        if (!first) {\r\n          return second\r\n        }\r\n        if (!second) {\r\n          return first\r\n        }\r\n      \r\n        return Buffer.from(\r\n          utils.solidityKeccak256(['bytes32', 'bytes32'], [first, second].sort(Buffer.compare)).slice(2),\r\n          'hex'\r\n        )\r\n    },\r\n      \r\n    toNode : (index, account, amount) => {\r\n    const pairHex = utils.solidityKeccak256(['uint256', 'address', 'uint256'], [index, account, amount])\r\n    return Buffer.from(pairHex.slice(2), 'hex')\r\n    },\r\n      \r\n    verifyProof : (\r\n    index,\r\n    account,\r\n    amount,\r\n    proof,\r\n    root\r\n    ) => {\r\n    let pair = AirdropHelper.toNode(index, account, amount)\r\n    for (const item of proof) {\r\n        pair = AirdropHelper.combinedHash(pair, item)\r\n    }\r\n    \r\n    return pair.equals(root)\r\n    },\r\n      \r\n    getNextLayer : (elements) => {\r\n    return elements.reduce((layer, el, idx, arr) => {\r\n        if (idx % 2 === 0) {\r\n        // Hash the current element with its pair element\r\n        layer.push(AirdropHelper.combinedHash(el, arr[idx + 1]))\r\n        }\r\n    \r\n        return layer\r\n    }, [])\r\n    },\r\n      \r\n    getRoot : (balances) => {\r\n    let nodes = balances\r\n        .map(({ account, amount, index }) => AirdropHelper.toNode(index, account, amount))\r\n        // sort by lexicographical order\r\n        .sort(Buffer.compare)\r\n    \r\n    // deduplicate any eleents\r\n    nodes = nodes.filter((el, idx) => {\r\n        return idx === 0 || !nodes[idx - 1].equals(el)\r\n    })\r\n    \r\n    const layers = []\r\n    layers.push(nodes)\r\n    \r\n    // Get next layer until we reach the root\r\n    while (layers[layers.length - 1].length > 1) {\r\n        layers.push(AirdropHelper.getNextLayer(layers[layers.length - 1]))\r\n    }\r\n    \r\n    return layers[layers.length - 1][0]\r\n    },\r\n\r\n\r\n    verifyAddress: async (user, contract) => {\r\n        const enableLogs = 1;\r\n        const merkleRootHex = claims.merkleRoot\r\n        const merkleRoot = Buffer.from(merkleRootHex.slice(2), 'hex')\r\n        if(claims.claims[user]){\r\n            const claim = claims.claims[user]\r\n        const proof = claim.proof.map((p) => Buffer.from(p.slice(2), 'hex'))\r\n        const verified = (AirdropHelper.verifyProof(claim.index, user, claim.amount, proof, merkleRoot))\r\n        let txPromise = await contract.isClaimed(claim.index)\r\n        const isClaimed = await txPromise\r\n        const claimable = !isClaimed\r\n        const BNamount = BigNumber.from(claim.amount)\r\n        const amount = BNamount.toNumber()\r\n        // const amount = ethers.utils.parseEther(num)\r\n        return({ index: claim.index, account: user, amount, proof, merkleRoot, verified, claimable})\r\n        }\r\n        else\r\n        return({verified: false})\r\n    },\r\n\r\n  \r\n\r\n}\r\n\r\nexport default AirdropHelper;\r\n"],"sourceRoot":""}